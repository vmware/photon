From 175850b03e1af251d705c1d04b2b9b3c1c06e48f Mon Sep 17 00:00:00 2001
From: Akira TAGOH <akira@tagoh.org>
Date: Thu, 17 Feb 2022 19:06:10 +0900
Subject: [PATCH] Fix SEGV issue in fribidi_remove_bidi_marks

Escape from fribidi_remove_bidi_marks() immediately if str is null.

This fixes https://github.com/fribidi/fribidi/issues/183
---
 lib/fribidi.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/lib/fribidi.c b/lib/fribidi.c
index f5da0da..70bdab2 100644
--- a/lib/fribidi.c
+++ b/lib/fribidi.c
@@ -74,7 +74,7 @@ fribidi_remove_bidi_marks (
   fribidi_boolean status = false;
 
   if UNLIKELY
-    (len == 0)
+    (len == 0 || str == NULL)
     {
       status = true;
       goto out;
