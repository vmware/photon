--- a/scripts/config2help.c	2018-06-23 22:06:17.000000000 -7000
+++ b/scripts/config2help.c	2018-09-10 21:02:32.000000000 -8000
@@ -262,7 +262,7 @@
   // entry until we run out of matching pairs.
   for (;;) {
     struct symbol *throw = 0, *catch;
-    char *this, *that, *cusage, *tusage, *name = 0;
+    char *this, *that, *cusage, *tusage, *name = NULL, *that_start;
     int len;
 
     // find a usage: name and collate all enabled entries with that name
@@ -275,11 +275,16 @@
 
         // Align usage: lines, finding a matching pair so we can suck help
         // text out of throw into catch, copying from this to that
-        if (!throw) usage = that;
+        if (!throw) {
+          if (name)
+            free(name);
+          name = strdup(that);
+          that_start = that;
+        }
         else if (strncmp(name, that, len) || !isspace(that[len])) continue;
         catch->enabled++;
         while (!isspace(*that) && *that) that++;
-        if (!throw) len = that-usage;
+        if (!throw) len = that-that_start;
         free(name);
         name = strndup(usage, len);
         that = skip_spaces(that);
@@ -386,6 +391,8 @@
       }
     }
 
+    if (name)
+      free(name);
     // Did we find one?
 
     if (!throw) break;
