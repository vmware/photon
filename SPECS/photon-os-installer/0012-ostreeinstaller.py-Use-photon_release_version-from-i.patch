From e1acdbabda7575ef151af22fc5981b22301e54d3 Mon Sep 17 00:00:00 2001
From: Piyush Gupta <gpiyush@vmware.com>
Date: Wed, 8 Mar 2023 14:31:32 +0000
Subject: [PATCH 12/16] ostreeinstaller.py: Use photon_release_version from
 installer object as                     key doesn't exist in 'known_keys'.

Change-Id: I772a5b774a7a172b529df7bf6e28b303c92166c6
---
 photon_installer/ostreeinstaller.py | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

diff --git a/photon_installer/ostreeinstaller.py b/photon_installer/ostreeinstaller.py
index e785b4b..de78d01 100644
--- a/photon_installer/ostreeinstaller.py
+++ b/photon_installer/ostreeinstaller.py
@@ -20,6 +20,7 @@ class OstreeInstaller(object):
     def __init__(self, installer):
         self.repo_config = {}
         self.installer_path = installer.installer_path
+        self.photon_release_version = installer.photon_release_version
         # simulate inheritance
         self.install_config = installer.install_config
         self.repo_read_conf()
@@ -44,7 +45,7 @@ class OstreeInstaller(object):
         with open(conf_path) as repo_conf:
             for line in repo_conf:
                 name, value = line.partition("=")[::2]
-                self.repo_config[name] = str(value.strip(' \n\t\r')).format(self.install_config['photon_release_version'], self.install_config['arch'])
+                self.repo_config[name] = str(value.strip(' \n\t\r')).format(self.photon_release_version, self.install_config['arch'])
 
     def pull_repo(self, repo_url, repo_ref):
         self.run([['ostree', 'remote', 'add', '--repo={}/ostree/repo'.format(self.photon_root), '--set=gpg-verify=false', 'photon', '{}'
-- 
2.23.1

