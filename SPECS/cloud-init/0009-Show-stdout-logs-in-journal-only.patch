From 94f51f74f862ce96d9d333c6a980405208d688b4 Mon Sep 17 00:00:00 2001
From: Shreenidhi Shedi <shreenidhi.shedi@broadcom.com>
Date: Mon, 10 Jun 2024 11:05:50 +0530
Subject: [PATCH 9/9] Show stdout logs in journal only

Signed-off-by: Shreenidhi Shedi <shreenidhi.shedi@broadcom.com>
---
 systemd/cloud-config.service          | 2 +-
 systemd/cloud-final.service           | 2 +-
 systemd/cloud-init-local.service.tmpl | 3 +--
 systemd/cloud-init.service.tmpl       | 2 +-
 4 files changed, 4 insertions(+), 5 deletions(-)

diff --git a/systemd/cloud-config.service b/systemd/cloud-config.service
index 79ff733a4..bc798bcc7 100644
--- a/systemd/cloud-config.service
+++ b/systemd/cloud-config.service
@@ -14,7 +14,7 @@ RemainAfterExit=yes
 TimeoutSec=0
 
 # Output needs to appear in instance console output
-StandardOutput=journal+console
+StandardOutput=journal
 
 [Install]
 WantedBy=cloud-init.target
diff --git a/systemd/cloud-final.service b/systemd/cloud-final.service
index 28dbe1127..760da62fc 100644
--- a/systemd/cloud-final.service
+++ b/systemd/cloud-final.service
@@ -18,7 +18,7 @@ TasksMax=infinity
 KillMode=process
 
 # Output needs to appear in instance console output
-StandardOutput=journal+console
+StandardOutput=journal
 
 [Install]
 WantedBy=cloud-init.target
diff --git a/systemd/cloud-init-local.service.tmpl b/systemd/cloud-init-local.service.tmpl
index 1f2128afa..ad96b6677 100644
--- a/systemd/cloud-init-local.service.tmpl
+++ b/systemd/cloud-init-local.service.tmpl
@@ -30,8 +30,7 @@ ExecStart=/usr/bin/cloud-init init --local
 RemainAfterExit=yes
 TimeoutSec=0
 
-# Output needs to appear in instance console output
-StandardOutput=journal+console
+StandardOutput=journal
 
 [Install]
 WantedBy=cloud-init.target
diff --git a/systemd/cloud-init.service.tmpl b/systemd/cloud-init.service.tmpl
index 939544313..35d1a06fd 100644
--- a/systemd/cloud-init.service.tmpl
+++ b/systemd/cloud-init.service.tmpl
@@ -50,7 +50,7 @@ RemainAfterExit=yes
 TimeoutSec=0
 
 # Output needs to appear in instance console output
-StandardOutput=journal+console
+StandardOutput=journal
 
 [Install]
 WantedBy=cloud-init.target
-- 
2.48.1

