<!doctype html><html lang=en class=no-js><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=generator content="Hugo 0.83.1"><link rel=canonical type=text/html href=../../../docs/troubleshooting-guide/><link rel=alternate type=application/rss+xml href=../../../docs/troubleshooting-guide/index.xml><meta name=ROBOTS content="NOINDEX, NOFOLLOW"><link rel="shortcut icon" href=../../../favicons/favicon.ico><link rel=apple-touch-icon href=../../../favicons/apple-touch-icon-180x180.png sizes=180x180><link rel=icon type=image/png href=../../../favicons/favicon-16x16.png sizes=16x16><link rel=icon type=image/png href=../../../favicons/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=../../../favicons/android-36x36.png sizes=36x36><link rel=icon type=image/png href=../../../favicons/android-48x48.png sizes=48x48><link rel=icon type=image/png href=../../../favicons/android-72x72.png sizes=72x72><link rel=icon type=image/png href=../../../favicons/android-96x96.png sizes=96x96><link rel=icon type=image/png href=../../../favicons/android-144x144.png sizes=144x144><link rel=icon type=image/png href=../../../favicons/android-192x192.png sizes=192x192><title>Troubleshooting Guide |</title><meta property="og:title" content="Troubleshooting Guide"><meta property="og:description" content="VMware Photon docs"><meta property="og:type" content="website"><meta property="og:url" content="/docs/troubleshooting-guide/"><meta itemprop=name content="Troubleshooting Guide"><meta itemprop=description content="VMware Photon docs"><meta name=twitter:card content="summary"><meta name=twitter:title content="Troubleshooting Guide"><meta name=twitter:description content="VMware Photon docs"><link rel=preload href=../../../scss/main.min.18b5c0a88e53c7bb16dfb3e91bad9ac8b41572fb8454c9b72e34b007f853d5a3.css as=style><link href=../../../scss/main.min.18b5c0a88e53c7bb16dfb3e91bad9ac8b41572fb8454c9b72e34b007f853d5a3.css rel=stylesheet integrity><script src=https://code.jquery.com/jquery-3.5.1.min.js integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin=anonymous></script><script src=https://unpkg.com/lunr@2.3.8/lunr.min.js integrity=sha384-vRQ9bDyE0Wnu+lMfm57BlYLO0/XauFuKpVsZPs7KEDwYKktWi5+Kz3MP8++DFlRY crossorigin=anonymous></script></head><body class=td-section><header><div class="container-fluid pl-3 pr-3" id=navbarish><nav class="navbar navbar-default navbar-dark navbar-expand-md d-flex justify-content-between" role=navigation data-toggle=collapse data-target=#menu_items aria-expanded=false aria-controls=navbar><div class="navbar-header d-flex align-items-center justify-content-between"><a class=navbar-brand href=../../../><span class=navbar-logo><svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 511.4375 135.7375" height="135.7375" width="511.4375" id="svg3355"><defs id="defs3359"><clipPath id="clipPath3387" clipPathUnits="userSpaceOnUse"><path id="path3389" d="M142.293 245.191l494.93 337.36L74.8398 348.098"/></clipPath><linearGradient id="linearGradient3391" spreadMethod="pad" gradientTransform="matrix(-493.8,-339.007,339.007,-493.8,601.845,634.081)" gradientUnits="userSpaceOnUse" y2="0" x2="1" y1="0" x1="0"><stop id="stop3393" offset="0" style="stop-opacity:1;stop-color:#ffffff"/><stop id="stop3395" offset="1" style="stop-opacity:1;stop-color:#80c64c"/></linearGradient><clipPath id="clipPath3405" clipPathUnits="userSpaceOnUse"><path id="path3407" d="M85.2852 570.719 516.813 593.84 54.5195 690.582"/></clipPath><linearGradient id="linearGradient3409" spreadMethod="pad" gradientTransform="matrix(-304.079,-208.759,208.759,-304.079,420.197,734.568)" gradientUnits="userSpaceOnUse" y2="0" x2="1" y1="0" x1="0"><stop id="stop3411" offset="0" style="stop-opacity:1;stop-color:#ffffff"/><stop id="stop3413" offset="1" style="stop-opacity:1;stop-color:#22437e"/></linearGradient><clipPath id="clipPath3423" clipPathUnits="userSpaceOnUse"><path id="path3425" d="m538.137 270.234 95.324 293.5-205.699-247.089"/></clipPath><linearGradient id="linearGradient3427" spreadMethod="pad" gradientTransform="matrix(-255.101,-175.134,175.134,-255.101,686.667,486.234)" gradientUnits="userSpaceOnUse" y2="0" x2="1" y1="0" x1="0"><stop id="stop3429" offset="0" style="stop-opacity:1;stop-color:#ffffff"/><stop id="stop3431" offset="1" style="stop-opacity:1;stop-color:#65a5de"/></linearGradient><clipPath id="clipPath3441" clipPathUnits="userSpaceOnUse"><path id="path3443" d="M857.758 94.3906 656.035 546.801 745.172 53.6406"/></clipPath><linearGradient id="linearGradient3445" spreadMethod="pad" gradientTransform="matrix(-102.35,-449.574,449.574,-102.35,800.888,513.826)" gradientUnits="userSpaceOnUse" y2="0" x2="1" y1="0" x1="0"><stop id="stop3447" offset="0" style="stop-opacity:1;stop-color:#ffffff"/><stop id="stop3449" offset="1" style="stop-opacity:1;stop-color:#c6da3a"/></linearGradient><clipPath id="clipPath3459" clipPathUnits="userSpaceOnUse"><path id="path3461" d="M481.316 864.746 635.938 602.125l-41.313 301.32"/></clipPath><linearGradient id="linearGradient3463" spreadMethod="pad" gradientTransform="matrix(67.7401,274.401,-274.401,67.7401,532.514,627.656)" gradientUnits="userSpaceOnUse" y2="0" x2="1" y1="0" x1="0"><stop id="stop3465" offset="0" style="stop-opacity:1;stop-color:#ffffff"/><stop id="stop3467" offset="1" style="stop-opacity:1;stop-color:#c6da3a"/></linearGradient><clipPath id="clipPath3477" clipPathUnits="userSpaceOnUse"><path id="path3479" d="M1085.54 913.828 683.598 585.359l456.522 219.75"/></clipPath><linearGradient id="linearGradient3481" spreadMethod="pad" gradientTransform="matrix(441.375,262.068,-262.068,441.375,675.147,599.59)" gradientUnits="userSpaceOnUse" y2="0" x2="1" y1="0" x1="0"><stop id="stop3483" offset="0" style="stop-opacity:1;stop-color:#ffffff"/><stop id="stop3485" offset="1" style="stop-opacity:1;stop-color:#22638b"/></linearGradient><clipPath id="clipPath3495" clipPathUnits="userSpaceOnUse"><path id="path3497" d="M1177.19 335.031 693.664 556.211 1106.69 235.887"/></clipPath><linearGradient id="linearGradient3499" spreadMethod="pad" gradientTransform="matrix(450.785,-274.875,274.875,450.785,694.818,558.101)" gradientUnits="userSpaceOnUse" y2="0" x2="1" y1="0" x1="0"><stop id="stop3501" offset="0" style="stop-opacity:1;stop-color:#ffffff"/><stop id="stop3503" offset="1" style="stop-opacity:1;stop-color:#a6dbe7"/></linearGradient><clipPath id="clipPath3513" clipPathUnits="userSpaceOnUse"><path id="path3515" d="M209.754 773.73l382.32-187.417L280.926 872.391"/></clipPath><linearGradient id="linearGradient3517" spreadMethod="pad" gradientTransform="matrix(-360.263,223.047,-223.047,-360.263,601.957,602.271)" gradientUnits="userSpaceOnUse" y2="0" x2="1" y1="0" x1="0"><stop id="stop3519" offset="0" style="stop-opacity:1;stop-color:#ffffff"/><stop id="stop3521" offset="1" style="stop-opacity:1;stop-color:#a6dbe7"/></linearGradient></defs><g transform="matrix(1.25,0,0,-1.25,0,135.7375)" id="g3363"><g transform="scale(0.1,0.1)" id="g3365"><path id="path3367" style="fill:#696566;fill-opacity:1;fill-rule:nonzero;stroke:none" d="m1544.2 536.77c69.27.0 114.66 37.031 114.66 91.972v1.192c0 59.726-44.79 90.781-112.28 90.781h-105.7V536.77h103.32zm-150.51 203.652c0 13.141 10.75 23.891 23.29 23.891h133.19c94.36.0 156.47-50.172 156.47-132.586v-1.192c0-90.183-75.25-136.765-164.24-136.765h-101.52V367.148c0-13.132-10.76-23.886-23.9-23.886-12.54.0-23.29 10.754-23.29 23.886v373.274"/><path id="path3369" style="fill:#696566;fill-opacity:1;fill-rule:nonzero;stroke:none" d="m1765.51 743.41c0 13.141 10.76 23.887 23.29 23.887 13.14.0 23.9-10.746 23.9-23.887V578.574h241.28V743.41c0 13.141 10.74 23.887 23.88 23.887 12.55.0 23.3-10.746 23.3-23.887V367.148c0-13.132-10.75-23.886-23.3-23.886-13.14.0-23.88 10.754-23.88 23.886v167.227H1812.7V367.148c0-13.132-10.76-23.886-23.9-23.886-12.53.0-23.29 10.754-23.29 23.886V743.41"/><path id="path3371" style="fill:#696566;fill-opacity:1;fill-rule:nonzero;stroke:none" d="m2554.86 554.082v1.203c0 94.957-69.28 172.598-164.83 172.598-95.56.0-163.65-76.445-163.65-171.406v-1.192c0-94.961 69.28-172.597 164.84-172.597 95.55.0 163.64 76.445 163.64 171.394zm-377.45.0v1.203c0 115.262 86.6 216.192 213.81 216.192 127.2.0 212.6-99.739 212.6-215v-1.192c0-115.265-86.59-216.203-213.79-216.203-127.22.0-212.62 99.738-212.62 215"/><path id="path3373" style="fill:#696566;fill-opacity:1;fill-rule:nonzero;stroke:none" d="m2756.35 720.715h-121.24c-11.94.0-22.09 9.555-22.09 21.5.0 11.941 10.15 22.098 22.09 22.098h290.26c11.94.0 22.1-10.157 22.1-22.098.0-11.945-10.16-21.5-22.1-21.5h-121.23V367.148c0-13.132-10.75-23.886-23.9-23.886-13.13.0-23.89 10.754-23.89 23.886v353.567"/><path id="path3375" style="fill:#696566;fill-opacity:1;fill-rule:nonzero;stroke:none" d="m3332.78 554.082v1.203c0 94.957-69.28 172.598-164.83 172.598-95.56.0-163.65-76.445-163.65-171.406v-1.192c0-94.961 69.28-172.597 164.84-172.597 95.55.0 163.64 76.445 163.64 171.394zm-377.45.0v1.203c0 115.262 86.6 216.192 213.81 216.192 127.2.0 212.6-99.739 212.6-215v-1.192c0-115.265-86.59-216.203-213.79-216.203-127.22.0-212.62 99.738-212.62 215"/><path id="path3377" style="fill:#696566;fill-opacity:1;fill-rule:nonzero;stroke:none" d="m3458.31 742.813c0 12.539 10.75 23.292 23.29 23.292h6.57c10.75.0 17.32-5.375 23.89-13.742l253.83-323.691v315.332c0 12.547 10.14 23.293 23.29 23.293 12.54.0 22.69-10.746 22.69-23.293V366.555c0-12.539-8.96-22.09-21.5-22.09h-2.4c-10.14.0-17.31 5.965-24.48 14.324l-259.2 331.465V366.555c0-12.539-10.14-23.293-23.29-23.293-12.54.0-22.69 10.754-22.69 23.293v376.258"/><path id="path3379" style="fill:#696566;fill-opacity:1;fill-rule:nonzero;stroke:none" d="m3982.91 759.98c0 4.528 3.13 7.665 7.66 7.665h2.09c3.14.0 5.22-1.395 6.97-3.829l37.6-58.503 38.3 58.503c1.74 2.434 3.83 3.829 6.61 3.829h2.09c3.83.0 7.32-3.485 7.32-7.665v-94.011c0-4.18-3.49-7.66-7.66-7.66-4.18.0-7.31 3.48-7.31 7.66v72.426l-32.38-48.403c-1.75-2.785-3.83-4.527-6.97-4.527-3.13.0-5.22 1.742-6.96 4.527l-32.04 48.403v-72.426c0-4.18-3.48-7.66-7.66-7.66s-7.66 3.48-7.66 7.66v94.011zm-73.47-7.308h-28.91c-3.82.0-7.3 3.48-7.3 7.308.0 3.836 3.48 7.317 7.3 7.317h72.78c4.18.0 7.31-3.481 7.31-7.317.0-3.828-3.13-7.308-7.31-7.308h-28.55v-86.703c0-4.18-3.48-7.66-8.01-7.66-4.18.0-7.31 3.48-7.31 7.66v86.703"/><path id="path3381" style="fill:#696566;fill-opacity:1;fill-rule:nonzero;stroke:none" d="m597.898 989.039c-236.39.0-428.714-192.324-428.714-428.719.0-236.39 192.324-428.715 428.714-428.715 236.395.0 428.722 192.325 428.722 428.715.0 236.395-192.327 428.719-428.722 428.719zm0-954.289c-289.796.0-525.566 235.773-525.566 525.57s235.77 525.57 525.566 525.57c289.801.0 525.572-235.773 525.572-525.57S887.699 34.75 597.898 34.75"/><g id="g3383"><g clip-path="url(#clipPath3387)" id="g3385"><path id="path3397" style="fill:url(#linearGradient3391);fill-opacity:1;fill-rule:nonzero;stroke:none" d="M142.293 245.191l494.93 337.36L74.8398 348.098"/></g></g><path id="path3399" style="fill:#62b92c;fill-opacity:1;fill-rule:nonzero;stroke:none" d="m167.938 304.09c-4.524 34.332-36.024 58.496-70.356 53.973-34.332-4.52-58.5-36.02-53.9765-70.352 4.5234-34.336 36.0234-58.5 70.3555-53.977 34.332 4.524 58.5 36.02 53.977 70.356"/><g id="g3401"><g clip-path="url(#clipPath3405)" id="g3403"><path id="path3415" style="fill:url(#linearGradient3409);fill-opacity:1;fill-rule:nonzero;stroke:none" d="M85.2852 570.719 516.813 593.84 54.5195 690.582"/></g></g><path id="path3417" style="fill:#133a73;fill-opacity:1;fill-rule:nonzero;stroke:none" d="m124.875 636.605c-4.523 34.333-36.0234 58.5-70.3555 53.977C20.1875 686.059-3.98047 654.559.542969 620.227 5.06641 585.895 36.5664 561.727 70.8984 566.25c34.3356 4.523 58.4996 36.023 53.9766 70.355"/><g id="g3419"><g clip-path="url(#clipPath3423)" id="g3421"><path id="path3433" style="fill:url(#linearGradient3427);fill-opacity:1;fill-rule:nonzero;stroke:none" d="m538.137 270.234 95.324 293.5-205.699-247.089"/></g></g><path id="path3435" style="fill:#4194d7;fill-opacity:1;fill-rule:nonzero;stroke:none" d="m541.352 289.715c-4.524 34.332-36.024 58.5-70.356 53.973-34.336-4.52-58.5-36.02-53.976-70.352 4.523-34.336 36.023-58.5 70.355-53.977 34.332 4.524 58.496 36.024 53.977 70.356"/><g id="g3437"><g clip-path="url(#clipPath3441)" id="g3439"><path id="path3451" style="fill:url(#linearGradient3445);fill-opacity:1;fill-rule:nonzero;stroke:none" d="M857.758 94.3906 656.035 546.801 745.172 53.6406"/></g></g><path id="path3453" style="fill:#b9d110;fill-opacity:1;fill-rule:nonzero;stroke:none" d="m846.91 110.883c-26.609 22.164-66.144 18.558-88.308-8.051-22.164-26.6132-18.559-66.1406 8.05-88.3125 26.61-22.16013 66.145-18.55075 88.309 8.0586 22.164 26.6016 18.559 66.1446-8.051 88.3049"/><g id="g3455"><g clip-path="url(#clipPath3459)" id="g3457"><path id="path3469" style="fill:url(#linearGradient3463);fill-opacity:1;fill-rule:nonzero;stroke:none" d="M481.316 864.746 635.938 602.125l-41.313 301.32"/></g></g><path id="path3471" style="fill:#b9d110;fill-opacity:1;fill-rule:nonzero;stroke:none" d="m491.863 848.059c26.203-22.645 65.797-19.758 88.442 6.441 22.64 26.203 19.758 65.797-6.446 88.441-26.199 22.645-65.796 19.758-88.437-6.445-22.645-26.199-19.762-65.797 6.441-88.437"/><g id="g3473"><g clip-path="url(#clipPath3477)" id="g3475"><path id="path3487" style="fill:url(#linearGradient3481);fill-opacity:1;fill-rule:nonzero;stroke:none" d="M1085.54 913.828 683.598 585.359l456.522 219.75"/></g></g><path id="path3489" style="fill:#22638b;fill-opacity:1;fill-rule:nonzero;stroke:none" d="m1050.12 855.145c2.26-34.555 32.1-60.743 66.66-58.485 34.55 2.254 60.74 32.098 58.48 66.653-2.25 34.554-32.09 60.742-66.65 58.484-34.56-2.254-60.74-32.098-58.49-66.652"/><g id="g3491"><g clip-path="url(#clipPath3495)" id="g3493"><path id="path3505" style="fill:url(#linearGradient3499);fill-opacity:1;fill-rule:nonzero;stroke:none" d="M1177.19 335.031 693.664 556.211 1106.69 235.887"/></g></g><path id="path3507" style="fill:#91d2e1;fill-opacity:1;fill-rule:nonzero;stroke:none" d="m1108.75 338.84c-29.47-18.176-38.63-56.805-20.46-86.281 18.18-29.477 56.81-38.637 86.29-20.461 29.47 18.179 38.63 56.808 20.45 86.285-18.17 29.476-56.8 38.637-86.28 20.457"/><g id="g3509"><g clip-path="url(#clipPath3513)" id="g3511"><path id="path3523" style="fill:url(#linearGradient3517);fill-opacity:1;fill-rule:nonzero;stroke:none" d="M209.754 773.73l382.32-187.417L280.926 872.391"/></g></g><path id="path3525" style="fill:#91d2e1;fill-opacity:1;fill-rule:nonzero;stroke:none" d="m278.168 769.453c29.598 17.977 39.02 56.543 21.043 86.145-17.977 29.597-56.543 39.019-86.145 21.043-29.597-17.977-39.019-56.543-21.043-86.141 17.977-29.602 56.543-39.023 86.145-21.047"/><path id="path3527" style="fill:#62b92c;fill-opacity:1;fill-rule:nonzero;stroke:none" d="m714.422 718.262c8.172-9.321 22.351-10.246 31.672-2.074 9.316 8.175 10.246 22.355 2.07 31.675-8.172 9.317-22.351 10.246-31.672 2.071-9.316-8.172-10.246-22.356-2.07-31.672"/><path id="path3529" style="fill:#62b92c;fill-opacity:1;fill-rule:nonzero;stroke:none" d="m827.305 484.969c8.175-9.321 22.355-10.25 31.672-2.074 9.32 8.171 10.25 22.355 2.074 31.671-8.172 9.321-22.356 10.247-31.672 2.075-9.32-8.176-10.246-22.356-2.074-31.672"/><path id="path3531" style="fill:#62b92c;fill-opacity:1;fill-rule:nonzero;stroke:none" d="m906.813 877.289c8.175-9.316 22.355-10.246 31.675-2.07 9.317 8.172 10.246 22.351 2.071 31.672-8.172 9.32-22.356 10.246-31.672 2.074-9.321-8.176-10.246-22.356-2.074-31.676"/><path id="path3533" style="fill:#62b92c;fill-opacity:1;fill-rule:nonzero;stroke:none" d="m987.531 166.984c8.172-9.32 22.359-10.246 31.669-2.074 9.32 8.176 10.25 22.356 2.08 31.676-8.18 9.316-22.358 10.242-31.678 2.07-9.317-8.176-10.247-22.355-2.071-31.672"/><path id="path3535" style="fill:#62b92c;fill-opacity:1;fill-rule:nonzero;stroke:none" d="m140.008 473.707c8.172-9.32 22.351-10.246 31.672-2.074 9.316 8.176 10.246 22.355 2.074 31.676-8.176 9.316-22.356 10.246-31.676 2.07-9.316-8.172-10.246-22.356-2.07-31.672"/><path id="path3537" style="fill:#62b92c;fill-opacity:1;fill-rule:nonzero;stroke:none" d="m609.063 315.641c8.171-9.321 22.355-10.246 31.671-2.075 9.321 8.176 10.246 22.356 2.075 31.676-8.176 9.317-22.356 10.246-31.676 2.071-9.317-8.172-10.246-22.352-2.07-31.672"/><path id="path3539" style="fill:#62b92c;fill-opacity:1;fill-rule:nonzero;stroke:none" d="m458.551 398.422c8.172-9.317 22.351-10.246 31.672-2.07 9.32 8.171 10.246 22.351 2.074 31.671-8.176 9.317-22.356 10.247-31.676 2.071-9.316-8.172-10.246-22.352-2.07-31.672"/><path id="path3541" style="fill:#133a73;fill-opacity:1;fill-rule:nonzero;stroke:none" d="m518.754 661.82c8.176-9.32 22.355-10.246 31.672-2.074 9.32 8.176 10.25 22.356 2.074 31.676-8.176 9.316-22.355 10.246-31.672 2.07-9.32-8.172-10.25-22.355-2.074-31.672"/><path id="path3543" style="fill:#133a73;fill-opacity:1;fill-rule:nonzero;stroke:none" d="m744.523 394.66c8.172-9.32 22.356-10.246 31.672-2.074 9.321 8.176 10.246 22.355 2.075 31.676-8.176 9.316-22.356 10.246-31.672 2.07-9.321-8.172-10.25-22.355-2.075-31.672"/><path id="path3545" style="fill:#133a73;fill-opacity:1;fill-rule:nonzero;stroke:none" d="m714.422 605.379c8.172-9.32 22.351-10.246 31.672-2.074 9.316 8.172 10.246 22.355 2.07 31.672-8.172 9.32-22.351 10.246-31.672 2.074-9.316-8.176-10.246-22.356-2.07-31.672"/><path id="path3547" style="fill:#133a73;fill-opacity:1;fill-rule:nonzero;stroke:none" d="m368.242 469.918c8.172-9.32 22.356-10.25 31.672-2.074 9.32 8.172 10.246 22.355 2.074 31.672-8.175 9.32-22.355 10.246-31.675 2.074-9.317-8.176-10.247-22.356-2.071-31.672"/><path id="path3549" style="fill:#4194d7;fill-opacity:1;fill-rule:nonzero;stroke:none" d="m633.461 620.176c8.172-9.317 22.355-10.246 31.672-2.071 9.32 8.172 10.246 22.356 2.074 31.672-8.176 9.321-22.355 10.246-31.676 2.075-9.316-8.176-10.246-22.356-2.07-31.676"/><path id="path3551" style="fill:#4194d7;fill-opacity:1;fill-rule:nonzero;stroke:none" d="m646.691 752.129c8.172-9.32 22.352-10.25 31.672-2.074 9.321 8.172 10.246 22.355 2.075 31.672-8.176 9.32-22.356 10.246-31.676 2.074-9.317-8.176-10.246-22.356-2.071-31.672"/><path id="path3553" style="fill:#4194d7;fill-opacity:1;fill-rule:nonzero;stroke:none" d="m819.777 334.453c8.176-9.316 22.356-10.246 31.676-2.07 9.317 8.172 10.246 22.351 2.07 31.672-8.171 9.32-22.351 10.246-31.671 2.074-9.321-8.176-10.247-22.356-2.075-31.676"/><path id="path3555" style="fill:#4194d7;fill-opacity:1;fill-rule:nonzero;stroke:none" d="m812.242 571.512c8.176-9.321 22.356-10.246 31.676-2.074 9.316 8.175 10.246 22.355 2.07 31.675-8.172 9.317-22.351 10.246-31.672 2.071-9.316-8.172-10.246-22.356-2.074-31.672"/><path id="path3557" style="fill:#4194d7;fill-opacity:1;fill-rule:nonzero;stroke:none" d="m382.156 392.988c8.172-9.316 22.356-10.246 31.672-2.07 9.32 8.172 10.246 22.355 2.074 31.672-8.175 9.32-22.355 10.246-31.672 2.074-9.32-8.176-10.25-22.355-2.074-31.676"/><path id="path3559" style="fill:#4194d7;fill-opacity:1;fill-rule:nonzero;stroke:none" d="m613.543 476.398c8.176-9.32 22.355-10.25 31.676-2.074 9.316 8.176 10.246 22.356 2.07 31.672-8.172 9.32-22.355 10.246-31.672 2.074-9.32-8.175-10.246-22.355-2.074-31.672"/><path id="path3561" style="fill:#4194d7;fill-opacity:1;fill-rule:nonzero;stroke:none" d="m435.969 645.902c8.172-9.32 22.351-10.246 31.672-2.074 9.32 8.176 10.246 22.356 2.074 31.676-8.176 9.316-22.356 10.246-31.676 2.07-9.316-8.172-10.246-22.355-2.07-31.672"/><path id="path3563" style="fill:#4194d7;fill-opacity:1;fill-rule:nonzero;stroke:none" d="m629.688 164.293c8.171-9.32 22.355-10.246 31.671-2.074 9.321 8.176 10.246 22.355 2.075 31.676-8.176 9.316-22.356 10.246-31.672 2.07-9.321-8.172-10.25-22.356-2.074-31.672"/><path id="path3565" style="fill:#b9d110;fill-opacity:1;fill-rule:nonzero;stroke:none" d="m499.398 462.395c12.329-1.301 23.379 7.632 24.684 19.96 1.305 12.325-7.633 23.375-19.961 24.68-12.324 1.305-23.375-7.633-24.68-19.957-1.304-12.328 7.633-23.379 19.957-24.683"/><path id="path3567" style="fill:#b9d110;fill-opacity:1;fill-rule:nonzero;stroke:none" d="m721.23 510.641c-12.3 1.527-23.511-7.207-25.039-19.508-1.527-12.301 7.207-23.512 19.508-25.039 12.301-1.528 23.512 7.207 25.039 19.508 1.528 12.3-7.207 23.507-19.508 25.039"/><path id="path3569" style="fill:#22638b;fill-opacity:1;fill-rule:nonzero;stroke:none" d="m594.34 420.676c-7.543 9.836-21.629 11.695-31.469 4.152-9.836-7.543-11.691-21.633-4.148-31.469s21.632-11.695 31.468-4.152 11.696 21.633 4.149 31.469"/><path id="path3571" style="fill:#22638b;fill-opacity:1;fill-rule:nonzero;stroke:none" d="m594.828 581.156c-7.543 9.836-21.633 11.696-31.469 4.153s-11.695-21.633-4.152-31.469c7.547-9.836 21.633-11.695 31.469-4.152 9.836 7.542 11.695 21.632 4.152 31.468"/><path id="path3573" style="fill:#91d2e1;fill-opacity:1;fill-rule:nonzero;stroke:none" d="m458.199 576.973c5.156 11.273.199 24.59-11.07 29.75-11.274 5.156-24.59.199-29.746-11.071-5.16-11.273-.203-24.589 11.066-29.75 11.274-5.156 24.594-.199 29.75 11.071"/><path id="path3575" style="fill:#91d2e1;fill-opacity:1;fill-rule:nonzero;stroke:none" d="m635.691 569.449c-5.234-11.234-.367-24.59 10.868-29.82 11.238-5.234 24.589-.371 29.824 10.867 5.234 11.234.367 24.586-10.867 29.82-11.239 5.235-24.59.372-29.825-10.867"/></g></g></svg></span><span class="text-uppercase font-weight-bold"></span></a></div><div class=ml-auto><button type=button class="navbar-toggler third-button collapsed" data-toggle=collapse data-target=#menu_items aria-expanded=false aria-controls=navbar><div class=animated-icon><span></span><span></span><span></span></div></button></div><div id=menu_items class="navbar-collapse collapse ml-md-auto justify-content-end text-center"><ul class="nav navbar-nav"><li class="nav-item p-0"><a class=nav-link href=../../../><span>Home</span></a></li><li class="nav-item p-0"><a class=nav-link href=../../../blog/><span>Blog</span></a></li><li class="nav-item p-0"><a class=nav-link href=../../../#features><span>Features</span></a></li><li class="nav-item p-0"><a class=nav-link href=../../../#contributing><span>Contribute</span></a></li><li class="nav-item p-0"><a class=nav-link href=../../../docs/><span>Docs</span></a></li><li class="nav-item p-0"><a class=nav-link href=https://github.com/vmware/photon target=_blank><span>Github</span></a></li><div class="navbar-nav dropdown border-0"><li class=nav-item><a class="nav-link dropdown-toggle" href=# id=navbarDropdown role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false>Release</a><div class=dropdown-menu aria-labelledby=navbarDropdownMenuLink><a class=dropdown-item href=../../../docs/>v4 - Latest</a>
<a class=dropdown-item href=../../../docs-v3/>v3</a>
<a class=dropdown-item href=../../../assets/files/html/3.0/>v3 (old)</a>
<a class=dropdown-item href=../../../assets/files/html/1.0-2.0/>v2 and v1</a></div></li></div></ul></div></nav></div></header><div class="container-fluid td-outer"><div class=td-main><div class="row flex-xl-nowrap"><div class="col-12 col-md-3 col-xl-2 td-sidebar d-print-none"></div><div class="d-none d-xl-block col-xl-2 td-toc d-print-none"></div><main class="col-12 col-md-9 col-xl-8 pl-md-5" role=main><div class=td-content><div class="pageinfo pageinfo-primary d-print-none"><p>This the multi-page printable view of this section.
<a href=# onclick="return print(),!1">Click here to print</a>.</p><p><a href=../../../docs/troubleshooting-guide/>Return to the regular view of this page</a>.</p></div><h1 class=title>Troubleshooting Guide</h1><ul><li>1: <a href=#pg-d1a2c64570ea618afcac34853d3591b8>Introduction</a></li><ul><li>1.1: <a href=#pg-0c24d695daaa503ab5b136189f98b352>Systemd and TDNF</a></li><li>1.2: <a href=#pg-c51d8fa43bbff78136c63ead3844946b>The Root Account and the `sudo` and `su` Commands</a></li><li>1.3: <a href=#pg-5160821fa4b3d287aa428b4db0b0377e>Checking the Version and Build Number</a></li><li>1.4: <a href=#pg-24401492a50648e7339365977f2b076b>General Best Practices</a></li><li>1.5: <a href=#pg-c4fee82bb026acdb479d18f12f8cadfd>Photon OS Logs</a></li><li>1.6: <a href=#pg-dd1666053f4fa67749224c02b1c8be5a>Troubleshooting Progression</a></li></ul><li>2: <a href=#pg-f1d4a7ec328436687337c431d2f92fe7>Solutions to Common Problems</a></li><ul><li>2.1: <a href=#pg-1f1ad9ca2f9874120dd824aae9b7fb29>Boot in Emergency Mode</a></li><li>2.2: <a href=#pg-3b774a1d8adcb06d7ddc820bab2163c4>Resetting a Lost Root Password</a></li><li>2.3: <a href=#pg-ac6ea7a2ae283997a41310a5017afebf>Fixing Permissions on Network Config Files</a></li><li>2.4: <a href=#pg-dcc310ada5d14b412cd7a0a3b235f5a9>Permitting Root Login with SSH</a></li><li>2.5: <a href=#pg-70929a5c761504aaa356aca81dcf5de7>Fixing Sendmail</a></li></ul><li>3: <a href=#pg-12ed3b235a2c62adb1a16a7644accee1>Photon OS General Troubleshooting</a></li><ul><li>3.1: <a href=#pg-664cc9cec9a044cfca15b926a17dd983>Photon Code</a></li><li>3.2: <a href=#pg-5404bf48493f97cd2de8f602f761fc79>Package Management</a></li><li>3.3: <a href=#pg-ff9fc3434cbe8db979342d9736dbfeb6>Network Configuration</a></li><li>3.4: <a href=#pg-51e16a96644c046ffe6a824b4489b09d>Cloud-init</a></li><li>3.5: <a href=#pg-bc1ceb0533f29196c7d5f82d8eea575e>Open-vm-tools/Vmtoolsd</a></li></ul><li>4: <a href=#pg-d65d5ffc0a2bedf288766d2b9faf15ce>Troubleshooting Tools</a></li><ul><li>4.1: <a href=#pg-04a89d7f32cd8174c5a820a6ee655974>Common Tools</a></li><li>4.2: <a href=#pg-f13d060552ebaf87170062c96f0cb71b>Troubleshooting Tools Installed by Default</a></li><li>4.3: <a href=#pg-8541e2426271c83233d26031263d756e>Installing Tools from Repositories</a></li><li>4.4: <a href=#pg-3dc35a0dd7f3bbf95344f20fea8d9dc4>Linux Troubleshooting Tools</a></li></ul><li>5: <a href=#pg-e6dc8e85bd84cbb48db5ca550e3adf9c>Systemd</a></li><ul><li>5.1: <a href=#pg-45a60780101b99e8a21a9620bfe7ca73>Enabling 'systemd' Debug Shell During Boot</a></li><li>5.2: <a href=#pg-2222dbb3d5c5a8cb432250b8b95f41ff>Troubleshooting Services With 'systemctl'</a></li><li>5.3: <a href=#pg-37ee182b89ad2f34aa7aafa527b6186b>Analyzing System Logs with 'journalctl'</a></li><li>5.4: <a href=#pg-a3e35c7adc2aa5828f3d0a03d03c0bf3>Inspecting Services with 'systemd-analyze'</a></li><li>5.5: <a href=#pg-21502ba89b3fba5480b548821dfd1e69>Inspecting Services with 'systemd-analyze'</a></li></ul><li>6: <a href=#pg-641b474d7b8d4100941d5a2750526038>Network Troubleshooting</a></li><ul><li>6.1: <a href=#pg-7443880a71f96c7150bcd520d1ab0dd2>Managing the Network Configuration</a></li><li>6.2: <a href=#pg-86f4c5c53619c0832267e20fef9c5119>Inspecting IP Addresses</a></li><li>6.3: <a href=#pg-7bdf729c29d245264a8c0847b910259e>Inspecting the Status of Network Links with 'networkctl'</a></li><li>6.4: <a href=#pg-ead329f4a50d05b1e092b3096d4f90b4>Network Debugging</a></li><li>6.5: <a href=#pg-6c30537e08221469979d45c47f7dc8c4>Checking Firewall Rules</a></li><li>6.6: <a href=#pg-46e6e1e0a8903d55cdd88d1f424ce291>Inspect Network Settings with 'netmgr'</a></li></ul><li>7: <a href=#pg-9bc167ac28d85c2f0972b58d26097676>File System Troubleshooting</a></li><ul><li>7.1: <a href=#pg-47439fb3c02145fdc25f8c11bf0b5e3f>Checking Disk Space</a></li><li>7.2: <a href=#pg-abc971fcad72a9dad157e05c66304fb6>Adding a Disk and Partitioning It</a></li><li>7.3: <a href=#pg-4a539020bc72ef2270f43ba0b05f0192>Expanding Disk Partition</a></li><li>7.4: <a href=#pg-3affa41adcd49c9555f8960c2615e3aa>List Disk Partitions with 'fdisk'</a></li><li>7.5: <a href=#pg-497391c40467e0c63cef258c129588cd>File System Consistency Check Tool</a></li><li>7.6: <a href=#pg-0d8a66f1aaaa1d930b395e737a470b71>Fixing File System Errors When fsck Fails</a></li></ul><li>8: <a href=#pg-45fccef9bd97bc1ac84237b20daca982>Troubleshooting Packages</a></li><li>9: <a href=#pg-249cb7133f08d5ee19182ae009f48b92>Kernel Problems and Boot and Login Errors</a></li><ul><li>9.1: <a href=#pg-fb6a01033307d1364f3304460e9609eb>Kernel Overview</a></li><li>9.2: <a href=#pg-1bc1d49db5f317bcf9d37ee4fbc9e850>Boot Process Overview</a></li><li>9.3: <a href=#pg-d493e733f13166e75be33c14d5041e24>Blank Screen on Reboot</a></li><li>9.4: <a href=#pg-acbad8eeeb152ca4b47202019d5e6fbc>Investigating Unexpected Behavior</a></li><li>9.5: <a href=#pg-0e252e3664ed9f5e850a0bbbc6d40b21>Investigating the Guest Kernel</a></li><li>9.6: <a href=#pg-daeaab5c036a9bfeb7dc2da74aa8256a>Kernel Log Replication with VProbes</a></li><li>9.7: <a href=#pg-f8bffb3e220b96d1c691fab6b2f4b171>Linux Kernel</a></li></ul><li>10: <a href=#pg-db6c8d892731b711d7d08232c88d660e>Performance Issues</a></li><ul><li>10.1: <a href=#pg-d7dfe1c13df4b2c19bc5a19455b7c5c6>General Performance Guidelines</a></li><li>10.2: <a href=#pg-0be0e0ec49fb47fcbab6983167f5f866>Throughput Performance</a></li></ul></ul><div class=content><p>The Photon OS <em>Troubleshooting Guide</em> provides solutions for common problems that you might encounter while using Photon OS.</p><p><strong>Product version: 4.0</strong></p><p>This documentation applies to all 4.0.x releases.</p><h2 id=intended-audiences>Intended Audiences</h2><p>This information is intended for Photon OS administrators who install and set up Photon OS.</p></div></div><div class=td-content><h1 id=pg-d1a2c64570ea618afcac34853d3591b8>1 - Introduction</h1><p>The <em>Troubleshooting Guide</em> covers the basics of troubleshooting systemd, packages, network interfaces, services such as SSH and Sendmail, the file system, and the Linux kernel. The guide also includes information about the tools that you can use for troubleshooting with examples, how to access the logs, and best practices.</p></div><div class=td-content><h1 id=pg-0c24d695daaa503ab5b136189f98b352>1.1 - Systemd and TDNF</h1><p>By using systemd, Photon OS adopts a contemporary Linux standard to bootstrap the user space and concurrently start services, an architecture that differs from traditional Linux systems such as SUSE Linux Enterprise Server 11.</p><p>A traditional Linux system contains an initialization system called SysVinit. With SLES 11, for instance, SysVinit-style init programs control how the system starts up and shuts down. Init implements system runlevels. A SysVinit runlevel defines a state in which a process or service runs. In contrast to a SysVinit system, systemd defines no such runlevels. Instead, systemd uses a dependency tree of <em>targets</em> to determine which services to start when.</p><p>Because the systemd commands differ from those of an init.d-based Linux system, a section later in this guide illustrates how to troubleshoot by using systemctl commands instead of init.d-style commands.</p><p>Tdnf keeps the operating system as small as possible while preserving yum&rsquo;s robust package-management capabilities. On Photon OS, tdnf is the default package manager for installing new packages. Since troubleshooting with tdnf differs from using yum, a later section of this guide describes how to solve problems with packages and repositories by using tdnf commands.</p></div><div class=td-content style=page-break-before:always><h1 id=pg-c51d8fa43bbff78136c63ead3844946b>1.2 - The Root Account and the `sudo` and `su` Commands</h1><p>The <em>Troubleshooting Guide</em> assumes that you are logged in to Photon OS with the root account and running commands as root. The <code>sudo</code> program comes with the full version of Photon OS. On the minimal version, you must install <code>sudo</code> with tdnf if you want to use it. As an alternative to installing <code>sudo</code> on the minimal version, you can switch users as needed with the <code>su</code> command to run commands that require root privileges.</p></div><div class=td-content style=page-break-before:always><h1 id=pg-5160821fa4b3d287aa428b4db0b0377e>1.3 - Checking the Version and Build Number</h1><p>To check the version and build number of Photon OS, concatenate <code>/etc/photon-release</code>.</p><p>Example:</p><pre><code>cat /etc/photon-release
VMware Photon Linux 1.0
PHOTON_BUILD_NUMBER=a6f0f63
</code></pre><p>The build number in the results maps to the commit number on the VMware Photon OS GitHub <a href=https://github.com/vmware/photon/commits/master>commits page</a>.</p></div><div class=td-content style=page-break-before:always><h1 id=pg-24401492a50648e7339365977f2b076b>1.4 - General Best Practices</h1><p>When troubleshooting, it is recommended that you follow some general best practices:</p><ul><li><p><strong>Take a snapshot.</strong> Before you do anything to a virtual machine running Photon OS, take a snapshot of the VM so that you can restore it if need be.</p></li><li><p><strong>Make a backup copy.</strong> Before you change a configuration file, make a copy of the original file. For example: <code>cp /etc/tdnf/tdnf.conf /etc/tdnf/tdnf.conf.orig</code></p></li><li><p><strong>Collect logs.</strong> Save the log files associated with a Photon OS problem. Include not only the log files on the guest but also the <code>vmware.log</code> file on the host. The <code>vmware.log</code> file is in the host&rsquo;s directory that contains the VM.</p></li><li><p><strong>Know what is in your toolbox.</strong> View the man page for a tool before you use it so that you know what your options are. The options can help focus the command&rsquo;s output on the problem you&rsquo;re trying to solve.</p></li><li><p><strong>Understand the system.</strong> The more you know about the operating system and how it works, the better you can troubleshoot.</p></li></ul></div><div class=td-content style=page-break-before:always><h1 id=pg-c4fee82bb026acdb479d18f12f8cadfd>1.5 - Photon OS Logs</h1><p>On Photon OS, all the system logs except the installation logs and the cloud-init logs are written into the systemd journal. The <code>journalctl</code> command queries the contents of the systemd journal.</p><p>The installation log files and the cloud-init log files reside in <code>/var/log</code>. If Photon OS is running on a virtual machine in a VMware hypervisor, the log file for the VMware tools, <code>vmware-vmsvc.log</code>, also resides in <code>/var/log</code>.</p><p>##Journalctl
Journalctl is a utility to query and display logs from journald and systemd’s logging service. Since journald stores log data in a binary format instead of a plain text format, <code>journalctl</code> is the standard way of reading log messages processed by journald.</p><p>Journald is a service provided by systemd. To see the staus of the daemon, run the following commands:</p><pre><code># systemctl status systemd-journald
● systemd-journald.service - Journal Service
Loaded: loaded (/lib/systemd/system/systemd-journald.service; static; vendor preset: enabled)
Active: active (running) since Tue 2020-04-07 14:33:41 CST; 2 days ago
Docs: man:systemd-journald.service(8)
man:journald.conf(5)
Main PID: 943 (systemd-journal)
Status: &quot;Processing requests...&quot;
Tasks: 1 (limit: 4915)
Memory: 18.0M
CGroup: /system.slice/systemd-journald.service
└─943 /lib/systemd/systemd-journald



Apr 07 14:33:41 photon-4a0e7f2307d4 systemd-journald[943]: Journal started
Apr 07 14:33:41 photon-4a0e7f2307d4 systemd-journald[943]: Runtime journal (/run/log/journal/b8cebc61a6cb446a968ee1d4c5bbbbd5) is 8.0M, max 1.5G, 1.5G free.
Apr 07 14:33:41 photon-4a0e7f2307d4 systemd-journald[943]: Time spent on flushing to /var is 88.263ms for 1455 entries.
Apr 07 14:33:41 photon-4a0e7f2307d4 systemd-journald[943]: System journal (/var/log/journal/b8cebc61a6cb446a968ee1d4c5bbbbd5) is 40.0M, max 4.0G, 3.9G free.
root@photon-4a0e7f2307d4 [ ~ ]#
</code></pre><p>The following command are related to <code>journalctl</code>:</p><ul><li><code>journalctl</code> : This command displays all the logs after the system has booted up. <code>journalctl</code> splits the results into pages, similar to the <code>less</code> command in Linux. You can navigate using the arrow keys, the Page Up, Page Down keys or the Space bar. To quit navigation, press the <strong>q</strong> key.</li><li><code>journalctl -b</code> : This command displays the logs for the current boot.</li></ul><p>The following commands pull logs based on a time range:</p><ul><li><code>journalctl --since "1 hour ago"</code> : This command displays the journal logs from the past 1 hour.</li><li><code>journalctl --since "2 days ago"</code> : This command displays the logs generated in the past 2 days.</li><li><code>journalctl --since "2020-03-25 00:00:00" --until "2020-04-09 00:00:00"</code> : This command displays the logs generated between the mentioned time frame.</li></ul><p>To traverse for logs in the reverse order, run the following command:</p><ul><li><code>journalctl -r</code> : This command displays the logs in reverse order.</li></ul><p><strong>Note</strong>: If you add <code>-r</code> at the end of a command, the logs are displayed in the reverse order. For example: <code>journalctl -u unit.service -r</code></p><p>To pull logs related to a particular daemon, run the following command:</p><ul><li><code>journalctl -u unit.service</code> : This command displays logs for a specific service. mention the name of the service instead of <code>unit</code>. This command helps when a service is not behaving properly or when there are crash/core dumps.</li></ul><p>To see Journal logs by their priority, run the following command:</p><ul><li><code>journalctl -p "emerg".."crit</code> : This command displays logs <strong>emerg</strong> to <strong>critical</strong>. For example: core dumps.</li></ul><p>Journalctl can print log messages to the console as they are added, like the Linux <code>tail</code> command. Add the <code>-f</code> switch to follow a specific service or daemon.</p><pre><code>journalctl -u unit.service -f
</code></pre><p>To list the boots of the system, run the following command:</p><pre><code>journalctl --list-boots
</code></pre><p>You can maintain the journalctl logs manually, by running the following <code>vacuum</code> commands:</p><ul><li><code>journalctl --vacuum-time=2d</code> : This command retains the logs from the last 2 days.</li><li><code>journalctl --vacuum-size=500M</code> : This command helps retain logs with a maximum size of 500 MB.</li></ul><p>You can configure Journald using the conf file located at <strong>/etc/systemd/journald.conf</strong>. Run the following command to configure the file:</p><pre><code class=language-console data-lang=console># cat /etc/systemd/journald.conf
</code></pre><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ini data-lang=ini><span style=color:#8f5902;font-style:italic># This file is part of systemd.</span>
<span style=color:#8f5902;font-style:italic>#</span>
<span style=color:#8f5902;font-style:italic># systemd is free software; you can redistribute it and/or modify it</span>
<span style=color:#8f5902;font-style:italic># under the terms of the GNU Lesser General Public License as published by</span>
<span style=color:#8f5902;font-style:italic># the Free Software Foundation; either version 2.1 of the License, or</span>
<span style=color:#8f5902;font-style:italic># (at your option) any later version.</span>
<span style=color:#8f5902;font-style:italic>#</span>
<span style=color:#8f5902;font-style:italic># Entries in this file show the compile time defaults.</span>
<span style=color:#8f5902;font-style:italic># You can change settings by editing this file.</span>
<span style=color:#8f5902;font-style:italic># Defaults can be restored by simply deleting this file.</span>
<span style=color:#8f5902;font-style:italic>#</span>
<span style=color:#8f5902;font-style:italic># See journald.conf(5) for details.</span>

<span style=color:#204a87;font-weight:700>[Journal]</span>
<span style=color:#8f5902;font-style:italic>#Storage=auto</span>
<span style=color:#8f5902;font-style:italic>#Compress=yes</span>
<span style=color:#8f5902;font-style:italic>#Seal=yes</span>
<span style=color:#8f5902;font-style:italic>#SplitMode=uid</span>
<span style=color:#8f5902;font-style:italic>#SyncIntervalSec=5m</span>
<span style=color:#8f5902;font-style:italic>#RateLimitIntervalSec=30s</span>
<span style=color:#8f5902;font-style:italic>#RateLimitBurst=10000</span>
<span style=color:#8f5902;font-style:italic>#SystemMaxUse=</span>
<span style=color:#8f5902;font-style:italic>#SystemKeepFree=</span>
<span style=color:#8f5902;font-style:italic>#SystemMaxFileSize=</span>
<span style=color:#8f5902;font-style:italic>#SystemMaxFiles=100</span>
<span style=color:#8f5902;font-style:italic>#RuntimeMaxUse=</span>
<span style=color:#8f5902;font-style:italic>#RuntimeKeepFree=</span>
<span style=color:#8f5902;font-style:italic>#RuntimeMaxFileSize=</span>
<span style=color:#8f5902;font-style:italic>#RuntimeMaxFiles=100</span>
<span style=color:#8f5902;font-style:italic>#MaxRetentionSec=</span>
<span style=color:#8f5902;font-style:italic>#MaxFileSec=1month</span>
<span style=color:#8f5902;font-style:italic>#ForwardToSyslog=no</span>
<span style=color:#8f5902;font-style:italic>#ForwardToKMsg=no</span>
<span style=color:#8f5902;font-style:italic>#ForwardToConsole=no</span>
<span style=color:#8f5902;font-style:italic>#ForwardToWall=yes</span>
<span style=color:#8f5902;font-style:italic>#TTYPath=/dev/console</span>
<span style=color:#8f5902;font-style:italic>#MaxLevelStore=debug</span>
<span style=color:#8f5902;font-style:italic>#MaxLevelSyslog=debug</span>
<span style=color:#8f5902;font-style:italic>#MaxLevelKMsg=notice</span>
<span style=color:#8f5902;font-style:italic>#MaxLevelConsole=info</span>
<span style=color:#8f5902;font-style:italic>#MaxLevelWall=emerg</span>
<span style=color:#8f5902;font-style:italic>#LineMax=48K</span>
<span style=color:#c4a000>root@photon-4a0e7f2307d4 [ ~ ]#</span>
</code></pre></div><p>By default <code>rotate</code> is disabled in Photon. Once the changes are made to the conf file, for the changes to take effect you must restart the systemd-journald by running the <code>systemctl restart systemd-journald</code> command.</p><h2 id=cloud-init-logs>Cloud-init Logs</h2><p>Cloud-init is the industry standard multi-distribution method for cross-platform cloud instance initialisation.</p><p>If there are with the Cloud-init behaviour, we can debug them by looking at the logs. Run the following command to look at Cloud-init logs:</p><pre><code class=language-console data-lang=console>journalctl -u cloud-init
</code></pre><p>For better understanding/debugging, You can also look at logs from the following locations:</p><ul><li><strong>/var/log/cloud-init.log</strong> : This log contains information from each stage of Cloud-init.</li><li><strong>/var/log/cloud-init-output.log</strong> : This log contains errors, warnings, etc..</li></ul><h2 id=syslog>Syslog</h2><p>Syslog is the general standard for logging system and program messages in the Linux environment.</p><p>Photon provides the following two packages to support syslog:</p><ul><li><strong>syslog-ng</strong> : syslog-ng is syslog with some advanced next gen features. It supports TLS encryption, TCP for transport with other existing features. Configurations can be added to the <code>/etc/syslog-ng/syslog-ng.conf</code> file.</li><li><strong>rsyslog</strong> : The official RSYSLOG website defines the utility as &ldquo;the rocket-fast system for log processing&rdquo;. rsyslog supports some advanced features like relp, imfile, omfile, gnutls protocols. Configurations can be added to the <code>/etc/rsyslog.conf</code> file. You can configure the required TLS certificates by editing the conf file.</li></ul><h2 id=logs-for-rpms-on-photon>Logs for RPMS on Photon</h2><p>Logs for a particular RPM can be checked in the following ways:</p><ul><li>If the RPM provides a daemon, we can see the status of daemon by running <code>systemctl</code> command and check logs using <code>journactl -u &lt;service name></code> command.</li><li>For additional logs, check if a conf file is provided by the RPM by running the <code>rpm -ql &lt;rpm name> | grep conf</code> command and find the file path of the log file. You can also check the <strong>/var/log</strong> folder.</li></ul></div><div class=td-content style=page-break-before:always><h1 id=pg-dd1666053f4fa67749224c02b1c8be5a>1.6 - Troubleshooting Progression</h1><p>If you encounter a problem running an application or appliance on Photon OS and you suspect it involves the operating system, you can troubleshoot by proceeding as follows.</p><ol><li><p>Check the services running on Photon OS:</p><p><code>systemctl status</code></p></li><li><p>Check your application log files for errors. For VMware applications, see <a href="https://kb.vmware.com/selfservice/microsites/search.do?language=en_US&cmd=displayKC&externalId=1021806">Location of Log Files for VMware Products</a>.)</p></li><li><p>Check the service controller or service monitor for your application or appliance.</p></li><li><p>Check the network interfaces and other aspects of the network service with <code>systemd-network</code> commands.</p></li><li><p>Check the operating system log files:</p><p><code>journalctl</code></p><p>Next, run the following commands to view all services according to the order in which they were started:</p><p><code>systemd-analyze critical-chain</code></p></li><li><p>Use the troubleshooting tool that you think is most likely to help with the issue at hand. For example, use <code>strace</code> to identify the location of the failure.</p></li></ol></div><div class=td-content style=page-break-before:always><h1 id=pg-f1d4a7ec328436687337c431d2f92fe7>2 - Solutions to Common Problems</h1><p>This section describes solutions to problems that you might encounter when using or managing Photon OS.</p></div><div class=td-content><h1 id=pg-1f1ad9ca2f9874120dd824aae9b7fb29>2.1 - Boot in Emergency Mode</h1><p>If you encounter problems during normal boot, you can boot in Emergency Mode.</p><p>Perform the following steps to boot in Emergency Mode:</p><ol><li><p>Restart the Photon OS machine or the virtual machine running Photon OS.</p><p>When the Photon OS splash screen appears, as it restarts, type the letter <code>e</code> quickly.</p></li><li><p>Append <code>emergency</code> to the kernel command line.</p></li><li><p>Press <code>F10</code> to proceed with the boot.</p></li><li><p>At the command prompt, provide the root password to log in to Emergency Mode.</p><p>By default, <code>/</code> is mounted as read-only.</p><p>To make modifications, run the following command to remount with write access:</p><p><code>mount -o remount,rw /</code></p></li></ol></div><div class=td-content style=page-break-before:always><h1 id=pg-3b774a1d8adcb06d7ddc820bab2163c4>2.2 - Resetting a Lost Root Password</h1><p>Perform the following steps to rest a lost password:</p><ol><li><p>Restart the Photon OS machine or the virtual machine running Photon OS.</p><p>When the Photon OS splash screen appears as it restarts, type the letter <code>e</code> to go to the GNU GRUB edit menu quickly. Because Photon OS reboots so quickly, you won&rsquo;t have much time to type <code>e</code>. Remember that in vSphere and Workstation, you might have to give the console focus by clicking in its window before it will register input from the keyboard.</p></li></ol><p>Second, in the GNU GRUB edit menu, go to the end of the line that starts with <code>linux</code>, add a space, and then add the following code exactly as it appears below:</p><pre><code>rw init=/bin/bash
</code></pre><p>After you add this code, the GNU GRUB edit menu should look exactly like this:</p><p><img src=../../../docs/images/grub-edit-menu-changepw.png alt="The modified GNU GRUB edit menu"></p><p>Now type <code>F10</code>.</p><p>At the command prompt, type <code>passwd</code> and then type (and re-enter) a new root password that conforms to the password complexity rules of Photon OS. Remember the password.</p><p>Next, type the following command:</p><pre><code>umount /
</code></pre><p>Finally, type the following command. You must include the <code>-f</code> option to force a reboot; otherwise, the kernel enters a state of panic.</p><pre><code>reboot -f
</code></pre><p>This sequence of commands should look like this:</p><p><img src=../../../docs/images/resetpw.png alt="The series of commands to reset the root password"></p><p>After the Photon OS machine reboots, log in with the new root password.</p><h2 id=resetting-the-failed-logon-count>Resetting the failed logon count</h2><p>Resetting the root password will not reset the failed logon count, if you&rsquo;ve had to many failed attempts, you may not be able to logon after resetting the password.</p><p>You will know if this is the case, if you see <code>Account locked due to X failed logins</code> at the photon console.</p><p>To reset the count, before you unmount the filesystem, run the following&mldr;</p><pre><code>/sbin/pam_tally2 --reset --user root
</code></pre></div><div class=td-content style=page-break-before:always><h1 id=pg-ac6ea7a2ae283997a41310a5017afebf>2.3 - Fixing Permissions on Network Config Files</h1><p>When you create a new network configuration file as root user, the network service might be unable to process it until you set the file mode bits (i.e. <code>chmod</code>) to <code>644</code>.</p><p>If you query the journal with <code>journalctl -u systemd-networkd</code>, you might see the following error message along with an indication that the network service did not start:</p><p><code>could not load configuration files. permission denied</code></p><p>The permissions on the network files might cause this problem. Without the correct permissions, <code>networkd-systemd</code> cannot parse and apply the settings, and the network configuration that you created will not be loaded.</p><p>After you create a network configuration file with a <code>.network</code> extension, you must run the <code>chmod</code> command to set the new file&rsquo;s mode bits to <code>644</code>. Example:</p><p><code>chmod 644 10-static-en.network</code></p><p>For Photon OS to apply the new configuration, you must restart the <code>systemd-networkd</code> service by running the following command:</p><p><code>systemctl restart systemd-networkd</code></p></div><div class=td-content style=page-break-before:always><h1 id=pg-dcc310ada5d14b412cd7a0a3b235f5a9>2.4 - Permitting Root Login with SSH</h1><p>The full version of Photon OS prevents root login with SSH by default. To permit root login over SSH, open <code>/etc/ssh/sshd_config</code> with the vim text editor and set <code>PermitRootLogin</code> to <code>yes</code>.</p><p>Vim is the default text editor available in Photon OS. The developer version also contains Nano. After you modify the SSH daemon&rsquo;s configuration file, you must restart the sshd daemon for the changes to take effect.</p><p>Example:</p><pre><code class=language-console data-lang=console>vim /etc/ssh/sshd_config
</code></pre><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ini data-lang=ini><span style=color:#8f5902;font-style:italic># override default of no subsystems</span>
<span style=color:#c4a000>Subsystem       sftp    /usr/libexec/sftp-server</span>

<span style=color:#8f5902;font-style:italic># Example of overriding settings on a per-user basis</span>
<span style=color:#8f5902;font-style:italic>#Match User anoncvs</span>
<span style=color:#8f5902;font-style:italic>#       X11Forwarding no</span>
<span style=color:#8f5902;font-style:italic>#       AllowTcpForwarding no</span>
<span style=color:#8f5902;font-style:italic>#       PermitTTY no</span>
<span style=color:#8f5902;font-style:italic>#       ForceCommand cvs server</span>
<span style=color:#c4a000>PermitRootLogin yes</span>
<span style=color:#c4a000>UsePAM yes</span>
</code></pre></div><p>Save your changes in vim and then restart the sshd daemon:</p><pre><code class=language-console data-lang=console>systemctl restart sshd
</code></pre><p>You can then connect to the Photon OS machine with the root account over SSH:</p><pre><code class=language-console data-lang=console>user@ubuntu:~$ ssh root@10.0.0.131
</code></pre></div><div class=td-content style=page-break-before:always><h1 id=pg-70929a5c761504aaa356aca81dcf5de7>2.5 - Fixing Sendmail</h1><p>If Sendmail is not behaving as expected or hangs during installation, it might be because FQDN is not set.</p><p>Perform the following steps:</p><ol><li><p>Set an FQDN for your Photon OS machine.</p></li><li><p>Run the following commands in the order below:</p><pre><code>echo $(hostname -f) &gt; /etc/mail/local-host-names

    cat &gt; /etc/mail/aliases &lt;&lt; &quot;EOF&quot;
        postmaster: root
        MAILER-DAEMON: root
        EOF

    /bin/newaliases

    cd /etc/mail

    m4 m4/cf.m4 sendmail.mc &gt; sendmail.cf

    chmod 700 /var/spool/clientmqueue

    chown smmsp:smmsp /var/spool/clientmqueue
</code></pre></li></ol></div><div class=td-content style=page-break-before:always><h1 id=pg-12ed3b235a2c62adb1a16a7644accee1>3 - Photon OS General Troubleshooting</h1><p>The section includes general troubleshooting instruction for Photon OS.</p></div><div class=td-content><h1 id=pg-664cc9cec9a044cfca15b926a17dd983>3.1 - Photon Code</h1><p>Photon is an RPM based Linux distribution similar to variants like CentOS and Fedora. With RPM based distributions granular updates as opposed to updating the whole OS image is possible.</p><p>##SPEC File
The &ldquo;Recipe&rdquo; for creating an RPM package is a spec file. The Photon code base&rsquo;s <strong>SPECS</strong> folder hast the following directory structure:</p><pre><code>SourceRoot

       SPECS
            linux
                patch1
                patch2
                linux.spec
</code></pre><h2 id=check-if-a-package-is-signed>Check if a package is signed</h2><p>Run the following commands to check if the package is signed:</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=color:#8f5902;font-style:italic>#check if a package is signed</span>
rpm -q linux --qf <span style=color:#4e9a06>&#39;%{NAME}-%{VERSION}-%{RELEASE} %{SIGPGP:pgpsig} %{SIGGPG:pgpsig}\n&#39;</span>
linux-4.19.79-2.ph3 RSA/SHA1, Thu <span style=color:#0000cf;font-weight:700>31</span> Oct <span style=color:#0000cf;font-weight:700>2019</span> 10:05:05 AM UTC, Key ID c0b5e0ab66fd4949 <span style=color:#ce5c00;font-weight:700>(</span>none<span style=color:#ce5c00;font-weight:700>)</span>
 
<span style=color:#8f5902;font-style:italic>#or</span>
rpm -qi linux <span style=color:#000;font-weight:700>|</span> grep <span style=color:#4e9a06>&#34;Signature&#34;</span>
Signature   : RSA/SHA1, Thu <span style=color:#0000cf;font-weight:700>31</span> Oct <span style=color:#0000cf;font-weight:700>2019</span> 10:05:05 AM UTC, Key ID c0b5e0ab66fd4949
 
<span style=color:#8f5902;font-style:italic>#Last 8 chars of Key ID: 66fd4949</span>
<span style=color:#8f5902;font-style:italic>#See if it matches the version of any of the gpg keys installed.</span>
rpm -qa <span style=color:#000;font-weight:700>|</span> grep gpg-pubkey <span style=color:#000;font-weight:700>|</span> xargs -n1 rpm -q --queryformat <span style=color:#4e9a06>&#34;%{NAME} %{VERSION} %{PACKAGER}\n&#34;</span>
gpg-pubkey 66fd4949 VMware, Inc. -- Linux Packaging Key -- linux-packages@vmware.com
gpg-pubkey 3e1ba8d5 Google Cloud Packages RPM Signing Key gc-team@google.com
</code></pre></div><h2 id=check-if-an-image-has-vulnerabilities>Check if an image has vulnerabilities</h2><p>Use the security scanners to find security issues. Alternatively The <code>tdnf updateinfo info</code> command displays all the applicable security updates the host needs.</p><h2 id=check-if-a-cve-is-fixed>Check if a CVE is Fixed</h2><p>The Photon team fixes vulnerabilities and publishes advisories to <a href=https://github.com/vmware/photon/wiki/Security-Advisories>https://github.com/vmware/photon/wiki/Security-Advisories</a>.</p><h2 id=to-check-if-security-updates-are-available>To Check if Security Updates are Available</h2><p>Use the <code>tdnf updateinfo info</code>, <code>tdnf update --security</code> or <code>tdnf update ---sec-severity &lt;level></code> commands to check if security updates are available. For example:</p><p>Check if there are any security updates</p><pre><code class=language-console data-lang=console>root@photon [ ~ ]# tdnf updateinfo
70 Security notice(s)
</code></pre><p>Check if there are security updates for libssh2. note this is relative to what is installed in local</p><pre><code class=language-console data-lang=console>root@photon[ ~ ]# tdnf updateinfo list libssh2
patch:PHSA-2020-3.0-0047 Security libssh2-1.9.0-2.ph3.x86_64.rpm
patch:PHSA-2019-3.0-0025 Security libssh2-1.9.0-1.ph3.x86_64.rpm
patch:PHSA-2019-3.0-0009 Security libssh2-1.8.2-1.ph3.x86_64.rpm
patch:PHSA-2019-3.0-0008 Security libssh2-1.8.0-2.ph3.x86_64.rpm
</code></pre><p>Show details of all the libssh2 updates
root@photon [ ~ ]# tdnf updateinfo info libssh2
Name : libssh2-1.9.0-2.ph3.x86_64.rpm
Update ID : patch:PHSA-2020-3.0-0047
Type : Security
Updated : Wed Jan 15 10:48:25 2020
Needs Reboot: 0
Description : Security fixes for {&lsquo;CVE-2019-17498&rsquo;}
Name : libssh2-1.9.0-1.ph3.x86_64.rpm
Update ID : patch:PHSA-2019-3.0-0025
Type : Security
Updated : Sat Aug 17 16:14:35 2019
Needs Reboot: 0
Description : Security fixes for {&lsquo;CVE-2019-13115&rsquo;}
Name : libssh2-1.8.2-1.ph3.x86_64.rpm
Update ID : patch:PHSA-2019-3.0-0009
Type : Security
Updated : Sat Apr 13 03:34:22 2019
Needs Reboot: 0
Description : Security fixes for {&lsquo;CVE-2019-3859&rsquo;, &lsquo;CVE-2019-3862&rsquo;, &lsquo;CVE-2019-3861&rsquo;, &lsquo;CVE-2019-3857&rsquo;, &lsquo;CVE-2019-3858&rsquo;, &lsquo;CVE-2019-3863&rsquo;, &lsquo;CVE-2019-3860&rsquo;, &lsquo;CVE-2019-3856&rsquo;}
Name : libssh2-1.8.0-2.ph3.x86_64.rpm
Update ID : patch:PHSA-2019-3.0-0008
Type : Security
Updated : Fri Mar 29 16:04:18 2019
Needs Reboot: 0
Description : Security fixes for {&lsquo;CVE-2019-3855&rsquo;}</p><pre><code> 
install all security updates &gt;= score 9.0 (CVSS_v3.0_Severity)

```console
root@photon [ ~ ]# tdnf update --sec-severity 9.0
Upgrading:
apache-tomcat                  noarch          8.5.50-1.ph3         photon-updates    9.00M 9440211
bash                           x86_64          4.4.18-2.ph3         photon-updates    3.16M 3315720
bzip2                          x86_64          1.0.8-1.ph3          photon-updates  124.99k 127990
bzip2-libs                     x86_64          1.0.8-1.ph3          photon-updates   74.31k 76096
file                           x86_64          5.34-2.ph3           photon-updates   43.02k 44056
file-libs                      x86_64          5.34-2.ph3           photon-updates    5.21M 5458536
git                            x86_64          2.23.1-2.ph3         photon-updates   24.34M 25519969
glib                           x86_64          2.58.0-4.ph3         photon-updates    3.11M 3265152
libseccomp                     x86_64          2.4.0-2.ph3          photon-updates  315.79k 323368
libssh2                        x86_64          1.9.0-2.ph3          photon-updates  238.41k 244136
linux-esx                      x86_64          4.19.97-2.ph3        photon-updates   12.68M 13299655
 
Total installed size:  58.28M 61114889
</code></pre></div><div class=td-content style=page-break-before:always><h1 id=pg-5404bf48493f97cd2de8f602f761fc79>3.2 - Package Management</h1><p><a href=https://github.com/vmware/tdnf>TDNF</a> is the default package manager for Photon OS. The standard syntax for <code>tdnf</code> commands is the same as that for DNF and YUM. TDNF reads YUM repositories from <strong>/etc/yum.repos.d/</strong>.</p><p>To find the main configuration file and see its contents, run the following command:</p><pre><code>cat /etc/tdnf/tdnf.conf
[main]
gpgcheck=1
installonly_limit=3
clean_requirements_on_remove=true
repodir=/etc/yum.repos.d
cachedir=/var/cache/tdnf
</code></pre><p>Repositories have a <strong>.repo</strong> file extension, The following repositories are available in <strong>/etc/yum.repos.d/</strong> :</p><pre><code>ls /etc/yum.repos.d/
photon-extras.repo
photon-iso.repo
photon-updates.repo
photon.repo
</code></pre><p>Use the <code>tdnf repolist</code> command to list the repositories. Tdnf filters the results by their status <strong>enabled</strong>, <strong>disabled</strong>, and <strong>all</strong>. Running the <code>tdnf repolist</code> command without arguments displays the enabled repositories.</p><pre><code>#tdnf repolist

repo id repo name status
photon-extras        VMware Photon Extras 3.0(x86_64) enabled
photon-debuginfo VMware Photon Linux debuginfo 3.0(x86_64)enabled
photon                    VMware Photon Linux 3.0(x86_64) enabled
photon-updates     VMware Photon Linux 3.0(x86_64) Updates enabled
root@photon-75829bfd01d0 [ ~ ]#
</code></pre><p>The following repositories are important for Photon:</p><ul><li>photon-updates : This repo contains RPM updates for CVE/version and updates/others fixes.</li><li>photon-debuginfo : This repo contains information about RPMs with debug symbols.</li><li>photon : This repo generally contains the RPM versions packaged with the released ISO.</li></ul><p>To check the local cache data from the repository, run the following command:</p><pre><code># ls -l /var/cache/tdnf/photon
total 12
-r--r----- 1 root root 0 Apr 3 22:34 lastrefresh
drwxr-x--- 2 root root 4096 Apr 3 22:34 repodata
drwxr-x--- 4 root root 4096 Feb 4 14:31 rpms
drwxr-x--- 2 root root 4096 Apr 3 22:34 solvcache
</code></pre><p>##Usage
The <code>tdnf</code> command can be used in the following ways:</p><p><code>#tdnf repolist --refresh</code> : This command is used to refresh the repolist. Generally there is a cache of the repo data stored in the local VM.</p><p><code>#tdnf install &lt;rpm name></code> : This command is used to install a RPM. This command installs the latest version of the RPM.</p><p><code>#tdnf install &lt;pkg-name>-&lt;verison>-&lt;release>.&lt;photon-release></code> : This command is used to install a particular RPM version. For example, run <code># tdnf install systemd-239-11.ph3</code>.</p><p><code>#tdnf list systemd</code> : This command is used to list the available RPM versions in the repository.</p><p><code>#tdnf makecache</code> : This command updates the cached binary metadata for all known repositories.</p><p><code>tdnf clean all</code> : This command cleans up temporary files, data, and metadata. It takes the argument <code>all</code>.</p><pre><code>#tdnf list systemd

Refreshing metadata for: 'VMware Photon Linux 3.0(x86_64)'

systemd.x86_64                                                                       239-15.ph3                                            @System

systemd.x86_64                                                                       239-11.ph3                                     photon-updates

systemd.x86_64                                                                       239-12.ph3                                     photon-updates

systemd.x86_64                                                                       239-13.ph3                                     photon-updates

systemd.x86_64                                                                       239-14.ph3                                     photon-updates

systemd.x86_64                                                                       239-15.ph3                                     photon-updates

systemd.x86_64                                                                       239-17.ph3                                     photon-updates

systemd.x86_64                                                                       239-18.ph3                                     photon-updates

systemd.x86_64                                                                       239-19.ph3                                     photon-updates

systemd.x86_64                                                                       239-10.ph3                                             photon

systemd.x86_64                                                                       239-10.ph3                                             photon

root@photon-4a0e7f2307d4 [ /WS/photon-dev/photon ]#
</code></pre><p>Here, <code>@System</code> indicates that the particular RPM is installed in the VM.</p><p>To upgrade/downgrade RPMs run the following commands:</p><pre><code>#tdnf upgrade &lt;pkg-name&gt;

#tdnf downgrade &lt;pkg-name&gt;
</code></pre><p>After upgrade/downgrade the dependent packages must be manually upgraded/downgraded as well. Use the <code>#tdnf remove &lt;pkg-name></code> command to remove packages and <code># tdnf clean all</code> to clear cached packages, metadata, dbcache, plugins and expire-cache.</p><p>#RPM
RPM is an open source package management system capable of building software from source into easily distributable packages. It is used for installing, updating and uninstalling packaged software.
RPM can also be used to query detailed information about the packaged software and to check if a particular package is installed or not.</p><p>You can do the following operation using the RPM binaries:</p><ul><li>Install/Upgrade/Downgrade/Remove RPMs from a virtual machine.</li><li>Check the version of the packages installed.</li><li>Check the package contents.</li><li>Check the dependencies of a package.</li><li>Find the source package of a file.</li></ul><p>To find the package that contains a particular binary, run <code>rpm -q —whatprovides &lt;binary/file path></code> command.</p><p>##Usage
The <code>rpm</code> command can be used in the following ways:</p><ul><li><code>rpm -ivh &lt;rpm file path></code> : This command installs the RPM in a virtual machine.</li><li><code>rpm -Uvh &lt;rpm file path></code> : This command is used to upgrade/downgrade the RPM.</li><li><code>rpm -e &lt;rpm file path></code> : This command uninstalls the RPM from the virtual machine.</li><li><code>rpm -qp &lt;rpm file path> --provides</code> : This displays the libraries provided by the RPM.</li><li><code>rpm -qp &lt;rpm file path> --requires</code> : This displays the binaries/libraries required to install a particular rpm.</li><li><code>rpm -qa</code> : This displays a list of all installed packages.</li><li><code>rpm -ql &lt;package file.rpm></code> : This command lists all files in the package file.</li></ul></div><div class=td-content style=page-break-before:always><h1 id=pg-ff9fc3434cbe8db979342d9736dbfeb6>3.3 - Network Configuration</h1><p>systemd-networkd is a system daemon that manages network configurations. It detects and configures network devices as they appear. It can also create virtual network devices.</p><p>##Configuration Examples
All configurations are stored as <strong>foo.network</strong> in the <strong>/etc/systemd/network/</strong>, <strong>/lib/systemd/network/</strong> and <strong>/run/systemd/network/</strong> folder. Use the <code>networkctl list</code> command to list all the devices on the system.</p><p>After making changes to a configuration file, restart the <strong>systemd-networkd.service</strong> if version is &lt; 245, for other version run the following commands:</p><pre><code>root@photon [ /home/sus ]# networkctl reload
root@photon [ /home/sus ]# networkctl reconfigure eth0
</code></pre><p><strong>Note</strong>:</p><ul><li>The options mentioned in the configuration files are case sensitive.</li><li>Set <code>DHCP=yes</code> to accept IPv4 and IPv6 DHCP requests.</li><li>Set <code>DHCP=ipv4</code> to accept IPv4 DHCP requests.</li><li>Set LinkLocalAddressing=no to disable IPv6. Please do not disable IPv6 via sysctl. When <code>LinkLocalAddressing=no</code> in the .network file, the kernel drops addresses starting with <strong>fe80</strong>, for example <strong>fe80::20c:29ff:fe4c:7eca</strong>. If IPv6LL address is not available networkd will not start IPv6 configurations.</li></ul><p>To link network configurations using DHCPv4 (IPv6 disabled), run the following command:</p><pre><code>/etc/systemd/network/20-eth0.network
[Match]
Name=eth0

[Network]
LinkLocalAddressing=no

DHCP=ipv4
</code></pre><p>To link network configurations using DHCPv6, run the following command:</p><pre><code>/etc/systemd/network/20-eth0.network
[Match]
Name=eth0

[Network]
IPv6AcceptRA=yes

DHCP=ipv6
</code></pre><p>To link network configurations using a static IP address, run the following command:</p><pre><code>/etc/systemd/network/20-wired.network
[Match]
Name=enp1s0

[Network]
Address=10.1.10.9/24
Gateway=10.1.10.1
DNS=10.1.10.1
</code></pre><p>Here <code>Address=</code> can be used more than once to configure multiple IPv4 or IPv6 addresses.</p><p>A <strong>.link</strong> file can be used to rename an interface. For example, set a predictable interface name for a Ethernet adapter based on its MAC address by running the following command:</p><pre><code>/etc/systemd/network/10-test0.link
[Match]
MACAddress=12:34:56:78:90:ab

[Link]
Description=my custom name
Name=test123
</code></pre><p>##Configuration Files
Configuration files are located in <strong>/usr/lib/systemd/network/</strong> folder, the volatile runtime network directory in <strong>/run/systemd/network/</strong> folder and the local administration network directory in <strong>/etc/systemd/network/</strong> folder. Configuration files in <strong>/etc/systemd/network/</strong> folder have the highest priority.</p><p>There are three types of configuration files and they use a format similar to systemd unit files.</p><ul><li><p><strong>.network</strong> : These files apply a network configuration to a matching device.</p></li><li><p><strong>.netdev</strong> : These files are used to create a virtual network device for a matching environment.</p></li><li><p><strong>.link</strong> : When a network device appears, udev looks for the first matching <strong>.link</strong> file.
These link files follow the following rules:</p></li><li><p>Only if all conditions in the <code>[Match]</code> section are matched, the profile will be activated.</p></li><li><p>An empty <code>[Match]</code> section means the profile can apply to any case (can be compared to the * wild card)</p></li><li><p>All configuration files are collectively sorted and processed in lexical order, regardless of the directory it resides in.</p></li><li><p>Files with identical names replace each other.</p></li></ul><p>##Dupliate Matches
If we have multiple configuration files matching an interface, the first (in lexical order) network file matching a given device is applied. All other files are ignored even if they match. The following is an example of matching configuration files:</p><pre><code>builder@localhost [ ~ ]$ cat /etc/systemd/network/10-eth0.network
[Match]
Name=eth0
[Network]
DHCP=yes
  
builder@localhost [ ~ ]$ cat /etc/systemd/network/99-dhcp-en.network
[Match]
Name=e*
 
[Network]
DHCP=yes
IPv6AcceptRA=no
</code></pre><p>##Network Files
These files are used to set network configuration variables for servers and containers.
<strong>.network</strong> files have the following sections:</p><p>###<code>[Match]</code></p><table><thead><tr><th>Parameter</th><th>Description</th><th>Accepted Values</th></tr></thead><tbody><tr><td><code>Name=</code></td><td>Matches device names. For example: <code>en*</code>. By using <code>!</code> prefix the list can be inverted.</td><td>Device names separated by a white space, logical negation (!).</td></tr><tr><td><code>MACAddress=</code></td><td>Matches MAC addresses. For example: <code>MACAddress=01:23:45:67:89:ab 00-11-22-33-44-55 AABB.CCDD.EEFF</code></td><td>MAC addresses with full colon-, hyphen- or dot-delimited hexadecimal separated by a white space.</td></tr><tr><td><code>Host=</code></td><td>Matches the host name or the machine ID of the host.</td><td>Hostname string or Machine ID</td></tr><tr><td><code>Virtualization=</code></td><td>Checks whether the system is running in a virtual environment. <code>Virtualization=false</code> will only match your host machine, while <code>Virtualization=true</code> matches containers or VMs. It is also possible to check for a specific virtualization type or implementation.</td><td>boolean, logical negation (!), type (vm, container), implementation (qemu, kvm, zvm, vmware, microsoft, oracle, xen, bochs, uml, bhyve, qnx, openvz, lxc, lxc-libvirt, systemd-nspawn, docker, podman, rkt, wsl, acrn)</td></tr></tbody></table><p>###<code>[Link]</code></p><ul><li><code>MACAddress=</code> : Used to spoof MAC address.</li><li><code>MTUBytes=</code> : Setting a larger MTU value (For example: when using jumbo frames) can significantly speed up your network transfers.</li><li><code>Multicast</code> : Enables the use of multicast on interface(s).</li></ul><p>###<code>[Network]</code></p><table><thead><tr><th>Parameter</th><th>Description</th><th>Accepted Values</th><th>Default Value</th></tr></thead><tbody><tr><td><code>DHCP=</code></td><td>Controls DHCPv4 and/or DHCPv6 client support.</td><td>Boolean, <code>ipv4</code>, <code>ipv6</code></td><td>false</td></tr><tr><td><code>DHCPServer=</code></td><td>If enabled, a DHCPv4 server will be started.</td><td>Boolean</td><td>false</td></tr><tr><td><code>MulticastDNS=</code></td><td>Enables multicast DNS support. When set to <code>resolve</code>, only resolution is enabled.</td><td>Boolean, <code>resolve</code></td><td>false</td></tr><tr><td><code>DNSSEC=</code></td><td>Controls the DNSSEC DNS validation support on the link. When set to <code>allow-downgrade</code>, compatibility with non-DNSSEC capable networks is increased, by automatically turning off DNSSEC.</td><td>Boolean, <code>allow-downgrade</code></td><td>false</td></tr><tr><td><code>DNS=</code></td><td>Configures static DNS addresses. can be specified more than once.</td><td><code>inet_pton</code></td><td></td></tr><tr><td><code>Domains=</code></td><td>Indicates domains which must be resolved using the DNS servers.</td><td>domain name, optionally prefixed with a <strong>~</strong></td><td></td></tr><tr><td><code>IPForward=</code></td><td>If enabled, incoming packets on any network interface will be forwarded to any other interfaces according to the routing table.</td><td>Boolean, <code>ipv4</code>, <code>ipv6</code></td><td>false</td></tr><tr><td><code>IPMasquerade=</code></td><td>If enabled, packets forwarded from the network interface appear as if they are coming from the local host.</td><td>Boolean</td><td>false</td></tr><tr><td><code>IPv6PrivacyExtensions=</code></td><td>Configures use of stateless temporary addresses that change over time. When set to <code>prefer-public</code>, the privacy extensions are enabled, but prefers public addresses over temporary addresses. When set to <code>kernel</code>, the kernel&rsquo;s default setting will be left in place.</td><td>Boolean, <code>prefer-public</code>, <code>kernel</code></td><td>false</td></tr></tbody></table><p>###<code>[Address]</code>
<code>Address=</code> option is mandatory unless DHCP is used.</p><p>###<code>[Route]</code></p><ul><li><code>Gateway=</code> option is mandatory unless DHCP is used.</li><li><code>Destination=</code> option defines the destination prefix of the route, possibly followed by a slash and the prefix length.
If Destination is not present in <code>[Route]</code> section it is treated as a default route.
<strong>Note:</strong> You can add the <code>Address=</code> and <code>Gateway=</code> keys in the <code>[Network]</code> section as a short-hand, if the <code>[Address]</code> section contains only an Address key and <code>[Route]</code> section contains only a Gateway key.</li></ul><p>###DHCP</p><table><thead><tr><th>Parameter</th><th>Description</th><th>Accepted Values</th><th>Default Value</th></tr></thead><tbody><tr><td><code>UseDNS=</code></td><td>Defines the DHCP server to be used.</td><td>Boolean</td><td>true</td></tr><tr><td><code>Anonymize=</code></td><td>When set to <code>true</code>, the options sent to the DHCP server will follow RFC7844 (Anonymity Profiles for DHCP Clients) to minimize disclosure of identifying information.</td><td>Boolean</td><td>false</td></tr><tr><td><code>UseDomains=</code></td><td>Defines the DHCP server to be used as the DNS search domain. If set to <code>route</code>, the domain name received from the DHCP server will be used for routing DNS queries only and not for searching. This option can sometimes fix local name resolving when using systemd-resolved.</td><td>Boolean, <code>route</code></td><td>false</td></tr></tbody></table><p>###<code>[DHCPServer]</code>
The following is an example of a DHCP server configuration which works well with hostapd to create a wireless hotspot. <code>IPMasquerade</code> adds the firewall rules for NAT and <code>IPForward</code> enables packet forwarding.</p><pre><code>/etc/systemd/network/wlan0.network
[Match]
Name=wlan0

[Network]
Address=10.1.1.1/24
DHCPServer=true
IPMasquerade=true
IPForward=true

[DHCPServer]
PoolOffset=100
PoolSize=20
EmitDNS=yes
DNS=9.9.9.9
</code></pre><p>##Netdev Files
These files create virtual network devices. They have the following two sections:</p><p>###<code>[Match]</code></p><ul><li><code>Host=</code> : The host name.</li><li><code>Virtualization=</code> : Checks if it is running in a virtual environment.</li></ul><p>###<code>[NetDev]</code></p><ul><li><code>Name=</code> : The interface&rsquo;s name. This is a mandatory field.</li><li><code>Kind=</code> : For example: bridge, bond, vlan, veth, sit, etc. This is a mandatory field.</li></ul><p>##Link Files
These files are an alternative to custom udev rules and will be applied by udev as the device appears. They have the following two sections:</p><p>###<code>[Match]</code></p><ul><li><code>MACAddress=</code> : The MAC address.</li><li><code>Host=</code> : The host name.</li><li><code>Virtualization=</code> : Checks if it is running in a virtual environment.</li><li><code>Type=</code> : the device type. For example: vlan.</li></ul><p>###<code>[Link]</code></p><ul><li><code>MACAddressPolicy=</code> : Persistent or random addresses.</li><li><code>MACAddress=</code> : The MAC address.
<strong>Note:</strong> The system <strong>/usr/lib/systemd/network/99-default.link</strong> file is sufficient for most cases.</li></ul><p>##Debugging Systemd-networkd
The log can be generated by creating a drop-in config. For example:</p><pre><code># /etc/systemd/system/systemd-networkd.service.d/override.conf
[Service]
Environment=SYSTEMD_LOG_LEVEL=debug
</code></pre></div><div class=td-content style=page-break-before:always><h1 id=pg-51e16a96644c046ffe6a824b4489b09d>3.4 - Cloud-init</h1><p>Cloud-init is mixture of Python and Shell scripts that initialize cloud instances of Linux machines.
Cloud-init performs boot time configuration of a system.
We can configure users, hostname, host network, write files to disk, manage packages, run custom scripts and so on.</p><p>##DataSources
Datasource is the source of configuration data for cloud-init that is typically given by a user (For example: userdata) or obtained from the cloud that created the configuration drive (For example: metadata).
Userdata includes files, YAML configuration files and shell scripts.
Metadata includes server name, instance id, display name and other cloud specific details.</p><p>Currently there are two datasources used in Photon OS, it&rsquo;s usage is described in the following sections:</p><ul><li>DataSourceOVF - Used for GuestOS customization in vSphere.</li><li>VMwareGuestInfo - Used to read meta, user, and vendor data from VMware vSphere&rsquo;s GuestInfo interface and initialize the system.</li></ul><p>###DataSourceOVF
The OVF (Open Virtualization Format) Datasource provides a datasource for reading data from an OVF transport ISO.
The vmtoolsd service extracts the customization spec cab file from the OVF and calls either cloud-init or the GuestOS customization scripts.
The <code>disable_vmware_customization</code> flag in <strong>/etc/cloud/cloud.cfg</strong> file determines if GOSC scripts or cloud-init is used.</p><ul><li><code>disable_vmware_customization: false</code> : Cloud-init is used for Guest OS customization</li><li><code>disable_vmware_customization: true</code> : GuestOS customization scripts is used for Guest OS customization</li></ul><p><strong>Note</strong>:
The default value for <code>disable_vmware_customization</code> is set to <code>true</code> in the <strong>/etc/cloud/cloud.cfg</strong> file</p><p>###VMwareGuestInfo
VMwareGuestInfo data source is configured by setting <code>guestinfo</code> properties on a VM. This can be set by performing one of the following:</p><ul><li>Using the vmware-rpctool provided by open-vmtools.</li><li>Modifying the <strong>vmx</strong> file to set the guestinfo properties.</li></ul><p>##Debugging Cloud-init Failures
Cloud-init has four services which are started in the following sequence:</p><ol><li>cloud-init-local - This service locates local data sources and applies networking configurations provided n the metadata (If there is no metadata it applies Fallback). Use <code>$ systemctl status cloud-init-local</code> command to check its status.</li><li>cloud-init - This service processes any user-data that is found and runs the cloud_init_modules in <strong>/etc/cloud/cloud.cfg</strong>. Use <code>$ systemctl status cloud-init</code> command to check its status.</li><li>cloud-config - This service runs the cloud_config_modules in <strong>/etc/cloud/cloud.cfg</strong> file. Use <code>$ systemctl status cloud-config</code> command to check its status.</li><li>cloud-final - This service runs any script that a user is accustomed to running after logging into a system (For example: package installations, configs, user-scripts) and runs cloud_final_modules in <strong>/etc/cloud/cloud.cfg</strong> file. Use <code>$ systemctl status cloud-final</code> command to check its status.</li></ol><p>Cloud-init logs are available in the <strong>/var/log/cloud-init.log</strong> file. Logs for GuestOS customization using DataSourceOVF are available in the <strong>/var/log/vmware-imc/toolsDeployPkg.log</strong> and <strong>/var/log/cloud-init.log</strong> files.</p><p>To analyze the cloud-init boot time performance, run the following commands:</p><ul><li><code>$ cloud-init analyze blame</code> - The blame command prints in descending order, the units that took the longest to run. This output is useful for observe where cloud-init is spending its time during execution.</li><li><code>$ cloud-init analyze show</code> - The show command prints a list of units, the time they started and how long they took to complete. It also prints a summary of total time per boot.</li><li><code>$ cloud-init analyze dump</code> - The dump command dumps the cloud-init logs for the analyze modules and displays a list of dictionaries that can be consumed for other reporting needs.</li><li><code>$ cloud-init status</code> - To know the overall status of clouf-init.</li></ul><p>Cloud-init doesn&rsquo;t configure the network if <strong>/etc/cloud/cloud.cfg.d/99-disable-networking-config.cfg</strong> file is present and has the following content:</p><ul><li>network:Item</li><li>config: disabled</li></ul><p>Take a backup of <strong>/etc/cloud/cloud.cfg.d/99-disable-networking-config.cfg</strong> file and remove it from it&rsquo;s location.
Reconfigure the machine using metadata, userdata and vendordata.
Once the configurations are done copy the backup file to the same location.
Cloud-init will push it&rsquo;s fallback configuration when service is restarted or rebooted and there is no local datasource to configure. To avoid this <strong>/etc/cloud/cloud.cfg.d/99-disable-networking-config.cfg</strong> file is required.</p><p>##Run Cloud-init Manually
To run cloud-init manually, run the following commands:</p><pre><code>/usr/bin/cloud-init -d init  (-d for debug)
/usr/bin/cloud-init -d modules (run all modules)
/usr/bin/cloud-init --file &lt;config-yaml-file-path&gt; init (if you want to run cloud-init with a configuration yaml file)
</code></pre><p>When cloud-init is running, to force it to run with all configs engaged run the following command:</p><pre><code>rm -rf /var/lib/cloud/*
</code></pre><p>For more information about cloud-init, see
<a href=https://cloudinit.readthedocs.io/en/latest/index.html>https://cloudinit.readthedocs.io/en/latest/index.html</a><a href=https://cloudinit.readthedocs.io/en/latest/index.html>https://cloudinit.readthedocs.io/en/latest/index.html</a></p><p>For more information about cloud-init CLI, see
<a href=https://cloudinit.readthedocs.io/en/latest/topics/cli.html>https://cloudinit.readthedocs.io/en/latest/topics/cli.html</a><a href=https://cloudinit.readthedocs.io/en/latest/topics/cli.html>https://cloudinit.readthedocs.io/en/latest/topics/cli.html</a></p><p><strong>Note</strong>:Include the cloud-init log tarball and the vmtoolsd logs when you raise an issue.</p><ol><li>Collect cloud-init log tarball by running the <code>cloud-init collect-logs</code> command.</li><li>Collect the vmtoolsd logs from <strong>/var/log/vmware-imc/toolsDeployPkg.log</strong> file.</li><li>Attach the collected logs to the issue ticket.</li></ol></div><div class=td-content style=page-break-before:always><h1 id=pg-bc1ceb0533f29196c7d5f82d8eea575e>3.5 - Open-vm-tools/Vmtoolsd</h1><p>Vmtoolsd is a systemd service, using which we can set guestinfo properties metadata, userdata and vendordata etc., which in turn are consumed by cloud-init.
VMwareGuestInfo Datasource uses this guestinfo properties and applies them to the system.</p><p>vmware-rpctool is a utility provided by open-vm-tools to set metadata, userdata and vendordata.
vmware-rpctool provides info.set and info.get options to set and get the guestinfo properties respectively.</p><p>##Debugging
To check the status of the vmtoolsd service (vmtoolsd is dependant on vgauthd), run the following commands:</p><pre><code>$ systemctl status vmtoolsd vgauthd

$ journalctl -u vmtoolsd

$ journalctl -u vgauthd
</code></pre><p>To set and get metadata, userdata and vendordata, run the following commands:</p><pre><code>$ /usr/bin/vmware-rpctool 'info-get guestinfo.metadata'

$ /usr/bin/vmware-rpctool 'info-get guestinfo.userdata'

$ /usr/bin/vmware-rpctool 'info-get guestinfo.vendordata'
</code></pre><p>A YAML file can be used as input to the <strong>rpctool</strong> using following commands:</p><pre><code>vmware-rpctool &quot;info-set guestinfo.userdata.encoding base64&quot;
vmware-rpctool &quot;info-set guestinfo.metadata.encoding base64&quot;

vmware-rpctool &quot;info-set guestinfo.metadata ${metadata file contents}&quot;

vmware-rpctool &quot;info-set guestinfo.userdata ${userdata file contents}&quot;
</code></pre><p><strong>Note</strong>:Include the cloud-init log tarball and the vmtoolsd logs when you raise an issue.</p><ol><li>Collect cloud-init log tarball by running the <code>cloud-init collect-logs</code> command.</li><li>Collect the vmtoolsd logs from <strong>/var/log/vmware-imc/toolsDeployPkg.log</strong> file.</li><li>Attach the logs collected to the issue ticket.</li></ol></div><div class=td-content style=page-break-before:always><h1 id=pg-d65d5ffc0a2bedf288766d2b9faf15ce>4 - Troubleshooting Tools</h1><p>Photon OS includes tools that help troubleshoot problems. These tools are installed by default on the full version of Photon OS. On the minimal version of Photon OS, you might have to install a tool before you can use it.</p><p>There is a man page on Photon OS for all the tools covered in this section. The man pages provide more information about each tool&rsquo;s commands, options, and output. To view a tool&rsquo;s man page, on the Photon OS command line, type <code>man</code> and then the name of the tool. Example:</p><pre><code>man strace</code></pre></div><div class=td-content style=page-break-before:always><h1 id=pg-04a89d7f32cd8174c5a820a6ee655974>4.1 - Common Tools</h1><p>The following are some tools that you can use to troubleshoot:</p><ul><li><a href=#top>top</a></li><li><a href=#ps>ps</a></li><li><a href=#netstat>netstat</a></li><li><a href=#find>find</a></li><li><a href=#locate>locate</a></li><li><a href=#df>df</a></li><li><a href=#md5sum>md5sum</a></li><li><a href=#sha256sum>sha256sum</a></li><li><a href=#strace>strace</a></li><li><a href=#file>file</a></li><li><a href=#stat>stat</a></li><li><a href=#watch>watch</a></li><li><a href=#vmstat-and-fdisk>vmstat and fdisk</a></li><li><a href=#lsof>lsof</a></li><li><a href=#fuser>fuser</a></li><li><a href=#ldd>ldd</a></li><li><a href=#gdb>gdb</a></li></ul><p><strong>Note</strong>: Some of the examples in this section are marked as abridged with ellipsis (<code>...</code>).</p><h2 id=top>top</h2><p>The <code>top</code> tool monitors system resources, workloads, and performance. It can unmask problems caused by processes or applications overconsuming CPUs, time, or RAM.</p><p>To view a textual display of resource consumption, run the <code>top</code> command:</p><pre><code>top
</code></pre><p>Use can use &lsquo;top&rsquo; to kill a runaway or stalled process by typing <code>k</code> followed by its process ID (PID).</p><p><img src=../../../docs/images/top-in-photon-os.png alt="Top on Photon OS"></p><p>If the percent of CPU utilization is consistently high with little idle time, there might be a runaway process overconsuming CPUs. Restarting the service might solve the problem.</p><p>To troubleshoot an unknown issue, run Top in the background in batch mode to write its output to a file and collect data about performance:</p><pre><code class=language-console data-lang=console>top d 120 b &gt;&gt; top120second.output
</code></pre><p>For a list of options that filter top output and other information, see the man page for <code>top</code>.</p><h2 id=ps>ps</h2><p>The <code>ps</code> tool shows the processes running on the machine. The <code>ps</code> tool derives flexibility and power from its options, all of which are covered in the tool&rsquo;s Photon OS man page:</p><pre><code class=language-console data-lang=console>man ps
</code></pre><p>You can use the following options of <code>ps</code> for troubleshooting:</p><ul><li><p>Show processes by user:
<code>ps aux</code></p></li><li><p>Show processes and child processes by user:
<code>ps auxf</code></p></li><li><p>Show processes containing the string <code>ssh</code>:
<code>ps aux | grep ssh</code></p></li><li><p>Show processes and the command and options with which they were started:
<code>ps auxww</code></p></li></ul><p>Example abridged output:</p><pre><code class=language-console data-lang=console>ps auxww
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
root          1  0.0  0.9  32724  3300 ?        Ss   07:51   0:32 /lib/systemd/systemd --switched-root --system --deserialize 22
</code></pre><h2 id=netstat>netstat</h2><p>The <code>netstat</code> command can identify bottlenecks causing performance issues. It lists network connections, listening sockets, port information, and interface statistics for different protocols. Examples:</p><pre><code class=language-console data-lang=console>netstat --statistics
netstat --listening
</code></pre><h2 id=find>find</h2><p>Use the <code>find</code> command to troubleshoot a Photon OS machine that has stopped working. The following command lists the files in the root directory that have changed in the past day:</p><pre><code class=language-console data-lang=console>find / -mtime -1 
</code></pre><p>See the <code>find</code> <a href=https://www.gnu.org/software/findutils/manual/find.html>manual</a>. Take note of the security considerations listed in the <code>find</code> manual if you are using <code>find</code> to troubleshoot an appliance running on Photon OS.</p><h2 id=locate>locate</h2><p>The <code>locate</code> command is a fast way to find files and directories you onlay have a keyword. This command is similar to <code>find</code> and part of the same <code>findutils</code> package preinstalled on the full version of Photon OS by default. It finds file names in the file names database.</p><p>Before you can use <code>locate</code> accurately, update its database:</p><pre><code class=language-console data-lang=console>updatedb
</code></pre><p>Then run <code>locate</code> to quickly find a file, such as any file name containing <code>.network</code>, which can be helpful to see all the system&rsquo;s <code>.network</code> configuration files. The following is an abridged example:</p><pre><code class=language-console data-lang=console>locate .network
/etc/dbus-1/system.d/org.freedesktop.network1.conf
/etc/systemd/network/10-dhcp-en.network
/usr/lib/systemd/network/80-container-host0.network
/usr/lib/systemd/network/80-container-ve.network
/usr/lib/systemd/system/busnames.target.wants/org.freedesktop.network1.busname
/usr/lib/systemd/system/dbus-org.freedesktop.network1.service
/usr/lib/systemd/system/org.freedesktop.network1.busnname
/usr/share/dbus-1/system-services/org.freedesktop.network1.service
</code></pre><p>The <code>locate</code> command is also a quick way to see whether a troubleshooting tool is installed on Photon OS. Examples:</p><pre><code class=language-console data-lang=console>locate strace
/usr/bin/strace
/usr/bin/strace-graph
/usr/bin/strace-log-merge
/usr/share/man/man1/strace.1.gz
/usr/share/vim/vim74/syntax/strace.vim

locate traceroute

</code></pre><p>In this example, the <code>strace</code> tool is installed but <code>traceroute</code> is not.</p><p>You can install <code>traceroute</code> from the Photon OS repository:</p><pre><code class=language-console data-lang=console>tdnf install traceroute
</code></pre><h2 id=df>df</h2><p>The <code>df</code> command reports the disk space available on the file system. Running out of disk space can lead an application to fail and a quick check of the available space makes sense as an early troubleshooting step:</p><pre><code class=language-console data-lang=console>df -h
</code></pre><p>The <code>-h</code> option prints out the available and used space in human-readable sizes. After checking the space, you should also check the number of available inodes. Too few available inodes can lead to difficult-to-diagnose problems:</p><pre><code class=language-console data-lang=console>df -i
</code></pre><h2 id=md5sum>md5sum</h2><p>The <code>md5sum</code> tool calculates 128-bit RSA Data Security, Inc. MD5 Message Digest Algorithm hashes (a message digest, or digital signature, of a file) to uniquely identify a file and verify its integrity after file transfers, downloads, or disk errors when the security of the file is not in question.</p><p><code>md5sum</code> can help troubleshooting installation issues by verifying that the version of Photon OS being installed matches the version on the public VMware Photon Packages download page. If, for instance, bytes were dropped during the download, the checksums will not match. Try downloading it again.</p><h2 id=sha256sum>sha256sum</h2><p>The <code>sha256sum</code> tool calculates the authenticity of a file to prevent tampering when security is a concern. Photon OS also includes <code>shasum</code>, <code>sha1sum</code>, <code>sha384sum</code>, and <code>sha512sum</code>. See the man pages for <code>md3sum</code>, <code>sha256sum</code>, and the other SHA utilities.</p><h2 id=strace>strace</h2><p>The <code>strace</code> utility follows system calls and signals as they are executed so that you can see what an application, command, or process is doing. <code>strace</code> can trace failed commands, identify where a process obtains its configuration, monitor file activity, and find the location of a crash.</p><p>By tracing system calls, <code>strace</code> can help troubleshoot a broad range of problems, including issues with input-output, memory, interprocess communication, network usage, and application performance.</p><p>For troubleshooting a problem that gives off few or no clues, the following command displays every system call:</p><pre><code class=language-console data-lang=console>strace ls -al
</code></pre><p>With strace commands, you can route the output to a file to make it easier to analyze:</p><pre><code class=language-console data-lang=console>strace -o output.txt ls -al
</code></pre><p><code>strace</code> can reveal the files that an application tries to open with the <code>-eopen</code> option. This combination can help troubleshoot an application that is failing because it is missing files or being denied access to a file it needs. If, for example, you see &ldquo;No such file or directory&rdquo; in the results of <code>strace -eopen</code>, something might be wrong:</p><pre><code class=language-console data-lang=console>strace -eopen sshd
open(&quot;/usr/lib/x86_64/libpam.so.0&quot;, O_RDONLY|O_CLOEXEC) = -1 ENOENT (No such file or directory)
open(&quot;/usr/lib/libpam.so.0&quot;, O_RDONLY|O_CLOEXEC) = 3
</code></pre><p>The results above indicate that the first file is missing because it is found in the next line. In other cases, the application might be unable to open one of its configuration files or it might be reading the wrong one. If the results say &ldquo;permission denied&rdquo; for one of the files, check the permissions of the file with <code>ls -l</code> or <code>stat</code>.</p><p>When troubleshooting with <code>strace</code>, you can include the process ID in its commands. Here&rsquo;s an example of how to find a process ID:</p><pre><code class=language-console data-lang=console>ps -ef | grep apache
</code></pre><p>You can then use <code>strace</code> to examine the file a process is working with:</p><pre><code class=language-console data-lang=console>strace -e trace=file -p 1719
</code></pre><p>A similar command can trace network traffic:</p><pre><code class=language-console data-lang=console>strace -p 812 -e trace=network
</code></pre><p>If an application is crashing, use <code>strace</code> to trace the application and then analyze what happens right before the application crashes.</p><p>You can also trace the child processes that an application spawns with the fork system call, and you can do so with <code>systemctl</code> commands that start a process to identify why an application crashes immediately or fails to start:</p><pre><code class=language-console data-lang=console>strace -f -o output.txt systemctl start httpd
</code></pre><p>Example: If <code>journalctl</code> is showing that networkd is failing, you can run strace to troubleshoot:</p><pre><code class=language-console data-lang=console>strace -o output.txt systemctl restart systemd-networkd
</code></pre><p>Then <code>grep</code> inside the results for something, such as <em>exit</em> or <em>error</em>:</p><pre><code class=language-console data-lang=console>grep exit output.txt
</code></pre><p>If the results indicate <code>systemd-resolved</code> is going wrong, you can then strace it:</p><pre><code class=language-console data-lang=console>strace -f -o output.txt systemctl restart systemd-resolved
</code></pre><h2 id=file>file</h2><p>The <code>file</code> command determines the file type, which can help troubleshoot problems when an application mistakes one type of file for another, leading it to errors. Example:</p><pre><code class=language-console data-lang=console>file /usr/sbin/sshd
/usr/sbin/sshd: ELF 64-bit LSB shared object, x86-64, version 1 (SYSV), dynamically linked, interpreter /lib64/ld-linux-x86-64.so.2, for GNU/Linux 2.6.32, stripped
</code></pre><h2 id=stat>stat</h2><p>The <code>stat</code> command can help troubleshoot problems with files or the file system by showing the last date it was modified and other information. Example:</p><pre><code class=language-console data-lang=console>stat /dev/sda1
File: '/dev/sda1'
Size: 0               Blocks: 0          IO Block: 4096   block special file
Device: 6h/6d   Inode: 6614        Links: 1     Device type: 8,1
Access: (0660/brw-rw----)  Uid: (    0/    root)   Gid: (    8/    disk)
Access: 2016-09-02 12:23:56.135999936 +0000
Modify: 2016-09-02 12:23:52.879999981 +0000
Change: 2016-09-02 12:23:52.879999981 +0000
Birth: -
</code></pre><p>On Photon OS, <code>stat</code> is handy to show permissions for a file or directory in both their absolute octal notation and their read-write-execute abbreviation; truncated example:</p><pre><code class=language-console data-lang=console>chmod 777 tester.md
stat tester.md
	File: 'tester.md'
	Size: 0               Blocks: 0          IO Block: 4096   regular empty file
	Device: 801h/2049d      Inode: 316385      Links: 1
	Access: (0777/-rwxrwxrwx)  Uid: (    0/    root)   Gid: (    0/    root)
</code></pre><h2 id=watch>watch</h2><p>The <code>watch</code> utility runs a command at regular intervals so you can observe how its output changes over time. <code>watch</code> can help dynamically monitor network links, routes, and other information when you are troubleshooting networking or performance issues. Examples:</p><pre><code class=language-console data-lang=console>watch -n0 --differences ss
watch -n1 --differences ip route
</code></pre><p>The following is an example with a screenshot of the output. This command monitors the traffic on your network links. The highlighted numbers are updated every second so you can see the traffic fluctuating:</p><pre><code class=language-console data-lang=console>watch -n1 --differences ip -s link show up
</code></pre><p><img src=../../../docs/images/watchcmd.png alt="The dynamic output of the watch utility"></p><h2 id=vmstat-and-fdisk>vmstat and fdisk</h2><p>The <code>vmstat</code> tool displays statistics about virtual memory, processes, block input-output, disks, and CPU activity. This tool can help diagnose performance problems, especially system bottlenecks.</p><p>Its output on a Photon OS virtual machine running in VMware Workstation 12 Pro without a heavy load looks like this:</p><pre><code class=language-console data-lang=console>vmstat
procs -----------memory---------- ---swap-- -----io---- -system-- ------cpu-----
	r  b   swpd   free   buff  cache   si   so    bi    bo   in   cs us sy id wa st
	0  0      0   5980  72084 172488    0    0    27    44  106  294  1  0 98  1  0
</code></pre><p>These codes are explained in the <code>vmstat</code> man page.</p><ul><li>If <code>r</code>, the number of runnable processes, is higher than 10, the machine is under stress; consider intervening to reduce the number of processes or to distribute some of the processes to other machines. In other words, the machine has a bottleneck in executing processes.</li><li>If <code>cs</code>, the number of context switches per second, is really high, there may be too many jobs running on the machine.</li><li>If <code>in</code>, the number of interrupts per second, is relatively high, there might be a bottleneck for network or disk IO.</li></ul><p>You can investigate disk IO further by using vmstat&rsquo;s <code>-d</code> option to report disk statistics. The following is an abridged example on a machine with little load:</p><pre><code class=language-console data-lang=console>vmstat -d
disk- ------------reads------------ ------------writes----------- -----IO------
		total merged sectors      ms  total merged sectors      ms    cur    sec
ram0       0      0       0       0      0      0       0       0      0      0
ram1       0      0       0       0      0      0       0       0      0      0
loop0      0      0       0       0      0      0       0       0      0      0
loop1      0      0       0       0      0      0       0       0      0      0
sr0        0      0       0       0      0      0       0       0      0      0
sda    22744    676  470604   12908  72888  24949  805224  127692      0    130
</code></pre><p>The <code>-D</code> option summarizes disk statistics:</p><pre><code class=language-console data-lang=console>vmstat -D
    26 	disks
     2	partitions
 22744 	total reads
   676 	merged reads
470604  read sectors
 12908 	milli reading
 73040 	writes
 25001 	merged writes
806872  written sectors
127808  milli writing
     0	inprogress IO
   130 	milli spent IO
</code></pre><p>You can also get statistics about a partition. First, run the <code>fdisk -l</code> command to list the machine&rsquo;s devices. Then run <code>vmstat -p</code> with the name of a device to view its stats:</p><pre><code class=language-console data-lang=console>fdisk -l
Disk /dev/ram0: 4 MiB, 4194304 bytes, 8192 sectors
Units: sectors of 1 * 512 = 512 bytes
Sector size (logical/physical): 512 bytes / 4096 bytes
I/O size (minimum/optimal): 4096 bytes / 4096 bytes
...
Device        Start      End  Sectors Size Type
/dev/sda1      2048 16771071 16769024   8G Linux filesystem
/dev/sda2  16771072 16777182     6111   3M BIOS boot

vmstat -p /dev/sda1
sda1          reads   read sectors  writes    requested writes
				22579     473306      78510     866088
</code></pre><p>See the <code>vmstat</code> man page for more options.</p><h2 id=lsof>lsof</h2><p>The <code>lsof</code> command lists open files. The tool&rsquo;s definition of an open file includes directories, libraries, streams, domain sockets, and Internet sockets. THis enables it to identify the files a process is using. Because a Linux system like Photon OS uses files to do its work, you can run <code>lsof</code> as root to see how the system is using them and to see how an application works.</p><p>If you cannot unmount a disk because it is in use, you can run <code>lsof</code> to identify the files on the disk that are being used.</p><p>The following is an example that shows the processes that are using the root directory:</p><pre><code class=language-console data-lang=console>lsof /root
COMMAND    PID USER   FD   TYPE DEVICE SIZE/OFF   NODE NAME
bash       879 root  cwd    DIR    8,1     4096 262159 /root
bash      1265 root  cwd    DIR    8,1     4096 262159 /root
sftp-serv 1326 root  cwd    DIR    8,1     4096 262159 /root
gdb       1351 root  cwd    DIR    8,1     4096 262159 /root
bash      1395 root  cwd    DIR    8,1     4096 262159 /root
lsof      1730 root  cwd    DIR    8,1     4096 262159 /root
</code></pre><p>You can do the same with an application or virtual appliance by running <code>lsof</code> with the user name or process ID of the app. The following example lists the open files used by the Apache HTTP Server:</p><pre><code class=language-console data-lang=console>lsof -u apache
</code></pre><p>Running the command with the <code>-i</code> option lists all the open network and Internet files, which can help troubleshoot network problems:</p><pre><code class=language-console data-lang=console>lsof -i
</code></pre><p>See the Unix socket addresses of a user like <em>zookeeper</em>:</p><pre><code class=language-console data-lang=console>lsof -u zookeeper -U
</code></pre><p>The following example shows the processes running on Ports 1 through 80:</p><pre><code class=language-console data-lang=console>lsof -i TCP:1-80
COMMAND  PID   USER   FD   TYPE DEVICE SIZE/OFF NODE NAME
httpd    403   root    3u  IPv6  10733      0t0  TCP *:http (LISTEN)
httpd    407 apache    3u  IPv6  10733      0t0  TCP *:http (LISTEN)
httpd    408 apache    3u  IPv6  10733      0t0  TCP *:http (LISTEN)
httpd    409 apache    3u  IPv6  10733      0t0  TCP *:http (LISTEN)
sshd     820   root    3u  IPv4  11336      0t0  TCP *:ssh (LISTEN)
sshd     820   root    4u  IPv6  11343      0t0  TCP *:ssh (LISTEN)
sshd    1258   root    3u  IPv4  48040      0t0  TCP 198.51.100.143:ssh-&gt;198.51.100.1:49759 (ESTABLISHED)
sshd    1319   root    3u  IPv4  50866      0t0  TCP 198.51.100.143:ssh-&gt;198.51.100.1:51054 (ESTABLISHED)
sshd    1388   root    3u  IPv4  56438      0t0  TCP 198.51.100.143:ssh-&gt;198.51.100.1:60335 (ESTABLISHED)
</code></pre><p>You can also inspect the files opened by a process ID. The following example queries the files open by the systemd network service:</p><pre><code class=language-console data-lang=console>lsof -p 1917
COMMAND    PID            USER   FD      TYPE             DEVICE SIZE/OFF   NODE NAME
systemd-n 1917 systemd-network  cwd       DIR                8,1     4096      2 /
systemd-n 1917 systemd-network  txt       REG                8,1   887896 272389 /usr/lib/systemd/systemd-networkd
systemd-n 1917 systemd-network  mem       REG                8,1   270680 262267 /usr/lib/libnss_files-2.22.so
systemd-n 1917 systemd-network    0r      CHR                1,3      0t0   5959 /dev/null
systemd-n 1917 systemd-network    1u     unix 0x0000000000000000      0t0  45734 type=STREAM
systemd-n 1917 systemd-network    3u  netlink                         0t0   6867 ROUTE
systemd-n 1917 systemd-network    4u     unix 0x0000000000000000      0t0  45744 type=DGRAM
systemd-n 1917 systemd-network    9u  netlink                         0t0  45754 KOBJECT_UEVENT
systemd-n 1917 systemd-network   12u  a_inode               0,11        0   5955 [timerfd]
systemd-n 1917 systemd-network   13u     IPv4             104292      0t0    UDP 198.51.100.143:bootpc
</code></pre><h2 id=fuser>fuser</h2><p>The <code>fuser</code> command identifies the process IDs of processes using files or sockets. The term <em>process</em> is, in this case, synonymous with <em>user</em>. To identify the process ID of a process using a socket, run <code>fuser</code> with its namespace option and specify <code>tcp</code> or <code>udp</code> and the name of the process or port. Examples:</p><pre><code class=language-console data-lang=console>fuser -n tcp ssh
ssh/tcp:               940  1308
fuser -n tcp http
http/tcp:              592   594   595   596
fuser -n tcp 80
80/tcp:                592   594   595   596
</code></pre><h2 id=ldd>ldd</h2><p>By revealing the shared libraries that a program depends on, <code>ldd</code> can help troubleshoot an application that is missing a library or finding the wrong one.</p><p>For example, if you get a &ldquo;file not found&rdquo; output, check the path to the library.</p><pre><code class=language-console data-lang=console>ldd /usr/sbin/sshd
linux-vdso.so.1 (0x00007ffc0e3e3000)
libpam.so.0 =&gt; (file not found)
libcrypto.so.1.0.0 =&gt; /usr/lib/libcrypto.so.1.0.0 (0x00007f624e570000)
</code></pre><p>You can also use the <code>objdump</code> command to show dependencies for a program&rsquo;s object files; example:</p><pre><code class=language-console data-lang=console>objdump -p /usr/sbin/sshd | grep NEEDED
</code></pre><h2 id=gdb>gdb</h2><p>The <code>gdb</code> tool is the GNU debugger. It lets you see inside a program while it executes or when it crashes so that you can catch errors as they occur. The <code>gdb</code> tool is typically used to debug programs written in C and C++. On Photon OS, <code>gdb</code> can help you determine why an application crashed. See the man page for <code>gdb</code> for instructions on how to run it.</p><p>For an extensive example on how to use <code>gdb</code> to troubleshoot Photon OS running on a VM when you cannot login to Photon OS, see the section on troubleshooting boot and logon problems.</p></div><div class=td-content style=page-break-before:always><h1 id=pg-f13d060552ebaf87170062c96f0cb71b>4.2 - Troubleshooting Tools Installed by Default</h1><p>The following troubleshooting tools are included in the full version of Photon OS:</p><ul><li><code>grep</code>. Searches files for patterns.</li><li><code>ping</code>. Tests network connectivity.</li><li><code>strings</code>. Displays the characters in a file to identify its contents.</li><li><code>lsmod</code>. Lists loaded modules.</li><li><code>ipcs</code>. Shows data about the inter-process communication (IPC) resources to which a process has read access. This data includes shared memory segments, message queues, and semaphore arrays.</li><li><code>nm</code>. Lists symbols from object files.</li><li><code>diff</code>. Compares files side by side. This tool is useful to compare configuration files of two versions when one version works and the other does not.</li></ul></div><div class=td-content style=page-break-before:always><h1 id=pg-8541e2426271c83233d26031263d756e>4.3 - Installing Tools from Repositories</h1><p>You can install several troubleshooting tools from the Photon OS repositories by using the default package management system, <code>tdnf</code>.</p><p>If a tool you require is not installed, search the repositories to see if it is available.</p><p>For example, the traceroute tool is not installed by default. You can search for it in the repositories as follows:</p><pre><code>tdnf search traceroute
traceroute : Traces the route taken by packets over an IPv4/IPv6 network
</code></pre><p>The results of the above command show that traceroute exists in the repository. You install it with <code>tdnf</code>:</p><pre><code>tdnf install traceroute
</code></pre><p>The following tools are not installed by default but are in the repository and can be installed with <code>tdnf</code>:</p><ul><li><p><code>net-tools</code>. Networking tools.</p></li><li><p><code>ltrace</code>. Tool for intercepting and recording dynamic library calls. It can identify the function an application was calling when it crashed, making it useful for debugging.</p></li><li><p><code>nfs-utils</code>. Client tools for the kernel Network File System, or NFS, including showmount. These are installed by default in the full version of Photon OS but not in the minimal version.</p></li><li><p><code>pcstat</code>. A tool that inspects which pages of a file or files are being cached by the Linux kernel.</p></li><li><p><code>sysstat</code> and <code>sar</code>. Utilities to monitor system performance and usage activity. Installing sysstat also installs sar.</p></li><li><p><code>systemtap</code> and <code>crash</code>. The systemtap utility is a programmable instrumentation system for diagnosing problems of performance or function. Installing systemtap also installs crash, which is a kernel crash analysis utility for live systems and dump files.</p></li><li><p><code>dstat</code>. Tool for viewing and analyzing statistics about system resources.</p><p>The <code>dstat</code> tool can help troubleshoot system performance. The tool shows live, running list of statistics about system resources:</p><pre><code>  dstat
  You did not select any stats, using -cdngy by default.
  ----total-cpu-usage---- -dsk/total- -net/total- ---paging-- ---system--
  usr sys idl wai hiq siq| read  writ| recv  send|  in   out | int   csw
    1   0  98   1   0   0|4036B   42k|   0     0 |   0     0 |  95   276
    1   0  98   1   0   0|   0    64k|  60B  940B|   0     0 | 142   320
    1   1  98   0   0   0|   0    52k|  60B  476B|   0     0 | 149   385
</code></pre></li></ul></div><div class=td-content style=page-break-before:always><h1 id=pg-3dc35a0dd7f3bbf95344f20fea8d9dc4>4.4 - Linux Troubleshooting Tools</h1><p>The following Linux troubleshoot tools are neither installed on Photon OS by default nor available in the Photon OS repositories:</p><ul><li>iostat</li><li>telnet (use SSH instead)</li><li>Iprm</li><li>hdparm</li><li>syslog (use journalctl instead)</li><li>ddd</li><li>ksysmoops</li><li>xev</li><li>GUI tools (because Photon OS has no GUI)</li></ul></div><div class=td-content style=page-break-before:always><h1 id=pg-e6dc8e85bd84cbb48db5ca550e3adf9c>5 - Systemd</h1><p>Photon OS manages services with <code>systemd</code> and <code>systemctl</code>, its command-line utility for inspecting and controlling the system. It does not use the deprecated commands of <code>init.d</code>.</p><p>Basic system administration commands on Photon OS differ from those on operating systems that use SysVinit. Since Photon OS uses systemd instead of SysVinit, you must use systemd commands to manage services.</p><p>For example, instead of running the /etc/init.d/ssh script to stop and start the OpenSSH server on a init.d-based Linux system, you control the service by running the following systemctl commands on Photon OS:</p><pre><code>systemctl stop sshd
systemctl start sshd
</code></pre><p>For an overview of systemd, see <a href=https://www.freedesktop.org/wiki/Software/systemd/>systemd System and Service Manager</a> and the <a href=https://www.freedesktop.org/software/systemd/man/systemd.html>man page for systemd</a>. The systemd man pages are listed at <a href=https://www.freedesktop.org/software/systemd/man/>https://www.freedesktop.org/software/systemd/man/</a>.</p></div><div class=td-content style=page-break-before:always><h1 id=pg-45a60780101b99e8a21a9620bfe7ca73>5.1 - Enabling 'systemd' Debug Shell During Boot</h1><p>To diagnose <code>systemd</code> related boot issues, you can enable early shell access during boot.</p><p>Perform the following steps to enable early shell access:</p><ol><li><p>Restart the Photon OS machine or the virtual machine running Photon OS.</p><p>When the Photon OS splash screen appears, as it restarts, type the letter <code>e</code> quickly.</p></li><li><p>Append <code>systemd.debug-shell=1</code> to the kernel command line.</p><p>Optionally, to change logging level to debug, you can append <code>systemd.log_level=debug</code>.</p></li><li><p>Press <code>F10</code> to proceed with the boot.</p></li><li><p>Press <code>Alt+Ctrl+F9</code> to switch to <code>tty9</code> to access the debug shell.</p></li></ol></div><div class=td-content style=page-break-before:always><h1 id=pg-2222dbb3d5c5a8cb432250b8b95f41ff>5.2 - Troubleshooting Services With 'systemctl'</h1><p>To view a description of all the active, loaded units, execute the systemctl command without any options or arguments:</p><pre><code>systemctl
</code></pre><p>To see all the loaded, active, and inactive units and their description, run this command:</p><pre><code>systemctl --all
</code></pre><p>To see all the unit files and their current status but no description, run this command:</p><pre><code>systemctl list-unit-files
</code></pre><p>The <code>grep</code> command filters the services by a search term, a helpful tactic to recall the exact name of a unit file without looking through a long list of names. Example:</p><pre><code>systemctl list-unit-files | grep network
org.freedesktop.network1.busname           static
dbus-org.freedesktop.network1.service      enabled
systemd-networkd-wait-online.service       enabled
systemd-networkd.service                   enabled
systemd-networkd.socket                    enabled
network-online.target                      static
network-pre.target                         static
network.target  
</code></pre><p>For example, to list all the services that you can manage on Photon OS, you run the following command instead of <code>ls /etc/rc.d/init.d/</code>:</p><pre><code>systemctl list-unit-files --type=service
</code></pre><p>Similarly, to check whether the <code>sshd</code> service is enabled, on Photon OS you run the following command instead of <code>chkconfig sshd</code>:</p><pre><code>systemctl is-enabled sshd
</code></pre><p>The <code>chkconfig --list</code> command that shows which services are enabled for which runlevel on a SysVinit computer becomes substantially different on Photon OS because there are no runlevels, only targets:</p><pre><code>ls /etc/systemd/system/*.wants
</code></pre><p>You can also display similar information with the following command:</p><pre><code>systemctl list-unit-files --type=service
</code></pre><p>The following is list of some of the systemd commands that take the place of <code>SysVinit</code> commands on Photon OS:</p><pre><code>USE THIS SYSTEMD COMMAND 	INSTEAD OF THIS SYSVINIT COMMAND
systemctl start sshd 		service sshd start
systemctl stop sshd 		service sshd stop
systemctl restart sshd 		service sshd restart
systemctl reload sshd 		service sshd reload
systemctl condrestart sshd 	service sshd condrestart
systemctl status sshd 		service sshd status
systemctl enable sshd 		chkconfig sshd on
systemctl disable sshd 		chkconfig sshd off
systemctl daemon-reload		chkconfig sshd --add
</code></pre></div><div class=td-content style=page-break-before:always><h1 id=pg-37ee182b89ad2f34aa7aafa527b6186b>5.3 - Analyzing System Logs with 'journalctl'</h1><p>The journalctl tool queries the contents of the systemd journal. On Photon OS, all the system logs except the installation log and the cloud-init log are written into the systemd journal.</p><p>When you run the <code>journalctl</code> command without any parameters, it displays all the contents of the journal, beginning with the oldest entry.</p><p>To display the output in reverse order with new entries first, include the <code>-r</code> option in the command:</p><pre><code class=language-console data-lang=console>journalctl -r
</code></pre><p>The <code>journalctl</code> command includes many options to filter its output. For help troubleshooting systemd, two journalctl queries are particularly useful:</p><ul><li><p>Showing the log entries for the last boot.</p><p>The following command displays the messages that systemd generated during the last time the machine started:</p></li></ul><pre><code class=language-console data-lang=console>journalctl -b
</code></pre><ul><li><p>Showing the log entries for a systemd service unit.Item</p><p>The following command reveals the messages for only the systemd service unit specified by the <code>-u</code> option, which in the following example is the auditing service:</p></li></ul><pre><code class=language-console data-lang=console>journalctl -u auditd
</code></pre><p>You can look at the messages for systemd itself or for the network service:</p><pre><code class=language-console data-lang=console>journalctl -u systemd
journalctl -u systemd-networkd
</code></pre><p>Example:</p><pre><code class=language-console data-lang=console>root@photon-1a0375a0392e [ ~ ]# journalctl -u systemd-networkd
-- Logs begin at Tue 2016-08-23 14:35:50 UTC, end at Tue 2016-08-23 23:45:44 UTC. --
Aug 23 14:35:52 photon-1a0375a0392e systemd[1]: Starting Network Service...
Aug 23 14:35:52 photon-1a0375a0392e systemd-networkd[458]: Enumeration completed
Aug 23 14:35:52 photon-1a0375a0392e systemd[1]: Started Network Service.
Aug 23 14:35:52 photon-1a0375a0392e systemd-networkd[458]: eth0: Gained carrier
Aug 23 14:35:53 photon-1a0375a0392e systemd-networkd[458]: eth0: DHCPv4 address 198.51.100.1
Aug 23 14:35:54 photon-1a0375a0392e systemd-networkd[458]: eth0: Gained IPv6LL
Aug 23 14:35:54 photon-1a0375a0392e systemd-networkd[458]: eth0: Configured
</code></pre><p>For more information, see <a href=https://www.freedesktop.org/software/systemd/man/journalctl.html>journalctl</a> or the journalctl man page by running this command: <code>man journalctl</code></p></div><div class=td-content style=page-break-before:always><h1 id=pg-a3e35c7adc2aa5828f3d0a03d03c0bf3>5.4 - Inspecting Services with 'systemd-analyze'</h1><p>The <code>systemd-analyze</code> command reveals performance statistics for boot times, traces system services, and verifies unit files. It can help troubleshoot slow system boots and incorrect unit files. See the man page for a list of options.</p><p>Examples:</p><pre><code>systemd-analyze blame

systemd-analyze dump</code></pre></div><div class=td-content style=page-break-before:always><h1 id=pg-21502ba89b3fba5480b548821dfd1e69>5.5 - Inspecting Services with 'systemd-analyze'</h1><p>systemd is a suite of basic building blocks for a Linux system. It provides a system and service manager that runs as Process ID 1 and starts the rest of the system.</p><p>To manage the services run the following commands:</p><ul><li><code>systemctl</code> or <code>systemctl list-units</code> : This command lists the running units.</li><li><code>systemctl --failed</code> : This command lists failed units.</li><li><code>systemctl list-unit-files</code> : This command lists all the installed unit files. The unit files are usually present in <strong>/usr/lib/systemd/system/</strong> and <strong>/etc/systemd/system/</strong>.</li><li><code>systemctl status pid</code> : This command displays the cgroup slice, memory and parent for a PID.</li><li><code>systemctl start unit</code> : This command starts a unit immediately.</li><li><code>systemctl stop unit</code> : This command stops a unit.</li><li><code>systemctl restart unit</code> : This command restarts a unit.</li><li><code>systemctl reload unit</code> : This command asks a unit to reload its configuration.</li><li><code>systemctl status unit</code> : This command displays the status of a unit.</li><li><code>systemctl enable unit</code> : This command enables a unit to run on startup.</li><li><code>systemctl enable --now unit</code> : This command enables a unit to run on startup and start immediately.</li><li><code>systemctl disable unit</code> : This command disables a unit and removes it from the startup program.</li><li><code>systemctl mask unit</code> : This command masks a unit to make it impossible to start.</li><li><code>systemctl unmask unit</code> : This command unmasks a unit.</li></ul><p>To get an overview of the system boot-up time, run the following command:</p><pre><code>systemd-analyze
</code></pre><p>To view a list of all running units, sorted by the time they took to initialize (highest time on top), run the following command:</p><pre><code>systemd-analyze blame
</code></pre></div><div class=td-content style=page-break-before:always><h1 id=pg-641b474d7b8d4100941d5a2750526038>6 - Network Troubleshooting</h1><p>Use the <code>systemd</code> suite of commands and not deprecated <code>init.d</code> commands or other deprecated commands, to manage networking.</p><ul><li><a href=../../../docs/troubleshooting-guide/network-troubleshooting/managing-the-network-configuration/>Managing the Network Configuration</a></li><li><a href=../../../docs/troubleshooting-guide/network-troubleshooting/inspecting-ip-addresses/>Inspecting IP Addresses</a></li><li><a href=../../../docs/troubleshooting-guide/network-troubleshooting/inspecting-network-links-with-networkctl/>Inspecting the Status of Network Links with <code>networkctl</code></a></li><li><a href=../../../docs/troubleshooting-guide/network-troubleshooting/network-debugging/>Network Debugging</a></li><li><a href=../../../docs/troubleshooting-guide/network-troubleshooting/checking-firewall-rules/>Checking Firewall Rules</a></li><li><a href=../../../docs/troubleshooting-guide/network-troubleshooting/inspect-network-settings-with-netmgr/>Inspect Network Settings with <code>netmgr</code></a></li></ul><p>For information about tcpdump and netcat, see <a href=../../../docs/administration-guide/managing-network-configuration/installing-the-packages-for-tcpdump-and-netcat-with-tdnf/>Installing the Packages for tcpdump and netcat with tdnf</a></p></div><div class=td-content style=page-break-before:always><h1 id=pg-7443880a71f96c7150bcd520d1ab0dd2>6.1 - Managing the Network Configuration</h1><p>The network service, which is enabled by default, starts when the system boots. You manage the network service by using systemd commands, such as <code>systemd-networkd</code>, <code>systemd-resolvd</code>, and <code>networkctl</code>.</p><p>You can check the status of the network service by running the following command:</p><pre><code>systemctl status systemd-networkd
</code></pre><p>The following is a result of the command:</p><pre><code>* systemd-networkd.service - Network Service
   Loaded: loaded (/usr/lib/systemd/system/systemd-networkd.service; enabled; vendor preset: enabled)
   Active: active (running) since Fri 2016-04-29 15:08:51 UTC; 6 days ago
     Docs: man:systemd-networkd.service(8)
 Main PID: 291 (systemd-network)
   Status: &quot;Processing requests...&quot;
   CGroup: /system.slice/systemd-networkd.service
           `-291 /lib/systemd/systemd-networkd
</code></pre></div><div class=td-content style=page-break-before:always><h1 id=pg-86f4c5c53619c0832267e20fef9c5119>6.2 - Inspecting IP Addresses</h1><p>VMware recommends that you use the <code>ip</code> or <code>ss</code> commands as the <code>ifconfig</code> and <code>netstat</code> commands are deprecated.</p><p>To display a list of network interfaces, run the <code>ss</code> command. Similarly, to display information for IP addresses, run the <code>ip addr</code> command.</p><p>Examples:</p><pre><code>USE THIS IPROUTE COMMAND 	INSTEAD OF THIS NET-TOOL COMMAND
ip addr 					ifconfig -a
ss 							netstat
ip route 					route
ip maddr 					netstat -g
ip link set eth0 up 		ifconfig eth0 up
ip -s neigh					arp -v
ip link set eth0 mtu 9000	ifconfig eth0 mtu 9000
</code></pre><p>Use the <code>ip route</code> version of a command instead of the net-tools to get accurate information:</p><pre><code>ip neigh
198.51.100.2 dev eth0 lladdr 00:50:56:e2:02:0f STALE
198.51.100.254 dev eth0 lladdr 00:50:56:e7:13:d9 STALE
198.51.100.1 dev eth0 lladdr 00:50:56:c0:00:08 DELAY

arp -a
? (198.51.100.2) at 00:50:56:e2:02:0f [ether] on eth0
? (198.51.100.254) at 00:50:56:e7:13:d9 [ether] on eth0
? (198.51.100.1) at 00:50:56:c0:00:08 [ether] on eth0
</code></pre><p><strong>Important:</strong> If you modify an IPv6 configuration or add an IPv6 interface, you must restart <code>systemd-networkd</code>. Traditional methods of using <code>ifconfig</code> commands will be inadequate to register the changes. Run the following command instead:</p><pre><code>systemctl restart systemd-networkd
</code></pre></div><div class=td-content style=page-break-before:always><h1 id=pg-7bdf729c29d245264a8c0847b910259e>6.3 - Inspecting the Status of Network Links with 'networkctl'</h1><p>The <code>networkctl</code> command displays information about network connections that helps you configure networking services and troubleshoot networking problems.</p><p>You can progressively add options and arguments to the <code>networkctl</code> command to move from general information about network connections to specific information about a network connection.</p><p>Running <code>networkctl</code> without options defaults to the list command:</p><pre><code>networkctl
IDX LINK             TYPE               OPERATIONAL SETUP
  1 lo               loopback           carrier     unmanaged
  2 eth0             ether              routable    configured
  3 docker0          ether              routable    unmanaged
 11 vethb0aa7a6      ether              degraded    unmanaged
 4 links listed.
</code></pre><p>Run the <code>networkctl</code> with the status command to display active network links with IP addresses for not only the Ethernet connection, but also the Docker container.</p><pre><code>root@photon-rc [ ~ ]# networkctl status
*      State: routable
     Address: 198.51.100.131 on eth0
              172.17.0.1 on docker0
              fe80::20c:29ff:fe55:3ca6 on eth0
              fe80::42:f0ff:fef7:bd81 on docker0
              fe80::4c84:caff:fe76:a23f on vethb0aa7a6
     Gateway: 198.51.100.2 on eth0
         DNS: 198.51.100.2
</code></pre><p>You can add a network link, such as the Ethernet connection, as the argument of the status command to show specific information about the link:</p><pre><code>root@photon-rc [ ~ ]# networkctl status eth0
* 2: eth0
       Link File: /usr/lib/systemd/network/99-default.link
    Network File: /etc/systemd/network/10-dhcp-en.network
            Type: ether
           State: routable (configured)
            Path: pci-0000:02:01.0
          Driver: e1000
      HW Address: 00:0c:29:55:3c:a6 (VMware, Inc.)
             MTU: 1500
         Address: 198.51.100.131
                  fe80::20c:29ff:fe55:3ca6
         Gateway: 198.51.100.2
             DNS: 198.51.100.2
        CLIENTID: ffb6220feb00020000ab116724f520a0a77337
</code></pre><p>You can add a Docker container as follows:</p><pre><code>networkctl status docker0
* 3: docker0
       Link File: /usr/lib/systemd/network/99-default.link
    Network File: n/a
            Type: ether
           State: routable (unmanaged)
          Driver: bridge
      HW Address: 02:42:f0:f7:bd:81
             MTU: 1500
         Address: 172.17.0.1
                  fe80::42:f0ff:fef7:bd81
</code></pre><p>In the example above, the output indicates that state of the Docker container is unmanaged. Docker uses the bridge drive to handle managing the networking for the containers and not <code>systemd-resolved</code> or <code>systemd-networkd</code>.</p><p>For more information about <code>networkctl</code> commands and options, see <a href=https://www.freedesktop.org/software/systemd/man/networkctl.html>https://www.freedesktop.org/software/systemd/man/networkctl.html</a>.</p></div><div class=td-content style=page-break-before:always><h1 id=pg-ead329f4a50d05b1e092b3096d4f90b4>6.4 - Network Debugging</h1><p>You can set <code>systemd-networkd</code> to work in debug mode so that you can analyze log files with debugging information to help troubleshoot networking problems.</p><p>The following procedure turns on network debugging by adding a drop-in file in <code>/etc/systemd</code> to customize the default systemd configuration in <code>/usr/lib/systemd</code>.</p><ol><li><p>Run the following command as root to create a directory with this exact name, including the <code>.d</code> extension:</p><pre><code class=language-console data-lang=console>mkdir -p /etc/systemd/system/systemd-networkd.service.d/
</code></pre><p>``</p></li><li><p>Run the following command as root to establish a systemd drop-in unit with a debugging configuration for the network service:</p><pre><code class=language-console data-lang=console>cat &gt; /etc/systemd/system/systemd-networkd.service.d/10-loglevel-debug.conf &lt;&lt; &quot;EOF&quot;
    vice]
    ronment=SYSTEMD_LOG_LEVEL=debug
    </code></pre></li><li><p>Reload the <code>systemctl</code> daemon and restart the <code>systemd-networkd</code> service for the changes to take effect:</p><pre><code class=language-console data-lang=console>systemctl daemon-reload
systemctl restart systemd-networkd
</code></pre></li><li><p>Verify that your changes took effect:</p><pre><code class=language-console data-lang=console>systemd-delta --type=extended`
</code></pre><p>``</p></li><li><p>View the log files by running this command:</p><pre><code class=language-console data-lang=console>journalctl -u systemd-networkd`
</code></pre><p>``</p></li><li><p>After debugging the network connections, turn debugging off by deleting the drop-in file:</p><pre><code class=language-console data-lang=console>rm /etc/systemd/system/systemd-networkd.service.d/10-loglevel-debug.conf
</code></pre><p>``</p></li></ol></div><div class=td-content style=page-break-before:always><h1 id=pg-6c30537e08221469979d45c47f7dc8c4>6.5 - Checking Firewall Rules</h1><p>The design of Photon OS emphasizes security. On the minimal and full versions of Photon OS, the default security policy turns on the firewall and drops packets from external interfaces and applications. As a result, you might need to add rules to iptables to permit forwarding, allow protocols like HTTP, and open ports. In other words, you must configure the firewall for your applications and requirements.</p><p>The default iptables settings on the full version look like this:</p><pre><code class=language-console data-lang=console>iptables --list
Chain INPUT (policy DROP)
target     prot opt source               destination
ACCEPT     all  --  anywhere             anywhere
ACCEPT     all  --  anywhere             anywhere             ctstate RELATED,ESTABLISHED
ACCEPT     tcp  --  anywhere             anywhere             tcp dpt:ssh

Chain FORWARD (policy DROP)
target     prot opt source               destination

Chain OUTPUT (policy DROP)
target     prot opt source               destination
ACCEPT     all  --  anywhere             anywhere
</code></pre><p>To find out how to adjust the settings, see the <code>man</code> page for <code>iptables</code>.</p><p>Although the default iptables policy accepts SSH connections, the <code>sshd</code> configuration file on the full version of Photon OS is set to reject SSH connections. See <a href=../../../docs/troubleshooting-guide/solutions-to-common-problems/permitting-root-login-with-ssh/>Permitting Root Login with SSH</a>.</p><p>If you are unable to ping a Photon OS machine, check the firewall rules. Verify if the rules allow connectivity for the port and protocol.</p><p>You can supplement the <code>iptables</code> commands by using <code>lsof</code> to, for instance, see the processes listening on ports:</p><pre><code class=language-console data-lang=console>	lsof -i -P -n
</code></pre></div><div class=td-content style=page-break-before:always><h1 id=pg-46e6e1e0a8903d55cdd88d1f424ce291>6.6 - Inspect Network Settings with 'netmgr'</h1><p>If you are running a VMware appliance on Photon OS and the VAMI module has problems or if there are networking issues, you can use the Photon OS <code>netmgr</code> utility to inspect the networking settings. Make sure that the IP addresses for the DNS server and other infrastructure are correct. Use <code>tcpdump</code> to analyze the issues.</p><p>The error code that you get from netmgr is a standard Unix error code. Enter it into a search engine to obtain more information on the error.</p></div><div class=td-content style=page-break-before:always><h1 id=pg-9bc167ac28d85c2f0972b58d26097676>7 - File System Troubleshooting</h1><p>Photon OS includes commands to check and troubleshoot file systems.</p></div><div class=td-content><h1 id=pg-47439fb3c02145fdc25f8c11bf0b5e3f>7.1 - Checking Disk Space</h1><p>One of the first simple steps to take while troubleshooting is to check how much disk space is available by running the <code>df</code> command:</p><pre><code>df -h</code></pre></div><div class=td-content style=page-break-before:always><h1 id=pg-abc971fcad72a9dad157e05c66304fb6>7.2 - Adding a Disk and Partitioning It</h1><p>If the <code>df</code> command shows that the file system is indeed nearing capacity, you can add a new disk on the fly and partition it to increase capacity.</p><ol><li><p>Add a new disk.</p><p>For example, you can add a new disk to a virtual machine by using the VMware vSphere Client. After adding a new disk, check for the new disk by using <code>fdisk</code>. In the following example, the new disk is named <code>/dev/sdb</code>:</p></li></ol><pre><code class=language-console data-lang=console>fdisk -l
Device        Start      End  Sectors Size Type
/dev/sda1      2048 16771071 16769024   8G Linux filesystem
/dev/sda2  16771072 16777182     6111   3M BIOS boot

Disk /dev/sdb: 1 GiB, 1073741824 bytes, 2097152 sectors
Units: sectors of 1 * 512 = 512 bytes
Sector size (logical/physical): 512 bytes / 512 bytes
I/O size (minimum/optimal): 512 bytes / 512 bytes
</code></pre><ol><li><p>Partition it with the <code>parted</code> wizard.</p><p>The command to partition the disk on Photon OS is as follows:</p></li></ol><pre><code class=language-console data-lang=console>parted /dev/sdb
</code></pre><p>Use the <code>parted</code> wizard to create it as follows:</p><pre><code class=language-console data-lang=console>mklabel gpt
mkpart ext3 1 1024
</code></pre><ol><li>Create a file system on the partition:</li></ol><pre><code class=language-console data-lang=console>mkfs -t ext3 /dev/sdb1
</code></pre><ol><li>Make a directory where you will mount the new file system:</li></ol><pre><code class=language-console data-lang=console>mkdir /newdata
</code></pre><ol><li>Open <code>/etc/fstab</code> and add the new file system with the options that you require:</li></ol><pre><code class=language-console data-lang=console>	#system mnt-pt  type    options dump    fsck
	/dev/sda1       /       ext4    defaults,barrier,noatime,noacl,data=ord$
	/dev/cdrom      /mnt/cdrom      iso9660 ro,noauto       0       0
	/dev/sdb1       /newdata        ext3    defaults        0		0
</code></pre><ol><li>Mount it using the following command:</li></ol><pre><code class=language-console data-lang=console>mount /newdata
</code></pre><p>Verify the results:</p><pre><code class=language-console data-lang=console>df -h
	Filesystem      Size  Used Avail Use% Mounted on
	/dev/root       7.8G  4.4G  3.1G  59% /
	devtmpfs        172M     0  172M   0% /dev
	tmpfs           173M     0  173M   0% /dev/shm
	tmpfs           173M  664K  172M   1% /run
	tmpfs           173M     0  173M   0% /sys/fs/cgroup
	tmpfs           173M   36K  173M   1% /tmp
	tmpfs            35M     0   35M   0% /run/user/0
	/dev/sdb1       945M  1.3M  895M   1% /newdata
</code></pre></div><div class=td-content style=page-break-before:always><h1 id=pg-4a539020bc72ef2270f43ba0b05f0192>7.3 - Expanding Disk Partition</h1><p>If you require more space, you can expand the last partition of your disk after resizing the disk.</p><p>The commands in this section assume <code>sda</code> as disk device.</p><ol><li>After the disk is resized in the virtual machine, use the following command to enable the system to recognize the new disk ending boundary without rebooting:</li></ol><pre><code class=language-console data-lang=console>echo 1 &gt; /sys/class/block/sda/device/rescan
</code></pre><ol start=2><li>Install the <code>parted</code> package to resize the disk partition by running the following command to install it:</li></ol><pre><code class=language-console data-lang=console>tdnf install parted.
parted /dev/sda

GNU Parted 3.2
Using /dev/sda
Welcome to GNU Parted! Type 'help' to view a list of commands.
</code></pre><ol start=3><li>List all partitions available to fix the GPT and check the last partition number:</li></ol><pre><code>(parted) print

Warning: Not all of the space available to /dev/sda appears to be used, you can
fix the GPT to use all of the space (an extra 4194304 blocks) or continue with
the current setting? 
Fix/Ignore?

Press `f` to fix the GPT layout.

Model: VMware Virtual disk (scsi)
Disk /dev/sda: 34.4GB
Sector size (logical/physical): 512B/512B
Partition Table: gpt
Disk Flags: 

Number  Start   End     Size    File system  Name  Flags
1      1049kB  3146kB  2097kB                     bios_grub
2      3146kB  8590MB  8587MB  ext4

</code></pre><p>In this case we have the partition <code>2</code> as last, then we extend the partition to 100% of the remaining size:</p><pre><code class=language-console data-lang=console>(parted) resizepart 2 100%
</code></pre><ol start=4><li>Expand the filesystem to the new size:</li></ol><pre><code class=language-console data-lang=console>resize2fs /dev/sda2
	resize2fs 1.42.13 (17-May-2015)
	Filesystem at /dev/sda2 is mounted on /; on-line resizing required
	old_desc_blocks = 1, new_desc_blocks = 2
	The filesystem on /dev/sda2 is now 8387835 (4k) blocks long.
</code></pre><p>The new space is already available in the system:</p><pre><code class=language-console data-lang=console>df -h
	Filesystem      Size  Used Avail Use% Mounted on
	/dev/root        32G  412M   30G   2% /
	devtmpfs       1001M     0 1001M   0% /dev
	tmpfs          1003M     0 1003M   0% /dev/shm
	tmpfs          1003M  252K 1003M   1% /run
	tmpfs          1003M     0 1003M   0% /sys/fs/cgroup
	tmpfs          1003M     0 1003M   0% /tmp
	tmpfs           201M     0  201M   0% /run/user/0
</code></pre></div><div class=td-content style=page-break-before:always><h1 id=pg-3affa41adcd49c9555f8960c2615e3aa>7.4 - List Disk Partitions with 'fdisk'</h1><p>The <code>fdisk</code> command manipulates the disk partition table. You can, for example, use <code>fdisk</code> to list the disk partitions so that you can identify the root Linux file system.</p><p>The following example shows <code>/dev/sda1</code> to be the root Linux partition:</p><pre><code class=language-console data-lang=console>fdisk -l
	Disk /dev/ram0: 4 MiB, 4194304 bytes, 8192 sectors
	Units: sectors of 1 * 512 = 512 bytes
	Sector size (logical/physical): 512 bytes / 4096 bytes
	I/O size (minimum/optimal): 4096 bytes / 4096 bytes

	...
	
	Disk /dev/sda: 8 GiB, 8589934592 bytes, 16777216 sectors
	Units: sectors of 1 * 512 = 512 bytes
	Sector size (logical/physical): 512 bytes / 512 bytes
	I/O size (minimum/optimal): 512 bytes / 512 bytes
	Disklabel type: gpt
	Disk identifier: 3CFA568B-2C89-4290-8B52-548732A3972D

	Device        Start      End  Sectors Size Type
	/dev/sda1      2048 16771071 16769024   8G Linux filesystem
	/dev/sda2  16771072 16777182     6111   3M BIOS boot
</code></pre></div><div class=td-content style=page-break-before:always><h1 id=pg-497391c40467e0c63cef258c129588cd>7.5 - File System Consistency Check Tool</h1><p>You can manually check the file system by using the file system consistency check tool, <code>fsck</code>, after you unmount the file system.</p><p>The Photon OS file system includes btrfs and ext4. The default root file system is ext4, which you can see by looking at the file system configuration file, <code>/etc/fstab</code>:</p><pre><code class=language-console data-lang=console>cat /etc/fstab
	#system mnt-pt  type    options dump    fsck
	/dev/sda1       /       ext4    defaults,barrier,noatime,noacl,data=ordered     1       1
	/dev/cdrom      /mnt/cdrom      iso9660 ro,noauto       0       0
</code></pre><p>The <code>1</code> in the fifth column, under <code>fsck</code>, indicates that fsck checks the file system when the system boots.</p><p>You can also perform a read-only check without unmounting it:</p><pre><code class=language-console data-lang=console>fsck -nf /dev/sda1
	fsck from util-linux 2.27.1
	e2fsck 1.42.13 (17-May-2015)
	Warning!  /dev/sda1 is mounted.
	Warning: skipping journal recovery because doing a read-only filesystem check.
	Pass 1: Checking inodes, blocks, and sizes
	Pass 2: Checking directory structure
	Pass 3: Checking directory connectivity
	Pass 4: Checking reference counts
	Pass 5: Checking group summary information
	Free blocks count wrong (1439651, counted=1423942).
	Fix? no
	Free inodes count wrong (428404, counted=428397).
	Fix? no
	/dev/sda1: 95884/524288 files (0.3% non-contiguous), 656477/2096128 blocks
</code></pre><p>The inodes count might be wrong because the file system is mounted and in use.</p><p>To fix errors, you must first unmount the file system and then run fsck again:</p><pre><code class=language-console data-lang=console>umount /dev/sda1
umount: /: target is busy
</code></pre><p>You can find information about processes that use the device by using <code>lsof</code> or <code>fuser</code>.</p><pre><code class=language-console data-lang=console>lsof | grep ^jbd2/sd
	jbd2/sda1   99                root  cwd       DIR                8,1     4096          2 /
	jbd2/sda1   99                root  rtd       DIR                8,1     4096          2 /
	jbd2/sda1   99                root  txt   unknown                                        /proc/99/exe
</code></pre><p>The above example indicates that file system is in use.</p></div><div class=td-content style=page-break-before:always><h1 id=pg-0d8a66f1aaaa1d930b395e737a470b71>7.6 - Fixing File System Errors When fsck Fails</h1><p>Sometimes when <code>fsck</code> runs during startup, it encounters an error that prevents the system from fully booting until you fix the issue by running <code>fsck</code> manually. This error might occur when Photon OS is the operating system for a VM running an appliance.</p><p>If <code>fsck</code> fails when the computer boots and an error message says to run fsck manually, you can troubleshoot by restarting the VM, altering the GRUB edit menu to enter emergency mode before Photon OS fully boots, and running <code>fsck</code>.</p><p>Perform the following steps:</p><ol><li><p>Take a snapshot of the virtual machine.</p></li><li><p>Restart the virtual machine running Photon OS.</p><p>When the Photon OS splash screen appears as it restarts, type the letter <code>e</code> quickly to go to the <code>GNU GRUB</code> edit menu.</p><p><strong>Note</strong>: You must type <code>e</code> quickly as Photon OS reboots quickly. Also, in VMware vSphere or VMware Workstation Pro, you might have to give the console focus by clicking in its window before it will register input from the keyboard.</p></li><li><p>In the <code>GNU GRUB</code> edit menu, go to the end of the line that starts with <code>linux</code>, add a space, and then add the following code exactly as it appears below:</p><p><code>systemd.unit=emergency.target</code></p></li><li><p>Type <code>F10</code>.</p></li><li><p>In the bash shell, run one of the following commands to fix the file system errors, depending on whether <code>sda1</code> or <code>sda2</code> represents the root file system:</p><p><code>e2fsck -y /dev/sda1</code></p><p>or</p><p><code>e2fsck -y /dev/sda2</code></p></li><li><p>Restart the virtual machine.
If the virtual machine fails to boot and finds any error then follow the steps below to recover.</p></li><li><p>Log in to the root shell:
Command>shell
root@vc701-w4#</p></li><li><p>To know about the error, execute the following command:
<code>journalctl -b 0 | grep -i “failed to start”</code></p><p>Below is output of above command:
<img src=../../../docs/images/fsck-fails alt="Output for the journalctl -b 0 | grep -i “failed to start” command"></p></li><li><p>Referring to the <code>Failed to start the file system check on /dev/log_vg/log</code> error in the screenshot above, if the partition type is logical volume, then the device mapper modules create a device-special file <code>/dev/dm-X</code> to which symbolic links with the original names points to <code>/dev/mapper/log_vg-log or /dev/log_vg/log</code>. Here <code>log_vg</code> is volume group and <code>log</code> is logical volume name.</p></li><li><p>Execute the <code>lsblk</code> command to confirm the device type.
Below is the output of <code>lsblk</code> command. Here <code>log_vg-log</code> is associated with the device <code>sde</code> and type <code>lvm</code>. Also, note that it is not mounted.
<img src=../../../docs/images/lsblk-command alt="lsblk command output"></p></li><li><p>Execute the following command to fix the file system errors:
<code>e2fsck /dev/log_vg/log</code></p></li><li><p>Restart the virtual machine.</p></li></ol></div><div class=td-content style=page-break-before:always><h1 id=pg-45fccef9bd97bc1ac84237b20daca982>8 - Troubleshooting Packages</h1><p>On Photon OS, <code>tdnf</code> is the default package manager. The standard syntax for <code>tdnf</code> commands is the same as that for DNF and Yum:</p><pre><code class=language-console data-lang=console>tdnf [options] &lt;command&gt; [&lt;arguments&gt;...]
</code></pre><p>The main configuration files reside in <code>/etc/tdnf/tdnf.conf</code>. The repositories appear in <code>/etc/yum.repos.d/</code> with <code>.repo</code> file extensions. For more information, see the <a href=../../../docs/administration-guide/>Photon OS Administration Guide</a>.</p><p>The cache files for data and metadata reside in <code>/var/cache/tdnf</code>. The local cache is populated with data from the repository:</p><pre><code class=language-console data-lang=console>ls -l /var/cache/tdnf/photon
	total 8
	drwxr-xr-x 2 root root 4096 May 18 22:52 repodata
	d-wxr----t 3 root root 4096 May  3 22:51 rpms
</code></pre><p>You can clear the cache to help troubleshoot a problem, but doing so might slow the performance of <code>tdnf</code> until the cache becomes repopulated with data. Cleaning the cache can remove stale information. Clear the cache as follows:</p><pre><code class=language-console data-lang=console>tdnf clean all
	Cleaning repos: photon photon-extras photon-updates 
	Cleaning up everything
</code></pre><p>Some tdnf commands can help you troubleshoot problems with packages:</p><ul><li><p><code>makecache</code></p><p>This command updates the cached binary metadata for all known repositories. You can run it after you clean the cache to make sure you are working with the latest repository data as you troubleshoot.</p><p>Example:</p><pre><code>tdnf makecache
        Refreshing metadata for: 'VMware Photon Linux 1.0(x86_64)Updates'
        Refreshing metadata for: 'VMware Photon Extras 1.0(x86_64)'
        Refreshing metadata for: 'VMware Photon Linux 1.0(x86_64)'
        Metadata cache created.
</code></pre></li><li><p><code>tdnf check-local</code></p><p>This command resolves dependencies by using the local RPMs to help check RPMs for quality assurance before publishing them. To check RPMs with this command, you must create a local directory and place your RPMs in it. The command, which includes no options, takes the path to the local directory containing the RPMs as its argument. The command does not, however, recursively parse directories; it checks the RPMs only in the directory that you specify.</p><p>For example, after creating a directory named <code>/tmp/myrpms</code> and placing your RPMs in it, you can run the following command to check them:</p><pre><code>tdnf check-local /tmp/myrpms
    ing all packages from: /tmp/myrpms
     10 packages
     completed without issues
</code></pre><pre><code>
</code></pre></li><li><p><code>tdnf provides</code></p><p>This command finds the packages that provide the package that you supply as an argument. If you are used to a package name for another system, you can use <code>tdnf provides</code> to find the corresponding name of the package on Photon OS.</p><p>Example:</p><pre><code>tdnf provides docker
    r-1.11.0-1.ph1.x86_64 : Docker
        : photon
    r-1.11.0-1.ph1.x86_64 : Docker
        : @System
</code></pre><pre><code>
 For a file, you must provide the full path. Example: 

</code></pre><pre><code> tdnf provides /usr/include/stdio.h
     glibc-devel-2.22-8.ph1.x86_64 : Header files for glibc
     Repo     : photon
     glibc-devel-2.22-8.ph1.x86_64 : Header files for glibc
     Repo     : @System
</code></pre><pre><code>
 The following example shows you how to find the package that provides a pluggable authentication module, which you might need to find if the system is mishandling passwords. 

</code></pre><p>tdnf provides /etc/pam.d/system-account
shadow-4.2.1-7.ph1.x86_64 : Programs for handling passwords in a secure way
Repo : photon
shadow-4.2.1-8.ph1.x86_64 : Programs for handling passwords in a secure way
Repo : photon-updates</p><pre><code>
For more commands see the [Photon OS Administration Guide](../../administration-guide/).

</code></pre></li></ul><p>If a package that is installed is not working, try re-installing it.
Example:</p><pre><code>```
tdnf reinstall shadow
	Reinstalling:
	shadow 	x86_64 	4.2.1-7.ph1   3.85 M
```
</code></pre></div><div class=td-content style=page-break-before:always><h1 id=pg-249cb7133f08d5ee19182ae009f48b92>9 - Kernel Problems and Boot and Login Errors</h1><p>Photon OS includes commands to troubleshoot kernel problems and boot and login errors.</p><ul><li><a href=../../../docs/troubleshooting-guide/kernel-problems-and-boot-and-login-errors/kernel-overview/>Kernel Overview</a></li><li><a href=../../../docs/troubleshooting-guide/kernel-problems-and-boot-and-login-errors/boot-process-overview/>Boot Process Overview</a></li><li><a href=../../../docs/troubleshooting-guide/kernel-problems-and-boot-and-login-errors/blank-screen-on-reboot/>Blank Screen on Reboot</a></li><li><a href=../../../docs/troubleshooting-guide/kernel-problems-and-boot-and-login-errors/investigating-strange-behavior/>Investigating Unexpected Behavior</a></li><li><a href=../../../docs/troubleshooting-guide/kernel-problems-and-boot-and-login-errors/investigating-the-guest-kernel/>Investigating the Guest Kernel</a></li><li><a href=../../../docs/troubleshooting-guide/kernel-problems-and-boot-and-login-errors/kernel-log-replication-with-vprobes/>Kernel Log Replication with VProbes</a></li><li><a href=../../../docs/troubleshooting-guide/kernel-problems-and-boot-and-login-errors/troubleshooting-linux-kernel/>Troubleshooting Linux Kernel</a></li></ul></div><div class=td-content><h1 id=pg-fb6a01033307d1364f3304460e9609eb>9.1 - Kernel Overview</h1><p>You can use <code>dmesg</code> command to troubleshooting kernel errors. The <code>dmesg</code> command prints messages from the kernel ring buffer.</p><p>The following command, for example, presents kernel messages in a human-readable format:</p><pre><code>dmesg --human --kernel
</code></pre><p>To examine kernel messages as you perform actions, such as reproducing a problem, in another terminal, you can run the command with the <code>--follow</code> option, which waits for new messages and prints them as they occur:</p><pre><code>dmesg --human --kernel --follow
</code></pre><p>The kernel buffer is limited in memory size. As a result, the kernel cyclically overwrites the end of the information in the buffer from which <code>dmesg</code> pulls information. The systemd journal, however, saves the information from the buffer to a log file so that you can access older information.</p><p>To view it, run the following command:</p><pre><code>journalctl -k
</code></pre><p>If required, you can check the modules that are loaded on your Photon OS machine by running the <code>lsmod</code> command. For example:</p><pre><code>lsmod
Module                  Size  Used by
vmw_vsock_vmci_transport    28672  1
vsock                  36864  2 vmw_vsock_vmci_transport
coretemp               16384  0
hwmon                  16384  1 coretemp
crc32c_intel           24576  0
hid_generic            16384  0
usbhid                 28672  0
hid                   106496  2 hid_generic,usbhid
xt_conntrack           16384  1
iptable_nat            16384  0
nf_conntrack_ipv4      16384  2
nf_defrag_ipv4         16384  1 nf_conntrack_ipv4
nf_nat_ipv4            16384  1 iptable_nat
nf_nat                 24576  1 nf_nat_ipv4
iptable_filter         16384  1
ip_tables              24576  2 iptable_filter,iptable_nat
</code></pre></div><div class=td-content style=page-break-before:always><h1 id=pg-1bc1d49db5f317bcf9d37ee4fbc9e850>9.2 - Boot Process Overview</h1><p>When a Photon OS machine boots, the BIOS initializes the hardware and uses a boot loader to start the kernel. After the kernel starts, <code>systemd</code> takes over and boots the rest of the operating system.</p><p>The BIOS checks the memory and initializes the keyboard, the screen, and other peripherals. When the BIOS finds the first hard disk, the boot loader&ndash;GNU GRUB 2.02&ndash;takes over. From the hard disk, GNU GRUB loads the master boot record (MBR) and initializes the root partition of the random-access memory by using initrd. The device manager, udev, provides initrd with the drivers it needs to access the device containing the root file system. Here&rsquo;s what the GNU GRUB edit menu looks like in Photon OS with its default commands to load the boot record and initialize the RAM disk:</p><p><img src=../../../docs/images/grub-edit-menu-orig.png alt="The GNU GRUB edit menu in Photon OS"></p><p>At this point, the Linux kernel in Photon OS, which is kernel version 4.4.8, takes control. Systemd kicks in, initializes services in parallel, mounts the rest of the file system, and checks the file system for errors.</p></div><div class=td-content style=page-break-before:always><h1 id=pg-d493e733f13166e75be33c14d5041e24>9.3 - Blank Screen on Reboot</h1><p>If the Photon OS kernel enters a state of panic during a reboot and all you see is a blank screen, note the name of the virtual machine running Photon OS and then power off the VM.</p><p>In the host, open the <code>vmware.log</code> file for the VM. When a kernel panics, the guest VM prints the entire kernel log in <code>vmware.log</code> in the host directory containing the VM. This log file contains the output of the <code>dmesg</code> command from the guest, and you can analyze it to help identify the cause of the boot problem.</p><p><strong>Example</strong></p><p>After searching for <code>Guest:</code> in the following abridged <code>vmware.log</code>, this line appears, identifying the root cause of the reboot problem:</p><pre><code class=language-log data-lang=log>2016-08-30T16:02:43.220-07:00| vcpu-0| I125: Guest: 
	&lt;0&gt;[1.125804] Kernel panic - not syncing: 
	VFS: Unable to mount root fs on unknown-block(0,0)
</code></pre><p>Further inspection finds the following lines:</p><pre><code class=language-log data-lang=log>2016-08-30T16:02:43.217-07:00| vcpu-0| I125: Guest: 
&lt;4&gt;[    1.125782] VFS: Cannot open root device &quot;sdc1&quot; or unknown-block(0,0): error -6
2016-08-30T16:02:43.217-07:00| vcpu-0| I125: Guest: 
&lt;4&gt;[    1.125783] Please append a correct &quot;root=&quot; boot option; 
here are the available partitions: 
2016-08-30T16:02:43.217-07:00| vcpu-0| I125: Guest: 
&lt;4&gt;[    1.125785] 0100            4096 ram0  (driver?)
...
0800         8388608 sda  driver: sd
2016-08-30T16:02:43.220-07:00| vcpu-0| I125: Guest: 
&lt;4&gt;[    1.125802]   0801         8384512 sda1 611e2d9a-a3da-4ac7-9eb9-8d09cb151a93
2016-08-30T16:02:43.220-07:00| vcpu-0| I125: Guest: 
&lt;4&gt;[    1.125803]   0802            3055 sda2 8159e59c-b382-40b9-9070-3c5586f3c7d6
</code></pre><p>In this unlikely case, the GRUB configuration points to a root device named <code>sdc1</code> instead of the correct root device, <code>sda1</code>. You can resolve the problem by restoring the GRUB GNU edit screen and the GRUB configuration file (<code>/boot/grub/grub.cfg</code>) to their original configurations.</p></div><div class=td-content style=page-break-before:always><h1 id=pg-acbad8eeeb152ca4b47202019d5e6fbc>9.4 - Investigating Unexpected Behavior</h1><p>If you rebooted to address unexpected behavior before the reboot or if you encountered unexpected behavior during the reboot but have reached the shell, you must analyze what happened since the previous boot.</p><ol><li><p>Run the following command to check the logs:</p><pre><code>`journalctl`
</code></pre></li><li><p>Run the following command to look at what happened since the penultimate reboot:</p><p><code>journalctl --boot=-1</code></p><p>Look at the log from the reboot:</p><p><code>journalctl -b</code></p></li><li><p>If required, examine the logs for the kernel:</p><pre><code>`journalctl -k`
</code></pre></li><li><p>Check which kernel is in use:</p><p><code>uname -r</code></p><p>The kernel version of Photon OS in the full version is 4.4.8. The kernel version of in the OVA version is 4.4.8-esx. With the ESX version of the kernel, some services might not start.</p></li><li><p>Run this command to check the overall status of services:</p><p><code>systemctl status</code></p><p>If a service is in red, check it:</p><pre><code> systemctl status service-name
</code></pre><p>Start it if required:</p><pre><code> systemctl start service-name
</code></pre></li><li><p>If looking at the journal and checking the status of services does not resolve your error, run the following <code>systemd-analyze</code> commands to examine the boot time and the speed with which services start.</p><pre><code>systemd-analyze time
    emd-analyze blame
    emd-analyze critical-chain
</code></pre></li></ol><p><strong>Note</strong>: The output of these commands might be misleading because one service might just be waiting for another service to finish initializing.</p></div><div class=td-content style=page-break-before:always><h1 id=pg-0e252e3664ed9f5e850a0bbbc6d40b21>9.5 - Investigating the Guest Kernel</h1><p>If a VM running Photon OS and an application or virtual appliance is behaving preventing you from logging in to the machine, you can troubleshoot by extracting the kernel logs from the guest&rsquo;s memory and analyzing them with <code>gdb</code>.</p><p>This advanced troubleshooting method works when you are running Photon OS as the operating system for an application or appliance on VMware Workstation, Fusion, or ESXi. The procedure in this section assumes that the virtual machine running Photon OS is functioning normally.</p><p>The process to use this troubleshooting method varies by environment. The examples in this section assume that the troublesome Photon OS virtual machine is running in VMware Workstation 12 Pro on a Microsoft Windows 8 Enterprise host. The examples also use an additional, fully functional Photon OS virtual machine running in Workstation.</p><p>You can use other hosts, hypervisors, and operating systems&ndash;but you will have to adapt the example process below to them. Directory paths, file names, and other aspects might be different on other systems.</p><ul><li><a href=#prerequisites>Prerequisites</a></li><li><a href=#procedure-overview>Procedure Overview</a></li><li><a href=#procedure>Procedure</a></li></ul><h2 id=prerequisites>Prerequisites</h2><p>Verify that you have the following resources:</p><ul><li>Root access to a Linux machine other than the one you are troubleshooting. It can be another Photon OS machine, Ubuntu, or another Linux variant.</li><li>The <code>vmss2core</code> utility from VMware. It is installed by default in VMware Workstation and some other VMware products. If your system doesn&rsquo;t already contain it, you can download it for free from <a href=https://labs.vmware.com/flings/vmss2core>https://labs.vmware.com/flings/vmss2core</a>.</li><li>A local copy of the Photon OS ISO of the exact same version and release number as the Photon OS machine that you are troubleshooting.</li></ul><h2 id=procedure-overview>Procedure Overview</h2><p>The process to apply this troubleshooting method is as follows:</p><ul><li>On a local computer, you open a file on the Photon OS ISO that contains Linux debugging information. Then you suspend the troublesome Photon OS VM and extract the kernel memory logs from the VMware hypervisor running Photon OS.</li><li>Next, you use the vmss2core tool to convert the memory logs into core dump files. The vmss2core utility converts VMware checkpoint state files into formats that third-party debugging tools understand. It can handle both suspend (.vmss) and snapshot (.vmsn) checkpoint state files (hereafter referred to as a <em>vmss file</em>) as well as monolithic and non-monolithic (separate .vmem file) encapsulation of checkpoint state data. See <a href=http://www.vmware.com/pdf/snapshot2core_technote.pdf>Debugging Virtual Machines with the Checkpoint to Core Tool</a>.</li><li>Finally, you prepare to run the gdb tool by using the debug info file from the ISO to create a <code>.gdbinit</code> file, which you can then analyze with the gdb shell on your local Linux machine.</li></ul><p>All three components must be in the same directory on a Linux machine.</p><h2 id=procedure>Procedure</h2><ol><li><p>Obtain a local copy of the Photon OS ISO of the exact same version and release number as the Photon OS machine that you are troubleshooting and mount the ISO on a Linux machine (or open it on a Windows machine):</p><pre><code>mount /mnt/cdrom
</code></pre></li><li><p>Locate the following file. (If you opened the Photon OS ISO on a Windows computer, copy the following file to the root folder of a Linux machine.)</p><pre><code>/RPMS/x86_64/linux-debuginfo-4.4.8-6.ph1.x86_64.rpm
</code></pre></li><li><p>On a Linux machine, run the following <code>rpm2cpio</code> command to convert the RPM file to a cpio file and to extract the contents of the RPM to the current directory:</p><pre><code>rpm2cpio /mnt/cdrom/RPMS/x86_64/linux-debuginfo-4.4.8-6.ph1.x86_64.rpm | cpio -idmv
</code></pre></li><li><p>From the extracted files, copy the following file to your current directory:</p><pre><code>cp usr/lib/debug/lib/modules/4.4.8/vmlinux-4.4.8.debug
</code></pre></li><li><p>Run the following command to download the dmesg functions that will help extract the kernel log from the coredump:</p><pre><code>wget https://www.kernel.org/doc/Documentation/kdump/gdbmacros.txt
wget https://github.com/vmware/photon/blob/master/tools/scripts/gdbmacros-for-linux.txt
</code></pre></li><li><p>Move the file as follows:</p><pre><code>mv gdbmacros-for-linux.txt .gdbinit
</code></pre></li><li><p>Switch to your host machine so you can get the kernel memory files from the VM. Suspend the troublesome VM and locate the <code>.vmss</code> and <code>.vmem</code> files in the virtual machine&rsquo;s directory on the host.</p><p>Example:</p><pre><code>C:\Users\tester\Documents\Virtual Machines\VMware Photon 64-bit (7)&gt;dir
     Volume in drive C is Windows
     Directory of C:\Users\tester\Documents\Virtual Machines\VMware Photon 64-bit
     (7)
    0/2016  12:22 PM    &lt;DIR&gt;          .
    0/2016  12:22 PM    &lt;DIR&gt;          ..
    9/2016  03:39 PM       402,653,184 VMware Photon 64-bit (7)-f6b070cd.vmem
    0/2016  12:11 PM         5,586,907 VMware Photon 64-bit (7)-f6b070cd.vmss
    0/2016  12:11 PM     1,561,001,984 VMware Photon 64-bit (7)-s001.vmdk
        0/2016  12:11 PM           300,430 vmware.log
    </code></pre></li><li><p>Now that you have located the <code>.vmss</code> and <code>.vmem</code> files, convert them to one or more core dump files by using the vmss2core tool that comes with Workstation. Here is an example of how to run the command. Be careful with your pathing, escaping, file names, and so forth&ndash;all of which might be different from this example on your Windows machine.</p><pre><code>
    sers\shoenisch\Documents\Virtual Machines\VMware Photon 64-bit (7)&gt;C:\&quot;Program Files (x86)\VMware\VMware Workstation&quot;\vmss2core.exe &quot;VMware Photon 64-bit (7)-f6b070cd.vmss&quot; &quot;VMware Photon 64-bit (7)-f6b070cd.vmem&quot;

The result of this command is one or more files with a `.core` extension plus a digit. Truncated example: 

    sers\tester\Documents\Virtual Machines\VMware Photon 64-bit (7)&gt;dir
     Directory of C:\Users\tester\Documents\Virtual Machines\VMware Photon 64-bit(7)
    0/2016  12:22 PM       729,706,496 vmss.core0
</code></pre></li><li><p>Copy the <code>.core</code> file or files to the your current directory on the Linux machine where you so that you can analyze it with gdb.</p><p>Run the following <code>gdb</code> command to enter the gdb shell attached to the memory core dump file. You might have to change the name of the <code>vmss.core</code> file in the example to match your <code>.core</code> file:</p></li></ol><pre><code>gdb vmlinux-4.4.8.debug vmss.core0

	GNU gdb (GDB) 7.8.2
	Copyright (C) 2014 Free Software Foundation, Inc.
	License GPLv3+: GNU GPL version 3 or later &lt;http://gnu.org/licenses/gpl.html&gt;
	This is free software: you are free to change and redistribute it. 
	There is NO WARRANTY, to the extent permitted by law. ...
	Type &quot;show configuration&quot; for configuration details.
	For bug reporting instructions, please see:
	&lt;http://www.gnu.org/software/gdb/bugs/&gt;.
	Find the GDB manual and other documentation resources online at: &lt;http://www.gnu.org/software/gdb/documentation/&gt;.
	For help, type &quot;help&quot;.
	Type &quot;apropos word&quot; to search for commands related to &quot;word&quot;...
	Reading symbols from vmlinux-4.4.8.debug...done.
	warning: core file may not match specified executable file.
	[New LWP 12345]
	Core was generated by `GuestVM'.
	Program terminated with signal SIGSEGV, Segmentation fault.
	#0  0xffffffff813df39a in insb (count=0, addr=0xffffc90000144000, port=&lt;optimized out&gt;)
	    at arch/x86/include/asm/io.h:316
	316     arch/x86/include/asm/io.h: No such file or directory.
	(gdb)
</code></pre><p><strong>Result</strong></p><p>In the results above, the <em>(gdb)</em> of the last line is the prompt of the gdb shell. You can now analyze the core dump by using commands like <code>bt</code>, to perform a backtrace, and <code>dmesg</code>, to view the Photon OS kernel log and see Photon OS kernel error messages.</p></div><div class=td-content style=page-break-before:always><h1 id=pg-daeaab5c036a9bfeb7dc2da74aa8256a>9.6 - Kernel Log Replication with VProbes</h1><p>Replicating the Photon OS kernel logs on the VMware ESXi host is an advanced but powerful method of troubleshooting a kernel problem.</p><ul><li><a href=#replication-method>Replication Method</a></li><li><a href=#using-vprobes-script-with-a-hard-coded-address>Using VProbes Script with a Hard-Coded Address</a></li><li><a href=#a-reusable-vprobe-script-using-the-kallsyms-file>A Reusable VProbe Script Using the kallsyms File</a></li></ul><h2 id=replication-method>Replication Method</h2><p>This method is applicable when the virtual machine running Photon OS is hanging or inaccessible because, for instance, the hard disk has failed.</p><p>As a prerequisite, you must have preemptively enabled the VMware VProbes facility on the VM before an error rendered it inaccessible. You must also create a VProbes script on the ESXi host, but you can do that after the error.</p><p>The method is useful in analyzing kernel issues when testing an application or appliance that is running on Photon OS.</p><p>There are two similar ways in which you can replicate the Photon OS kernel logs on ESXi by using VProbes.</p><ul><li><p>The first modifies the VProbes script so that it works only for the VM that you set. It uses a hard-coded address.</p></li><li><p>The second uses an abstraction instead of a hard-coded address so that the same VProbes script can be used for any VM on an ESXi host that you have enabled for VProbe and copied its kernel symbol table (kallsyms) to ESXi.</p></li></ul><p>For more information on VMware VProbes, see <a href=https://labs.vmware.com/vmtj/vprobes-deep-observability-into-the-esxi-hypervisor>VProbes: Deep Observability Into the ESXi Hypervisor</a> and the <a href=http://www.vmware.com/pdf/ws7_f3_vprobes_reference.pdf>VProbes Programming Reference</a>.</p><h2 id=using-vprobes-script-with-a-hard-coded-address>Using VProbes Script with a Hard-Coded Address</h2><p>Perform the following steps to set a VProbe for an individual VM:</p><ol><li><p>Power off the VM so that you can turn on the VProbe facility.</p><p>Edit the <code>.vmx</code> configuration file for the VM. The file resides in the directory that contains the VM in the ESXi data store. Add the following line of code to the <code>.vmx</code> file and then power the VM on:</p><pre><code> vprobe.enable = &quot;TRUE&quot;
</code></pre><p>When you edit the <code>.vmx</code> file to add the above line of code, you must first turn off the VM&ndash;otherwise, your changes will not persist.</p></li><li><p>Obtain the kernel <code>log_store</code> function address by connecting to the VM with SSH and running the following commands as root.</p><p>Photon OS uses the <code>kptr_restrict</code> setting to place restrictions on the kernel addresses exposed through <code>/proc</code> and other interfaces. This setting hides exposed kernel pointers to prevent attackers from exploiting kernel write vulnerabilities. When you are done using VProbes, you should return <code>kptr_restrict</code> to the original setting of <code>2</code> by rebooting.)</p><pre><code> echo 0 &gt; /proc/sys/kernel/kptr_restrict
 grep log_store /proc/kallsyms
</code></pre><p>The output of the <code>grep</code> command will look similar to the following string. The first set of characters (without the <code>t</code>) is the log_store function address:</p><pre><code> ffffffff810bb680 t log_store
</code></pre></li><li><p>Connect to the ESXi host with SSH so that you can create a VProbes script.</p><p>Below is the template for the script. <code>log_store</code> in the first line is a placeholder for the VM&rsquo;s log_store function address:</p><pre><code>GUEST:ENTER:log_store {
           string dst;
           getgueststr(dst, getguest(RSP+16) &amp; 0xff, getguest(RSP+8));
           printf(&quot;%s\n&quot;, dst);
        }
</code></pre><p>On the ESXi host, create a new file, add the template to it, and then change <code>log_store</code> to the function address that was the output from the grep command on the VM.</p></li><li><p>Add a <code>0x</code> prefix to the function address. In this example, the modified template looks like this:</p><pre><code>GUEST:ENTER:0xffffffff810bb680 {
       string dst;
       getgueststr(dst, getguest(RSP+16) &amp; 0xff, getguest(RSP+8));
       printf(&quot;%s\n&quot;, dst);
    }
</code></pre></li><li><p>Save your VProbes script as <code>console.emt</code> in the <code>/tmp</code> directory. (The file extension for VProbe scripts is <code>.emt</code>.)</p><p>While still connected to the ESXi host with SSH, run the following command to obtain the ID of the virtual machine that you want to troubleshoot:</p><p><code>vim-cmd vmsvc/getallvms</code></p><p>This command lists all the VMs running on the ESXi host. Find the VM you want to troubleshoot in the list and make a note of its ID.</p></li><li><p>Run the following command to print all the kernel messages from Photon OS in your SSH console; replace <code>&lt;VM ID></code> with the ID of your VM:</p><p><code>vprobe -m &lt;VM ID> /tmp/console.emt</code></p><p>When you&rsquo;re done, type <code>Ctrl-C</code> to stop the loop.</p></li></ol><h2 id=a-reusable-vprobe-script-using-the-kallsyms-file>A Reusable VProbe Script Using the kallsyms File</h2><p>Perform the following steps to create one VProbe script and use for all the VMs on your ESXi host.</p><ol><li><p>Power off the VM and turn on the VProbe facility on each VM that you want to be able to analyze.</p><p>Add <code>vprobe.enable = "TRUE"</code> to the VM&rsquo;s <code>.vmx</code> configuration file. See the instructions above.</p></li><li><p>Power on the VM, connect to it with SSH, and run the following command as root:</p><pre><code>`echo 0 &gt; /proc/sys/kernel/kptr_restrict`
</code></pre></li><li><p>Connect to the ESXi host with SSH to create the following VProbes script and save it as <code>/tmp/console.emt</code>:</p><pre><code>GUEST:ENTER:log_store {
       string dst;
       getgueststr(dst, getguest(RSP+16) &amp; 0xff, getguest(RSP+8));
       printf(&quot;%s\n&quot;, dst);
    }
</code></pre></li><li><p>From the ESXi host, run the following command to copy the VM&rsquo;s <code>kallysms</code> file to the <code>tmp</code> directory on the ESXi host:</p><pre><code>`scp root@&lt;vm ip address&gt;:/proc/kallsyms /tmp`
</code></pre><p>While still connected to the ESXi host with SSH, run the following command to obtain the ID of the virtual machine that you want to troubleshoot:</p><pre><code> `vim-cmd vmsvc/getallvms`
</code></pre><p>This command lists all the VMs running on the ESXi host. Find the VM you want to troubleshoot in the list and make a note of its ID.</p></li><li><p>Run the following command to print all the kernel messages from Photon OS in your SSH console.</p><p>Replace <code>&lt;VM ID></code> with the ID of your VM. When you&rsquo;re done, type <code>Ctrl-C</code> to stop the loop.</p><p><code>vprobe -m &lt;VM ID> -k /tmp/kallysyms /tmp/console.emt</code></p><p>You can use a directory other than <code>tmp</code> if you want.</p></li></ol></div><div class=td-content style=page-break-before:always><h1 id=pg-f8bffb3e220b96d1c691fab6b2f4b171>9.7 - Linux Kernel</h1><p>The Linux kernel is the main component of Photon OS and is the core interface between a computer’s hardware and its processes. It communicates between the two, managing resources as efficiently as possible.</p><p>##Kernel Flavours and Versions
The following list contains the different Linux kernel flavours available:</p><ul><li><code>linux</code> - A generic kernel designed to run everywhere and support everything.</li><li><code>linux-esx</code> - Optimized to run only on VMware hypervisor (ESXi, WS, Fusion). It has minimal set of device drivers to support VMware virtual devices. <code>uname -r</code> displays <code>Linux</code> . For additional features switch to the generic flavour.</li><li><code>linux-secure</code> - Security hardened variant of the generic kernel. <code>uname -r</code> displays <code>-secure</code> suffix.</li><li><code>linux-rt</code> - This is a Photon Real Time kernel. <code>uname -r</code> displays <code>-rt</code> suffix.</li><li><code>linux-aws</code> - Optimized for AWS hypervisor kernel. <code>uname -r</code> displays <code>-aws</code> suffix.</li></ul><p>To see the version of kernel installed, run the following command:</p><pre><code># rpm -qa | grep -e &quot;^linux\(\|-esx\|-secure\|rt\|aws\)-[[:digit:]]&quot;
linux-4.9.111-1.ph2.x86_64
linux-esx-4.9.111-1.ph2.x86_64
</code></pre><p>To see the version of the Kernel that is running currently, run the following command:</p><pre><code># uname -r
4.9.107-1.ph2-esx
</code></pre><p>From the output, you can see that the kernel running currently doesn&rsquo;t match the installer. This happens when linux-* rpms were updated but was not restarted. Restart is required.</p><p>##Configuration</p><p>To find the configurations of the installed Kernel, check the <strong>/boot</strong> directory by running the following command:</p><pre><code># ls /boot/config-*
config-4.9.111-1.ph2 config-4.9.111-1.ph2-esx
</code></pre><p>To get a copy of the kernel configuration (Not all flavours support this feature), run the <code>zcat /proc/config.gz</code> command.</p><p>##Boot Parameters and initrd
Several kernel flavors can be installed on the system, but only one is used during boot.
<strong>/boot/photon.cfg</strong> symlink points to the kernel which is used for boot.</p><pre><code># ls -l /boot/photon.cfg
lrwxrwxrwx 1 root root 23 Jun 12  2018 /boot/photon.cfg -&gt; linux-4.9.111-1.ph2.cfg
</code></pre><p>Its contents can be checked by running the following command:</p><pre><code># cat /boot/photon.cfg

# GRUB Environment Block

photon_cmdline=init=/lib/systemd/systemd ro loglevel=3 quiet no-vmw-sta

photon_linux=vmlinuz-4.9.111-1.ph2

photon_initrd=initrd.img-4.9.111-1.ph2
</code></pre><p>Where:</p><ul><li><code>photon_cmdline</code> - Kernel parameters. This list will be extended by values from <strong>/boot/systemd.cfg</strong> file and the values are hardcoded to <strong>/boot/grub2/grub.cfg</strong> file (For example: root=).</li><li><code>photon_linux</code> - Kernel image to boot.</li><li><code>photon_initrd</code> - Initrd to use at boot.</li></ul><p>Parameters of the kernel loading currently can be found by running the <code>/proc/cmdline</code> command:</p><pre><code># cat /proc/cmdline

BOOT_IMAGE=/boot/vmlinuz-4.9.107-1.ph2-esx root=PARTUUID=29194d05-4a6e-4e0c-b1f4-5020e5e8472c net.ifnames=0 init=/lib/systemd/systemd ro loglevel=3 quiet no-vmw-sta
</code></pre><p>##Dmesg</p><p>To view message buffer of the kernel run the <code>dmesg</code> command.</p><p>##Sysctl State</p><p>To view a list of all active units run the <code>systemctl list-units</code> command.</p><p>##Kernel Statistics</p><p>The kernel statitics can be found by running the following commands:</p><ul><li><code>procfs</code></li><li><code>sysfs</code></li><li><code>debugfs</code></li></ul><p>##Kernel Modules</p><p>To view the kernel log buffer run the <code>journalctl -k</code> command.</p><p>To view a list of available kernel modules run the <code>lsmod</code> command.</p><p>To view detailed information about all connected PCI buses run the <code>lspci</code> command.</p></div><div class=td-content style=page-break-before:always><h1 id=pg-db6c8d892731b711d7d08232c88d660e>10 - Performance Issues</h1><p>Performance issues can be difficult to troubleshoot because so many variables play a role in overall system performance. Interpreting performance data often depends on the context and the situation. To better identify and isolate variables and to gain insight into performance data, you can use the troubleshooting tools on Photon OS to diagnose the system.</p><ul><li><a href=general_performance_guidelines.md>General Guidelines</a></li><li><a href=throughput_performance.md>Throughput Performance</a></li></ul></div><div class=td-content style=page-break-before:always><h1 id=pg-d7dfe1c13df4b2c19bc5a19455b7c5c6>10.1 - General Performance Guidelines</h1><p>If you have no indication what the cause of a performance degradation might be, start by getting a high-level picture of the system&rsquo;s state. Then look for signs in the data that might point to a cause.</p><p>Use the following guidelines to gain insight into performance data:</p><ul><li><p>Start with the <code>systemd journal</code>.</p></li><li><p>The <code>top</code> tool can unmask problems caused by processes or applications overconsuming CPUs, time, or RAM. If the percent of CPU utilization is consistently high with little idle time, for example, there might be a runaway process. Restart it.</p></li><li><p>The <code>netstat --statistics</code> command can identify bottlenecks causing performance issues. It lists interface statistics for different protocols.</p></li><li><p>If <code>top</code> and <code>netstat</code> reveal no errors, run the <code>strace ls -al</code> to view every system call.</p></li><li><p>The <code>watch</code> command can help dynamically monitor a command to help troubleshoot performance issues:</p><p><code>watch -n0 --differences &lt;command></code></p><p>You can also combine <code>watch</code> with the <code>vmstat</code> command to dig deeper into statistics about virtual memory, processes, block input-output, disks, and CPU activity. Are there any bottlenecks?</p></li><li><p>You can use the <code>dstat</code> utility to see the live, running list of statistics about system resources.</p></li><li><p>The <code>systemd-analyze</code> reveals performance statistics for boot time and can help troubleshoot slow system boots and incorrect unit files.</p></li></ul><p>The additional tools that you select depend on the clues that your initial investigation reveals. The following tools can also help troubleshoot performance: <code>sysstat</code>, <code>sar</code>, <code>systemtap</code>, and <code>crash</code>.</p></div><div class=td-content style=page-break-before:always><h1 id=pg-0be0e0ec49fb47fcbab6983167f5f866>10.2 - Throughput Performance</h1><p>Throughtput performance over TCP might be reduced.</p><p>This might occur because timestamps are enabled by default and the parameter <code>net.ipv4.tcp_timestamps</code> has a value of 1.</p><p>Setting a value of 1 or 2 for this parameter may impact performance. Setting a value of 0 or 2 for this parameter might cause a security vulnerability.</p></div></main></div></div><div class=container><footer class="container-fluid p-0 m-0 py-5 row d-print-none"><div class="container-fluid p-0"><div class="row d-flex justify-content-between align-items-center mx-0"><div class="order-sm-1 left-links"><ul class="list-inline mb-0"><li class="list-inline-item h1 px-3 m-0" data-toggle=tooltip data-placement=top title=GitHub aria-label=GitHub><a class="text-dark ml-4" target=_blank rel="noopener noreferrer" href=https://github.com/vmware/photon#readme><i class="fab fa-github">&nbsp;</i>
GitHub</a></li><li class="list-inline-item h1 px-3 m-0" data-toggle=tooltip data-placement=top title=Slack aria-label=Slack><a class="text-dark ml-4" target=_blank rel="noopener noreferrer" href=https://vmwarecode.slack.com><i class="fab fa-slack">&nbsp;</i>
Slack</a></li></ul></div><div class="order-sm-3 justify-items-end footer-logo"><svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 511.4375 135.7375" height="135.7375" width="511.4375" id="svg3355"><defs id="defs3359"><clipPath id="clipPath3387" clipPathUnits="userSpaceOnUse"><path id="path3389" d="M142.293 245.191l494.93 337.36L74.8398 348.098"/></clipPath><linearGradient id="linearGradient3391" spreadMethod="pad" gradientTransform="matrix(-493.8,-339.007,339.007,-493.8,601.845,634.081)" gradientUnits="userSpaceOnUse" y2="0" x2="1" y1="0" x1="0"><stop id="stop3393" offset="0" style="stop-opacity:1;stop-color:#ffffff"/><stop id="stop3395" offset="1" style="stop-opacity:1;stop-color:#80c64c"/></linearGradient><clipPath id="clipPath3405" clipPathUnits="userSpaceOnUse"><path id="path3407" d="M85.2852 570.719 516.813 593.84 54.5195 690.582"/></clipPath><linearGradient id="linearGradient3409" spreadMethod="pad" gradientTransform="matrix(-304.079,-208.759,208.759,-304.079,420.197,734.568)" gradientUnits="userSpaceOnUse" y2="0" x2="1" y1="0" x1="0"><stop id="stop3411" offset="0" style="stop-opacity:1;stop-color:#ffffff"/><stop id="stop3413" offset="1" style="stop-opacity:1;stop-color:#22437e"/></linearGradient><clipPath id="clipPath3423" clipPathUnits="userSpaceOnUse"><path id="path3425" d="m538.137 270.234 95.324 293.5-205.699-247.089"/></clipPath><linearGradient id="linearGradient3427" spreadMethod="pad" gradientTransform="matrix(-255.101,-175.134,175.134,-255.101,686.667,486.234)" gradientUnits="userSpaceOnUse" y2="0" x2="1" y1="0" x1="0"><stop id="stop3429" offset="0" style="stop-opacity:1;stop-color:#ffffff"/><stop id="stop3431" offset="1" style="stop-opacity:1;stop-color:#65a5de"/></linearGradient><clipPath id="clipPath3441" clipPathUnits="userSpaceOnUse"><path id="path3443" d="M857.758 94.3906 656.035 546.801 745.172 53.6406"/></clipPath><linearGradient id="linearGradient3445" spreadMethod="pad" gradientTransform="matrix(-102.35,-449.574,449.574,-102.35,800.888,513.826)" gradientUnits="userSpaceOnUse" y2="0" x2="1" y1="0" x1="0"><stop id="stop3447" offset="0" style="stop-opacity:1;stop-color:#ffffff"/><stop id="stop3449" offset="1" style="stop-opacity:1;stop-color:#c6da3a"/></linearGradient><clipPath id="clipPath3459" clipPathUnits="userSpaceOnUse"><path id="path3461" d="M481.316 864.746 635.938 602.125l-41.313 301.32"/></clipPath><linearGradient id="linearGradient3463" spreadMethod="pad" gradientTransform="matrix(67.7401,274.401,-274.401,67.7401,532.514,627.656)" gradientUnits="userSpaceOnUse" y2="0" x2="1" y1="0" x1="0"><stop id="stop3465" offset="0" style="stop-opacity:1;stop-color:#ffffff"/><stop id="stop3467" offset="1" style="stop-opacity:1;stop-color:#c6da3a"/></linearGradient><clipPath id="clipPath3477" clipPathUnits="userSpaceOnUse"><path id="path3479" d="M1085.54 913.828 683.598 585.359l456.522 219.75"/></clipPath><linearGradient id="linearGradient3481" spreadMethod="pad" gradientTransform="matrix(441.375,262.068,-262.068,441.375,675.147,599.59)" gradientUnits="userSpaceOnUse" y2="0" x2="1" y1="0" x1="0"><stop id="stop3483" offset="0" style="stop-opacity:1;stop-color:#ffffff"/><stop id="stop3485" offset="1" style="stop-opacity:1;stop-color:#22638b"/></linearGradient><clipPath id="clipPath3495" clipPathUnits="userSpaceOnUse"><path id="path3497" d="M1177.19 335.031 693.664 556.211 1106.69 235.887"/></clipPath><linearGradient id="linearGradient3499" spreadMethod="pad" gradientTransform="matrix(450.785,-274.875,274.875,450.785,694.818,558.101)" gradientUnits="userSpaceOnUse" y2="0" x2="1" y1="0" x1="0"><stop id="stop3501" offset="0" style="stop-opacity:1;stop-color:#ffffff"/><stop id="stop3503" offset="1" style="stop-opacity:1;stop-color:#a6dbe7"/></linearGradient><clipPath id="clipPath3513" clipPathUnits="userSpaceOnUse"><path id="path3515" d="M209.754 773.73l382.32-187.417L280.926 872.391"/></clipPath><linearGradient id="linearGradient3517" spreadMethod="pad" gradientTransform="matrix(-360.263,223.047,-223.047,-360.263,601.957,602.271)" gradientUnits="userSpaceOnUse" y2="0" x2="1" y1="0" x1="0"><stop id="stop3519" offset="0" style="stop-opacity:1;stop-color:#ffffff"/><stop id="stop3521" offset="1" style="stop-opacity:1;stop-color:#a6dbe7"/></linearGradient></defs><g transform="matrix(1.25,0,0,-1.25,0,135.7375)" id="g3363"><g transform="scale(0.1,0.1)" id="g3365"><path id="path3367" style="fill:#696566;fill-opacity:1;fill-rule:nonzero;stroke:none" d="m1544.2 536.77c69.27.0 114.66 37.031 114.66 91.972v1.192c0 59.726-44.79 90.781-112.28 90.781h-105.7V536.77h103.32zm-150.51 203.652c0 13.141 10.75 23.891 23.29 23.891h133.19c94.36.0 156.47-50.172 156.47-132.586v-1.192c0-90.183-75.25-136.765-164.24-136.765h-101.52V367.148c0-13.132-10.76-23.886-23.9-23.886-12.54.0-23.29 10.754-23.29 23.886v373.274"/><path id="path3369" style="fill:#696566;fill-opacity:1;fill-rule:nonzero;stroke:none" d="m1765.51 743.41c0 13.141 10.76 23.887 23.29 23.887 13.14.0 23.9-10.746 23.9-23.887V578.574h241.28V743.41c0 13.141 10.74 23.887 23.88 23.887 12.55.0 23.3-10.746 23.3-23.887V367.148c0-13.132-10.75-23.886-23.3-23.886-13.14.0-23.88 10.754-23.88 23.886v167.227H1812.7V367.148c0-13.132-10.76-23.886-23.9-23.886-12.53.0-23.29 10.754-23.29 23.886V743.41"/><path id="path3371" style="fill:#696566;fill-opacity:1;fill-rule:nonzero;stroke:none" d="m2554.86 554.082v1.203c0 94.957-69.28 172.598-164.83 172.598-95.56.0-163.65-76.445-163.65-171.406v-1.192c0-94.961 69.28-172.597 164.84-172.597 95.55.0 163.64 76.445 163.64 171.394zm-377.45.0v1.203c0 115.262 86.6 216.192 213.81 216.192 127.2.0 212.6-99.739 212.6-215v-1.192c0-115.265-86.59-216.203-213.79-216.203-127.22.0-212.62 99.738-212.62 215"/><path id="path3373" style="fill:#696566;fill-opacity:1;fill-rule:nonzero;stroke:none" d="m2756.35 720.715h-121.24c-11.94.0-22.09 9.555-22.09 21.5.0 11.941 10.15 22.098 22.09 22.098h290.26c11.94.0 22.1-10.157 22.1-22.098.0-11.945-10.16-21.5-22.1-21.5h-121.23V367.148c0-13.132-10.75-23.886-23.9-23.886-13.13.0-23.89 10.754-23.89 23.886v353.567"/><path id="path3375" style="fill:#696566;fill-opacity:1;fill-rule:nonzero;stroke:none" d="m3332.78 554.082v1.203c0 94.957-69.28 172.598-164.83 172.598-95.56.0-163.65-76.445-163.65-171.406v-1.192c0-94.961 69.28-172.597 164.84-172.597 95.55.0 163.64 76.445 163.64 171.394zm-377.45.0v1.203c0 115.262 86.6 216.192 213.81 216.192 127.2.0 212.6-99.739 212.6-215v-1.192c0-115.265-86.59-216.203-213.79-216.203-127.22.0-212.62 99.738-212.62 215"/><path id="path3377" style="fill:#696566;fill-opacity:1;fill-rule:nonzero;stroke:none" d="m3458.31 742.813c0 12.539 10.75 23.292 23.29 23.292h6.57c10.75.0 17.32-5.375 23.89-13.742l253.83-323.691v315.332c0 12.547 10.14 23.293 23.29 23.293 12.54.0 22.69-10.746 22.69-23.293V366.555c0-12.539-8.96-22.09-21.5-22.09h-2.4c-10.14.0-17.31 5.965-24.48 14.324l-259.2 331.465V366.555c0-12.539-10.14-23.293-23.29-23.293-12.54.0-22.69 10.754-22.69 23.293v376.258"/><path id="path3379" style="fill:#696566;fill-opacity:1;fill-rule:nonzero;stroke:none" d="m3982.91 759.98c0 4.528 3.13 7.665 7.66 7.665h2.09c3.14.0 5.22-1.395 6.97-3.829l37.6-58.503 38.3 58.503c1.74 2.434 3.83 3.829 6.61 3.829h2.09c3.83.0 7.32-3.485 7.32-7.665v-94.011c0-4.18-3.49-7.66-7.66-7.66-4.18.0-7.31 3.48-7.31 7.66v72.426l-32.38-48.403c-1.75-2.785-3.83-4.527-6.97-4.527-3.13.0-5.22 1.742-6.96 4.527l-32.04 48.403v-72.426c0-4.18-3.48-7.66-7.66-7.66s-7.66 3.48-7.66 7.66v94.011zm-73.47-7.308h-28.91c-3.82.0-7.3 3.48-7.3 7.308.0 3.836 3.48 7.317 7.3 7.317h72.78c4.18.0 7.31-3.481 7.31-7.317.0-3.828-3.13-7.308-7.31-7.308h-28.55v-86.703c0-4.18-3.48-7.66-8.01-7.66-4.18.0-7.31 3.48-7.31 7.66v86.703"/><path id="path3381" style="fill:#696566;fill-opacity:1;fill-rule:nonzero;stroke:none" d="m597.898 989.039c-236.39.0-428.714-192.324-428.714-428.719.0-236.39 192.324-428.715 428.714-428.715 236.395.0 428.722 192.325 428.722 428.715.0 236.395-192.327 428.719-428.722 428.719zm0-954.289c-289.796.0-525.566 235.773-525.566 525.57s235.77 525.57 525.566 525.57c289.801.0 525.572-235.773 525.572-525.57S887.699 34.75 597.898 34.75"/><g id="g3383"><g clip-path="url(#clipPath3387)" id="g3385"><path id="path3397" style="fill:url(#linearGradient3391);fill-opacity:1;fill-rule:nonzero;stroke:none" d="M142.293 245.191l494.93 337.36L74.8398 348.098"/></g></g><path id="path3399" style="fill:#62b92c;fill-opacity:1;fill-rule:nonzero;stroke:none" d="m167.938 304.09c-4.524 34.332-36.024 58.496-70.356 53.973-34.332-4.52-58.5-36.02-53.9765-70.352 4.5234-34.336 36.0234-58.5 70.3555-53.977 34.332 4.524 58.5 36.02 53.977 70.356"/><g id="g3401"><g clip-path="url(#clipPath3405)" id="g3403"><path id="path3415" style="fill:url(#linearGradient3409);fill-opacity:1;fill-rule:nonzero;stroke:none" d="M85.2852 570.719 516.813 593.84 54.5195 690.582"/></g></g><path id="path3417" style="fill:#133a73;fill-opacity:1;fill-rule:nonzero;stroke:none" d="m124.875 636.605c-4.523 34.333-36.0234 58.5-70.3555 53.977C20.1875 686.059-3.98047 654.559.542969 620.227 5.06641 585.895 36.5664 561.727 70.8984 566.25c34.3356 4.523 58.4996 36.023 53.9766 70.355"/><g id="g3419"><g clip-path="url(#clipPath3423)" id="g3421"><path id="path3433" style="fill:url(#linearGradient3427);fill-opacity:1;fill-rule:nonzero;stroke:none" d="m538.137 270.234 95.324 293.5-205.699-247.089"/></g></g><path id="path3435" style="fill:#4194d7;fill-opacity:1;fill-rule:nonzero;stroke:none" d="m541.352 289.715c-4.524 34.332-36.024 58.5-70.356 53.973-34.336-4.52-58.5-36.02-53.976-70.352 4.523-34.336 36.023-58.5 70.355-53.977 34.332 4.524 58.496 36.024 53.977 70.356"/><g id="g3437"><g clip-path="url(#clipPath3441)" id="g3439"><path id="path3451" style="fill:url(#linearGradient3445);fill-opacity:1;fill-rule:nonzero;stroke:none" d="M857.758 94.3906 656.035 546.801 745.172 53.6406"/></g></g><path id="path3453" style="fill:#b9d110;fill-opacity:1;fill-rule:nonzero;stroke:none" d="m846.91 110.883c-26.609 22.164-66.144 18.558-88.308-8.051-22.164-26.6132-18.559-66.1406 8.05-88.3125 26.61-22.16013 66.145-18.55075 88.309 8.0586 22.164 26.6016 18.559 66.1446-8.051 88.3049"/><g id="g3455"><g clip-path="url(#clipPath3459)" id="g3457"><path id="path3469" style="fill:url(#linearGradient3463);fill-opacity:1;fill-rule:nonzero;stroke:none" d="M481.316 864.746 635.938 602.125l-41.313 301.32"/></g></g><path id="path3471" style="fill:#b9d110;fill-opacity:1;fill-rule:nonzero;stroke:none" d="m491.863 848.059c26.203-22.645 65.797-19.758 88.442 6.441 22.64 26.203 19.758 65.797-6.446 88.441-26.199 22.645-65.796 19.758-88.437-6.445-22.645-26.199-19.762-65.797 6.441-88.437"/><g id="g3473"><g clip-path="url(#clipPath3477)" id="g3475"><path id="path3487" style="fill:url(#linearGradient3481);fill-opacity:1;fill-rule:nonzero;stroke:none" d="M1085.54 913.828 683.598 585.359l456.522 219.75"/></g></g><path id="path3489" style="fill:#22638b;fill-opacity:1;fill-rule:nonzero;stroke:none" d="m1050.12 855.145c2.26-34.555 32.1-60.743 66.66-58.485 34.55 2.254 60.74 32.098 58.48 66.653-2.25 34.554-32.09 60.742-66.65 58.484-34.56-2.254-60.74-32.098-58.49-66.652"/><g id="g3491"><g clip-path="url(#clipPath3495)" id="g3493"><path id="path3505" style="fill:url(#linearGradient3499);fill-opacity:1;fill-rule:nonzero;stroke:none" d="M1177.19 335.031 693.664 556.211 1106.69 235.887"/></g></g><path id="path3507" style="fill:#91d2e1;fill-opacity:1;fill-rule:nonzero;stroke:none" d="m1108.75 338.84c-29.47-18.176-38.63-56.805-20.46-86.281 18.18-29.477 56.81-38.637 86.29-20.461 29.47 18.179 38.63 56.808 20.45 86.285-18.17 29.476-56.8 38.637-86.28 20.457"/><g id="g3509"><g clip-path="url(#clipPath3513)" id="g3511"><path id="path3523" style="fill:url(#linearGradient3517);fill-opacity:1;fill-rule:nonzero;stroke:none" d="M209.754 773.73l382.32-187.417L280.926 872.391"/></g></g><path id="path3525" style="fill:#91d2e1;fill-opacity:1;fill-rule:nonzero;stroke:none" d="m278.168 769.453c29.598 17.977 39.02 56.543 21.043 86.145-17.977 29.597-56.543 39.019-86.145 21.043-29.597-17.977-39.019-56.543-21.043-86.141 17.977-29.602 56.543-39.023 86.145-21.047"/><path id="path3527" style="fill:#62b92c;fill-opacity:1;fill-rule:nonzero;stroke:none" d="m714.422 718.262c8.172-9.321 22.351-10.246 31.672-2.074 9.316 8.175 10.246 22.355 2.07 31.675-8.172 9.317-22.351 10.246-31.672 2.071-9.316-8.172-10.246-22.356-2.07-31.672"/><path id="path3529" style="fill:#62b92c;fill-opacity:1;fill-rule:nonzero;stroke:none" d="m827.305 484.969c8.175-9.321 22.355-10.25 31.672-2.074 9.32 8.171 10.25 22.355 2.074 31.671-8.172 9.321-22.356 10.247-31.672 2.075-9.32-8.176-10.246-22.356-2.074-31.672"/><path id="path3531" style="fill:#62b92c;fill-opacity:1;fill-rule:nonzero;stroke:none" d="m906.813 877.289c8.175-9.316 22.355-10.246 31.675-2.07 9.317 8.172 10.246 22.351 2.071 31.672-8.172 9.32-22.356 10.246-31.672 2.074-9.321-8.176-10.246-22.356-2.074-31.676"/><path id="path3533" style="fill:#62b92c;fill-opacity:1;fill-rule:nonzero;stroke:none" d="m987.531 166.984c8.172-9.32 22.359-10.246 31.669-2.074 9.32 8.176 10.25 22.356 2.08 31.676-8.18 9.316-22.358 10.242-31.678 2.07-9.317-8.176-10.247-22.355-2.071-31.672"/><path id="path3535" style="fill:#62b92c;fill-opacity:1;fill-rule:nonzero;stroke:none" d="m140.008 473.707c8.172-9.32 22.351-10.246 31.672-2.074 9.316 8.176 10.246 22.355 2.074 31.676-8.176 9.316-22.356 10.246-31.676 2.07-9.316-8.172-10.246-22.356-2.07-31.672"/><path id="path3537" style="fill:#62b92c;fill-opacity:1;fill-rule:nonzero;stroke:none" d="m609.063 315.641c8.171-9.321 22.355-10.246 31.671-2.075 9.321 8.176 10.246 22.356 2.075 31.676-8.176 9.317-22.356 10.246-31.676 2.071-9.317-8.172-10.246-22.352-2.07-31.672"/><path id="path3539" style="fill:#62b92c;fill-opacity:1;fill-rule:nonzero;stroke:none" d="m458.551 398.422c8.172-9.317 22.351-10.246 31.672-2.07 9.32 8.171 10.246 22.351 2.074 31.671-8.176 9.317-22.356 10.247-31.676 2.071-9.316-8.172-10.246-22.352-2.07-31.672"/><path id="path3541" style="fill:#133a73;fill-opacity:1;fill-rule:nonzero;stroke:none" d="m518.754 661.82c8.176-9.32 22.355-10.246 31.672-2.074 9.32 8.176 10.25 22.356 2.074 31.676-8.176 9.316-22.355 10.246-31.672 2.07-9.32-8.172-10.25-22.355-2.074-31.672"/><path id="path3543" style="fill:#133a73;fill-opacity:1;fill-rule:nonzero;stroke:none" d="m744.523 394.66c8.172-9.32 22.356-10.246 31.672-2.074 9.321 8.176 10.246 22.355 2.075 31.676-8.176 9.316-22.356 10.246-31.672 2.07-9.321-8.172-10.25-22.355-2.075-31.672"/><path id="path3545" style="fill:#133a73;fill-opacity:1;fill-rule:nonzero;stroke:none" d="m714.422 605.379c8.172-9.32 22.351-10.246 31.672-2.074 9.316 8.172 10.246 22.355 2.07 31.672-8.172 9.32-22.351 10.246-31.672 2.074-9.316-8.176-10.246-22.356-2.07-31.672"/><path id="path3547" style="fill:#133a73;fill-opacity:1;fill-rule:nonzero;stroke:none" d="m368.242 469.918c8.172-9.32 22.356-10.25 31.672-2.074 9.32 8.172 10.246 22.355 2.074 31.672-8.175 9.32-22.355 10.246-31.675 2.074-9.317-8.176-10.247-22.356-2.071-31.672"/><path id="path3549" style="fill:#4194d7;fill-opacity:1;fill-rule:nonzero;stroke:none" d="m633.461 620.176c8.172-9.317 22.355-10.246 31.672-2.071 9.32 8.172 10.246 22.356 2.074 31.672-8.176 9.321-22.355 10.246-31.676 2.075-9.316-8.176-10.246-22.356-2.07-31.676"/><path id="path3551" style="fill:#4194d7;fill-opacity:1;fill-rule:nonzero;stroke:none" d="m646.691 752.129c8.172-9.32 22.352-10.25 31.672-2.074 9.321 8.172 10.246 22.355 2.075 31.672-8.176 9.32-22.356 10.246-31.676 2.074-9.317-8.176-10.246-22.356-2.071-31.672"/><path id="path3553" style="fill:#4194d7;fill-opacity:1;fill-rule:nonzero;stroke:none" d="m819.777 334.453c8.176-9.316 22.356-10.246 31.676-2.07 9.317 8.172 10.246 22.351 2.07 31.672-8.171 9.32-22.351 10.246-31.671 2.074-9.321-8.176-10.247-22.356-2.075-31.676"/><path id="path3555" style="fill:#4194d7;fill-opacity:1;fill-rule:nonzero;stroke:none" d="m812.242 571.512c8.176-9.321 22.356-10.246 31.676-2.074 9.316 8.175 10.246 22.355 2.07 31.675-8.172 9.317-22.351 10.246-31.672 2.071-9.316-8.172-10.246-22.356-2.074-31.672"/><path id="path3557" style="fill:#4194d7;fill-opacity:1;fill-rule:nonzero;stroke:none" d="m382.156 392.988c8.172-9.316 22.356-10.246 31.672-2.07 9.32 8.172 10.246 22.355 2.074 31.672-8.175 9.32-22.355 10.246-31.672 2.074-9.32-8.176-10.25-22.355-2.074-31.676"/><path id="path3559" style="fill:#4194d7;fill-opacity:1;fill-rule:nonzero;stroke:none" d="m613.543 476.398c8.176-9.32 22.355-10.25 31.676-2.074 9.316 8.176 10.246 22.356 2.07 31.672-8.172 9.32-22.355 10.246-31.672 2.074-9.32-8.175-10.246-22.355-2.074-31.672"/><path id="path3561" style="fill:#4194d7;fill-opacity:1;fill-rule:nonzero;stroke:none" d="m435.969 645.902c8.172-9.32 22.351-10.246 31.672-2.074 9.32 8.176 10.246 22.356 2.074 31.676-8.176 9.316-22.356 10.246-31.676 2.07-9.316-8.172-10.246-22.355-2.07-31.672"/><path id="path3563" style="fill:#4194d7;fill-opacity:1;fill-rule:nonzero;stroke:none" d="m629.688 164.293c8.171-9.32 22.355-10.246 31.671-2.074 9.321 8.176 10.246 22.355 2.075 31.676-8.176 9.316-22.356 10.246-31.672 2.07-9.321-8.172-10.25-22.356-2.074-31.672"/><path id="path3565" style="fill:#b9d110;fill-opacity:1;fill-rule:nonzero;stroke:none" d="m499.398 462.395c12.329-1.301 23.379 7.632 24.684 19.96 1.305 12.325-7.633 23.375-19.961 24.68-12.324 1.305-23.375-7.633-24.68-19.957-1.304-12.328 7.633-23.379 19.957-24.683"/><path id="path3567" style="fill:#b9d110;fill-opacity:1;fill-rule:nonzero;stroke:none" d="m721.23 510.641c-12.3 1.527-23.511-7.207-25.039-19.508-1.527-12.301 7.207-23.512 19.508-25.039 12.301-1.528 23.512 7.207 25.039 19.508 1.528 12.3-7.207 23.507-19.508 25.039"/><path id="path3569" style="fill:#22638b;fill-opacity:1;fill-rule:nonzero;stroke:none" d="m594.34 420.676c-7.543 9.836-21.629 11.695-31.469 4.152-9.836-7.543-11.691-21.633-4.148-31.469s21.632-11.695 31.468-4.152 11.696 21.633 4.149 31.469"/><path id="path3571" style="fill:#22638b;fill-opacity:1;fill-rule:nonzero;stroke:none" d="m594.828 581.156c-7.543 9.836-21.633 11.696-31.469 4.153s-11.695-21.633-4.152-31.469c7.547-9.836 21.633-11.695 31.469-4.152 9.836 7.542 11.695 21.632 4.152 31.468"/><path id="path3573" style="fill:#91d2e1;fill-opacity:1;fill-rule:nonzero;stroke:none" d="m458.199 576.973c5.156 11.273.199 24.59-11.07 29.75-11.274 5.156-24.59.199-29.746-11.071-5.16-11.273-.203-24.589 11.066-29.75 11.274-5.156 24.594-.199 29.75 11.071"/><path id="path3575" style="fill:#91d2e1;fill-opacity:1;fill-rule:nonzero;stroke:none" d="m635.691 569.449c-5.234-11.234-.367-24.59 10.868-29.82 11.238-5.234 24.589-.371 29.824 10.867 5.234 11.234.367 24.586-10.867 29.82-11.239 5.235-24.59.372-29.825-10.867"/></g></g></svg></div></div><div class="row d-flex m-0 my-4 justify-content-end align-items-end"><small class="text-dark align-content-center mx-3">&copy; 2021 Photon OS Authors. <a href=https://vmware.github.io>A VMware Backed Project</a></small><div class=text-right><a href=../../../><img class=vmw-footer-logo src=../../../img/vmware-logo.svg></a></div></div></footer></div></div></div><script src=https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js integrity=sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49 crossorigin=anonymous></script><script src=https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js integrity=sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy crossorigin=anonymous></script><script src=../../../js/main.min.906bd02f142be20eb94bb49539a18a3e93ec0b9ff5f5dcf3796eed436a6103d2.js integrity="sha256-kGvQLxQr4g65S7SVOaGKPpPsC5/19dzzeW7tQ2phA9I=" crossorigin=anonymous></script><script src=../../../js/animated.js></script></body></html>